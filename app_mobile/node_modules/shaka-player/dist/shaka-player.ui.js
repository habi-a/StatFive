/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
(function(){var innerGlobal=typeof window!="undefined"?window:global;var exportTo={};(function(window,global,module){var m,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(){ca=function(){};ba.Symbol||(ba.Symbol=da)}var da=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function ea(){ca();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return fa(this)}});ea=function(){}}function fa(a){var b=0;return ha(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ha(a){ea();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}function r(a){ea();var b=a[Symbol.iterator];return b?b.call(a):fa(a)}
function ia(a,b){if(b){for(var c=ba,d=a.split("."),e=0;e<d.length-1;e++){var f=d[e];f in c||(c[f]={});c=c[f]}d=d[d.length-1];e=c[d];f=b(e);f!=e&&null!=f&&aa(c,d,{configurable:!0,writable:!0,value:f})}}
ia("Promise",function(a){function b(a){this.h=0;this.l=void 0;this.g=[];var b=this.i();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}}function c(){this.g=null}function d(a){return a instanceof b?a:new b(function(b){b(a)})}if(a)return a;c.prototype.h=function(a){null==this.g&&(this.g=[],this.j());this.g.push(a)};c.prototype.j=function(){var a=this;this.i(function(){a.s()})};var e=ba.setTimeout;c.prototype.i=function(a){e(a,0)};c.prototype.s=function(){for(;this.g&&this.g.length;){var a=this.g;this.g=
[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(n){this.l(n)}}}this.g=null};c.prototype.l=function(a){this.i(function(){throw a;})};b.prototype.i=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.F),reject:a(this.j)}};b.prototype.F=function(a){if(a===this)this.j(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.H(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;
break a;default:c=!1}c?this.C(a):this.s(a)}};b.prototype.C=function(a){var b=void 0;try{b=a.then}catch(l){this.j(l);return}"function"==typeof b?this.K(b,a):this.s(a)};b.prototype.j=function(a){this.u(2,a)};b.prototype.s=function(a){this.u(1,a)};b.prototype.u=function(a,b){if(0!=this.h)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.h);this.h=a;this.l=b;this.B()};b.prototype.B=function(){if(null!=this.g){for(var a=0;a<this.g.length;++a)f.h(this.g[a]);this.g=null}};
var f=new c;b.prototype.H=function(a){var b=this.i();a.Lc(b.resolve,b.reject)};b.prototype.K=function(a,b){var c=this.i();try{a.call(b,c.resolve,c.reject)}catch(n){c.reject(n)}};b.prototype.then=function(a,c){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(z){f(z)}}:b}var e,f,h=new b(function(a,b){e=a;f=b});this.Lc(d(a,e),d(c,f));return h};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.Lc=function(a,b){function c(){switch(d.h){case 1:a(d.l);break;
case 2:b(d.l);break;default:throw Error("Unexpected state: "+d.h);}}var d=this;null==this.g?f.h(c):this.g.push(c)};b.resolve=d;b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,c){for(var e=r(a),f=e.next();!f.done;f=e.next())d(f.value).Lc(b,c)})};b.all=function(a){var c=r(a),e=c.next();return e.done?d([]):new b(function(a,b){function f(b){return function(c){h[b]=c;k--;0==k&&a(h)}}var h=[],k=0;do h.push(void 0),k++,d(e.value).Lc(f(h.length-1),b),e=c.next();
while(!e.done)})};return b});ia("Promise.prototype.finally",function(a){return a?a:function(a){return this.then(function(b){return Promise.resolve(a()).then(function(){return b})},function(b){return Promise.resolve(a()).then(function(){throw b;})})}});function ja(a){function b(b){return a.next(b)}function c(b){return a["throw"](b)}return new Promise(function(d,e){function f(a){a.done?d(a.value):Promise.resolve(a.value).then(b,c).then(f,e)}f(a.next())})}function u(a){return ja(a())}
var la="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ma;if("function"==typeof Object.setPrototypeOf)ma=Object.setPrototypeOf;else{var na;a:{var pa={a:!0},qa={};try{qa.__proto__=pa;na=qa.a;break a}catch(a){}na=!1}ma=na?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ra=ma;
function ta(a,b){a.prototype=la(b.prototype);a.prototype.constructor=a;if(ra)ra(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Mh=b.prototype}function ua(){this.l=!1;this.i=null;this.G=void 0;this.A=1;this.h=this.j=0;this.u=this.g=null}function wa(a){if(a.l)throw new TypeError("Generator is already running");a.l=!0}ua.prototype.s=function(a){this.G=a};
function xa(a,b){a.g={Me:b,Ze:!0};a.A=a.j||a.h}ua.prototype["return"]=function(a){this.g={"return":a};this.A=this.h};function v(a,b,c){a.A=c;return{value:b}}ua.prototype.I=function(a){this.A=a};function w(a){a.A=0}function ya(a,b,c){a.j=b;void 0!=c&&(a.h=c)}function za(a,b){a.j=0;a.h=b||0}function Aa(a,b){a.A=b;a.j=0}function Da(a){a.j=0;var b=a.g.Me;a.g=null;return b}function Ea(a){a.u=[a.g];a.j=0;a.h=0}
function Ga(a,b){var c=a.u.splice(0)[0];(c=a.g=a.g||c)?c.Ze?a.A=a.j||a.h:void 0!=c.I&&a.h<c.I?(a.A=c.I,a.g=null):a.A=a.h:a.A=b}function Ha(a){this.g=new ua;this.h=a}function Ia(a,b){wa(a.g);var c=a.g.i;if(c)return Ja(a,"return"in c?c["return"]:function(a){return{value:a,done:!0}},b,a.g["return"]);a.g["return"](b);return Ka(a)}
function Ja(a,b,c,d){try{var e=b.call(a.g.i,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.g.l=!1,e;var f=e.value}catch(h){return a.g.i=null,xa(a.g,h),Ka(a)}a.g.i=null;d.call(a.g,f);return Ka(a)}
function Ka(a){for(;a.g.A;)try{var b=a.h(a.g);if(b)return a.g.l=!1,{value:b.value,done:!1}}catch(c){a.g.G=void 0,xa(a.g,c)}a.g.l=!1;if(a.g.g){b=a.g.g;a.g.g=null;if(b.Ze)throw b.Me;return{value:b["return"],done:!0}}return{value:void 0,done:!0}}
function La(a){this.next=function(b){wa(a.g);a.g.i?b=Ja(a,a.g.i.next,b,a.g.s):(a.g.s(b),b=Ka(a));return b};this["throw"]=function(b){wa(a.g);a.g.i?b=Ja(a,a.g.i["throw"],b,a.g.s):(xa(a.g,b),b=Ka(a));return b};this["return"]=function(b){return Ia(a,b)};ea();this[Symbol.iterator]=function(){return this}}function y(a,b){La.prototype=a.prototype;return new La(new Ha(b))}function Oa(a){if(!(a instanceof Array)){a=r(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
function Pa(a,b){ea();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ia("Array.prototype.keys",function(a){return a?a:function(){return Pa(this,function(a){return a})}});function Qa(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
ia("WeakMap",function(a){function b(a){this.g=(f+=Math.random()+1).toString();if(a){ca();ea();a=r(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(a){Qa(a,e)||aa(a,e,{value:{}})}function d(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d["delete"](b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(n){return!1}}())return a;
var e="$jscomp_hidden_"+Math.random();d("freeze");d("preventExtensions");d("seal");var f=0;b.prototype.set=function(a,b){c(a);if(!Qa(a,e))throw Error("WeakMap key fail: "+a);a[e][this.g]=b;return this};b.prototype.get=function(a){return Qa(a,e)?a[e][this.g]:void 0};b.prototype.has=function(a){return Qa(a,e)&&Qa(a[e],this.g)};b.prototype["delete"]=function(a){return Qa(a,e)&&Qa(a[e],this.g)?delete a[e][this.g]:!1};return b});
ia("Map",function(a){function b(){var a={};return a.jb=a.next=a.head=a}function c(a,b){var c=a.g;return ha(function(){if(c){for(;c.head!=a.g;)c=c.jb;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})}function d(a,b){var c=b&&typeof b;"object"==c||"function"==c?f.has(b)?c=f.get(b):(c=""+ ++h,f.set(b,c)):c="p_"+b;var d=a.h[c];if(d&&Qa(a.h,c))for(var e=0;e<d.length;e++){var k=d[e];if(b!==b&&k.key!==k.key||b===k.key)return{id:c,list:d,index:e,va:k}}return{id:c,
list:d,index:-1,va:void 0}}function e(a){this.h={};this.g=b();this.size=0;if(a){a=r(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(r([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||
"t"!=e.value[1]||!d.next().done?!1:!0}catch(q){return!1}}())return a;ca();ea();var f=new WeakMap;e.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.h[c.id]=[]);c.va?c.va.value=b:(c.va={next:this.g,jb:this.g.jb,head:this.g,key:a,value:b},c.list.push(c.va),this.g.jb.next=c.va,this.g.jb=c.va,this.size++);return this};e.prototype["delete"]=function(a){a=d(this,a);return a.va&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.h[a.id],a.va.jb.next=a.va.next,a.va.next.jb=a.va.jb,
a.va.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.h={};this.g=this.g.jb=b();this.size=0};e.prototype.has=function(a){return!!d(this,a).va};e.prototype.get=function(a){return(a=d(this,a).va)&&a.value};e.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return c(this,function(a){return a.key})};e.prototype.values=function(){return c(this,function(a){return a.value})};e.prototype.forEach=function(a,b){for(var c=this.entries(),
d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});
ia("Set",function(a){function b(a){this.g=new Map;if(a){a=r(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.g.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a(r([b]));if(!d.has(b)||1!=d.size||d.add(b)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=b||f.value[1]!=b)return!1;f=e.next();return f.done||f.value[0]==b||4!=f.value[0].x||
f.value[1]!=f.value[0]?!1:e.next().done}catch(h){return!1}}())return a;ca();ea();b.prototype.add=function(a){this.g.set(a,a);this.size=this.g.size;return this};b.prototype["delete"]=function(a){a=this.g["delete"](a);this.size=this.g.size;return a};b.prototype.clear=function(){this.g.clear();this.size=0};b.prototype.has=function(a){return this.g.has(a)};b.prototype.entries=function(){return this.g.entries()};b.prototype.values=function(){return this.g.values()};b.prototype.keys=b.prototype.values;
b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.g.forEach(function(d){return a.call(b,d,d,c)})};return b});ia("Array.from",function(a){return a?a:function(a,c,d){ea();c=null!=c?c:function(a){return a};var b=[],f=a[Symbol.iterator];if("function"==typeof f)for(a=f.call(a);!(f=a.next()).done;)b.push(c.call(d,f.value));else{f=a.length;for(var h=0;h<f;h++)b.push(c.call(d,a[h]))}return b}});
function Ua(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{We:e,Ff:f}}return{We:-1,Ff:void 0}}ia("Array.prototype.findIndex",function(a){return a?a:function(a,c){return Ua(this,a,c).We}});ia("Array.prototype.find",function(a){return a?a:function(a,c){return Ua(this,a,c).Ff}});
function Va(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}ia("String.prototype.startsWith",function(a){return a?a:function(a,c){for(var b=Va(this,a,"startsWith"),e=b.length,f=a.length,h=Math.max(0,Math.min(c|0,b.length)),k=0;k<f&&h<e;)if(b[h++]!=a[k++])return!1;return k>=f}});
ia("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});ia("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length,f=c||0;for(0>f&&(f=Math.max(f+e,0));f<e;f++){var h=b[f];if(h===a||Object.is(h,a))return!0}return!1}});ia("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==Va(this,a,"includes").indexOf(a,c||0)}});
var Wa="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Qa(d,e)&&(a[e]=d[e])}return a};ia("Object.assign",function(a){return a||Wa});var Xa=this;Xa.g=!0;function A(a,b){var c=a.split("."),d=Xa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}
function Za(a,b){function c(){}c.prototype=b.prototype;a.Mh=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function B(a,b){b=void 0===b?{}:b;for(var c in b)this[c]=b[c];this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now();this.type=a;this.isTrusted=!1;this.target=this.currentTarget=null;this.g=!1}A("shaka.util.FakeEvent",B);B.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};B.prototype.stopImmediatePropagation=function(){this.g=!0};B.prototype.stopPropagation=function(){};var D={Sb:0,Ic:function(){},ha:function(){},error:function(){},D:function(){},info:function(){},debug:function(){},N:function(){},T:function(){}};window.console&&window.console.log.bind&&(D.ha=console.warn.bind(console),D.Ic=console.error.bind(console),1<=D.Sb&&(D.error=console.error.bind(console)),2<=D.Sb&&(D.D=console.warn.bind(console)),3<=D.Sb&&(D.info=console.info.bind(console)),4<=D.Sb&&(D.debug=console.log.bind(console)),5<=D.Sb&&(D.N=console.debug.bind(console)),6<=D.Sb&&(D.T=console.debug.bind(console)));function $a(){this.g={}}m=$a.prototype;m.push=function(a,b){this.g.hasOwnProperty(a)?this.g[a].push(b):this.g[a]=[b]};m.get=function(a){return(a=this.g[a])?a.slice():null};m.getAll=function(){var a=[],b;for(b in this.g)a.push.apply(a,this.g[b]);return a};m.remove=function(a,b){var c=this.g[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)};m.forEach=function(a){for(var b in this.g)a(b,this.g[b])};m.size=function(){return Object.keys(this.g).length};function ab(){this.Sd=new $a;this.Hc=this}ab.prototype.addEventListener=function(a,b){this.Sd.push(a,b)};ab.prototype.removeEventListener=function(a,b){this.Sd.remove(a,b)};ab.prototype.dispatchEvent=function(a){for(var b=this.Sd.get(a.type)||[],c=0;c<b.length;++c){a.target=this.Hc;a.currentTarget=this.Hc;var d=b[c];try{d.handleEvent?d.handleEvent(a):d.call(this,a)}catch(e){D.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(a.g)break}return a.defaultPrevented};function bb(a,b){for(var c=[],d=r(a),e=d.next();!e.done;e=d.next())c.push(b(e.value));return c}function cb(a,b){for(var c=r(a),d=c.next();!d.done;d=c.next())if(!b(d.value))return!1;return!0}function db(a,b){for(var c=r(a),d=c.next();!d.done;d=c.next())if(b(d.value))return!0;return!1}function eb(a,b){for(var c=[],d=r(a),e=d.next();!e.done;e=d.next())e=e.value,b(e)&&c.push(e);return c};function fb(a,b){a=E(a);b=E(b);return a.split("-")[0]==b.split("-")[0]}function jb(a,b){a=E(a);b=E(b);var c=a.split("-"),d=b.split("-");return c[0]==d[0]&&1==c.length&&2==d.length}function E(a){var b=a.split("-");a=b[0]||"";b=b[1]||"";a=a.toLowerCase();a=kb.get(a)||a;return(b=b.toUpperCase())?a+"-"+b:a}function lb(a){var b=a.indexOf("-");a=0<=b?a.substring(0,b):a;a=a.toLowerCase();return a=kb.get(a)||a}
function mb(a){return a.language?E(a.language):a.audio&&a.audio.language?E(a.audio.language):a.video&&a.video.language?E(a.video.language):"und"}
function nb(a,b){for(var c=E(a),d=new Set,e=r(b),f=e.next();!f.done;f=e.next())d.add(E(f.value));e=r(d);for(f=e.next();!f.done;f=e.next())if(f=f.value,f==c)return f;e=r(d);for(f=e.next();!f.done;f=e.next())if(f=f.value,jb(f,c))return f;e=r(d);for(f=e.next();!f.done;f=e.next()){var h=f=f.value,k=c;h=E(h);k=E(k);h=h.split("-");k=k.split("-");if(2==h.length&&2==k.length&&h[0]==k[0])return f}d=r(d);for(f=d.next();!f.done;f=d.next())if(e=f.value,jb(c,e))return e;return null}
var kb=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze",
"cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice",
"is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao",
"mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san",
"sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie",
"vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function ob(a){this.l=E(a);this.j=new Map;this.h=new Set;this.i=new Map;this.g=new ab}A("shaka.ui.Localization",ob);ob.prototype.addEventListener=function(a,b,c){this.g.addEventListener(a,b,c)};ob.prototype.addEventListener=ob.prototype.addEventListener;ob.prototype.removeEventListener=function(a,b,c){this.g.removeEventListener(a,b,c||void 0)};ob.prototype.removeEventListener=ob.prototype.removeEventListener;ob.prototype.dispatchEvent=function(a){return this.g.dispatchEvent(a)};
ob.prototype.dispatchEvent=ob.prototype.dispatchEvent;ob.prototype.He=function(a){var b=this;this.h.clear();a=r(a);for(var c=a.next();!c.done;c=a.next())this.h.add(E(c.value));pb(this);this.g.dispatchEvent(new B("locale-changed"));a=eb(this.h,function(a){return!b.i.has(a)});a.length&&this.g.dispatchEvent(new B("unknown-locales",{locales:a}))};ob.prototype.changeLocale=ob.prototype.He;
ob.prototype.ka=function(a,b,c){var d=qb;a=E(a);void 0===c&&(c=d.Mf);var e=this.i.get(a)||new Map;b.forEach(function(a,b){e.has(b)&&c!=d.Mf||e.set(b,a)});this.i.set(a,e);pb(this);this.g.dispatchEvent(new B("locale-updated"));return this};ob.prototype.insert=ob.prototype.ka;ob.prototype.wh=function(a){for(var b=r(a.keys()),c=b.next();!c.done;c=b.next())c=c.value,a.set(c,this.resolve(c))};ob.prototype.resolveDictionary=ob.prototype.wh;
ob.prototype.resolve=function(a){var b=this.j.get(a);if(b)return b;a={locales:Array.from(this.h),missing:a};this.g.dispatchEvent(new B("unknown-localization",a));return""};ob.prototype.resolve=ob.prototype.resolve;
function pb(a){for(var b=a.i,c=a.l,d=a.h,e=new Set,f={},h=r(d),k=h.next();!k.done;f={locale:f.locale},k=h.next()){f.locale=k.value;e.add(f.locale);e.add(lb(f.locale));k=eb(b.keys(),function(a){return function(b){var c=a.locale,d=lb(b),e=lb(c);return b!=d&&c!=e&&d==e}}(f));k.sort();var l=r(k);for(k=l.next();!k.done;k=l.next())e.add(k.value);k=eb(b.keys(),function(a){return function(b){return lb(b)==a.locale}}(f));k.sort();l=r(k);for(k=l.next();!k.done;k=l.next())e.add(k.value)}e.add(c);c=[];e=r(e);
for(k=e.next();!k.done;k=e.next())(k=b.get(k.value))&&c.push(k);c.reverse();a.j.clear();b=r(c);for(k=b.next();!k.done;k=b.next())k.value.forEach(function(b,c){a.j.set(c,b)});b=a.j.keys();e=new Set;c=r(a.h);for(k=c.next();!k.done;k=c.next())k=a.i.get(k.value)||new Map,rb(k,b,e);0<e.size&&(d={locales:Array.from(d),missing:Array.from(e)},a.g.dispatchEvent(new B("missing-localizations",d)))}function rb(a,b,c){b=r(b);for(var d=b.next();!d.done;d=b.next())d=d.value,a.get(d)||c.add(d)}
var qb={USE_OLD:0,USE_NEW:1};ob.ConflictResolution=qb;ob.UNKNOWN_LOCALES="unknown-locales";ob.UNKNOWN_LOCALIZATION="unknown-localization";ob.MISSING_LOCALIZATIONS="missing-localizations";ob.LOCALE_CHANGED="locale-changed";ob.LOCALE_UPDATED="locale-updated";function sb(a){this.i=Math.exp(Math.log(.5)/a);this.h=this.g=0}function tb(a,b,c){var d=Math.pow(a.i,b);c=c*(1-d)+d*a.g;isNaN(c)||(a.g=c,a.h+=b)}function ub(a){return a.g/(1-Math.pow(a.i,a.h))};function vb(){this.h=new sb(2);this.i=new sb(5);this.g=0}vb.prototype.getBandwidthEstimate=function(a){return 128E3>this.g?a:Math.min(ub(this.h),ub(this.i))};function F(a,b,c,d){for(var e=[],f=3;f<arguments.length;++f)e[f-3]=arguments[f];this.severity=a;this.category=b;this.code=c;this.data=e;this.handled=!1}A("shaka.util.Error",F);F.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};F.Severity={RECOVERABLE:1,CRITICAL:2};F.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9};
F.Code={UNSUPPORTED_SCHEME:1E3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2E3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3E3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,
MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4E3,
DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,
HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6E3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,
FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7E3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8E3,NO_CAST_RECEIVERS:8001,
ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9E3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
var zb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
function Ab(a){var b;a instanceof Ab?(Bb(this,a.Ua),this.Pb=a.Pb,this.Ta=a.Ta,Cb(this,a.ic),this.Ga=a.Ga,Db(this,a.g.clone()),this.Ab=a.Ab):a&&(b=String(a).match(zb))?(Bb(this,b[1]||"",!0),this.Pb=Eb(b[2]||""),this.Ta=Eb(b[3]||"",!0),Cb(this,b[4]),this.Ga=Eb(b[5]||"",!0),Db(this,b[6]||"",!0),this.Ab=Eb(b[7]||"")):this.g=new Fb(null)}m=Ab.prototype;m.Ua="";m.Pb="";m.Ta="";m.ic=null;m.Ga="";m.Ab="";
m.toString=function(){var a=[],b=this.Ua;b&&a.push(Gb(b,Hb,!0),":");if(b=this.Ta){a.push("//");var c=this.Pb;c&&a.push(Gb(c,Hb,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.ic;null!=b&&a.push(":",String(b))}if(b=this.Ga)this.Ta&&"/"!=b.charAt(0)&&a.push("/"),a.push(Gb(b,"/"==b.charAt(0)?Ib:Jb,!0));(b=this.g.toString())&&a.push("?",b);(b=this.Ab)&&a.push("#",Gb(b,Kb));return a.join("")};
m.resolve=function(a){var b=this.clone();"data"===b.Ua&&(b=new Ab);var c=!!a.Ua;c?Bb(b,a.Ua):c=!!a.Pb;c?b.Pb=a.Pb:c=!!a.Ta;c?b.Ta=a.Ta:c=null!=a.ic;var d=a.Ga;if(c)Cb(b,a.ic);else if(c=!!a.Ga){if("/"!=d.charAt(0))if(this.Ta&&!this.Ga)d="/"+d;else{var e=b.Ga.lastIndexOf("/");-1!=e&&(d=b.Ga.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){e=0==d.lastIndexOf("/",0);d=d.split("/");for(var f=[],h=0;h<d.length;){var k=d[h++];"."==k?e&&h==d.length&&f.push(""):".."==
k?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),e&&h==d.length&&f.push("")):(f.push(k),e=!0)}d=f.join("/")}}c?b.Ga=d:c=""!==a.g.toString();c?Db(b,a.g.clone()):c=!!a.Ab;c&&(b.Ab=a.Ab);return b};m.clone=function(){return new Ab(this)};function Bb(a,b,c){a.Ua=c?Eb(b,!0):b;a.Ua&&(a.Ua=a.Ua.replace(/:$/,""))}function Cb(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.ic=b}else a.ic=null}function Db(a,b,c){b instanceof Fb?a.g=b:(c||(b=Gb(b,Lb)),a.g=new Fb(b))}
function Eb(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Gb(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Qb),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Qb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Hb=/[#\/\?@]/g,Jb=/[#\?:]/g,Ib=/[#\?]/g,Lb=/[#\?@]/g,Kb=/#/g;function Fb(a){this.g=a||null}m=Fb.prototype;m.Ea=null;m.Oc=null;
m.add=function(a,b){if(!this.Ea&&(this.Ea={},this.Oc=0,this.g))for(var c=this.g.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),f=null;if(0<=e){var h=c[d].substring(0,e);f=c[d].substring(e+1)}else h=c[d];h=decodeURIComponent(h.replace(/\+/g," "));f=f||"";this.add(h,decodeURIComponent(f.replace(/\+/g," ")))}this.g=null;(c=this.Ea.hasOwnProperty(a)&&this.Ea[a])||(this.Ea[a]=c=[]);c.push(b);this.Oc++;return this};
m.toString=function(){if(this.g)return this.g;if(!this.Ea)return"";var a=[],b;for(b in this.Ea)for(var c=encodeURIComponent(b),d=this.Ea[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.g=a.join("&")};m.clone=function(){var a=new Fb;a.g=this.g;if(this.Ea){var b={},c;for(c in this.Ea)b[c]=this.Ea[c].concat();a.Ea=b;a.Oc=this.Oc}return a};var Rb={Uf:function(a,b){return a.reduce(function(a,b,e){return b["catch"](a.bind(null,e))}.bind(null,b),Promise.reject())},rd:function(a,b){return a.concat(b)},Zc:function(){},qb:function(a){return null!=a}};function Sb(a,b){if(0==b.length)return a;var c=b.map(function(a){return new Ab(a)});return a.map(function(a){return new Ab(a)}).map(function(a){return c.map(a.resolve.bind(a))}).reduce(Rb.rd,[]).map(function(a){return a.toString()})}function Tb(a,b){return{keySystem:a,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:b||[],keyIds:[]}}
var Ub={wb:"video",nc:"audio",Pa:"text",Uh:"image",Sh:"application"},Vb=1/15;function G(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;return c}G.prototype.resolve=function(){};G.prototype.reject=function(){};function Wb(a){if(!a)return"";a=new Uint8Array(a);239==a[0]&&187==a[1]&&191==a[2]&&(a=a.subarray(3));a=Xb(a);a=escape(a);try{return decodeURIComponent(a)}catch(b){throw new F(2,2,2004);}}A("shaka.util.StringUtils.fromUTF8",Wb);
function Yb(a,b,c){if(!a)return"";if(!c&&0!=a.byteLength%2)throw D.error("Data has an incorrect length, must be even."),new F(2,2,2004);if(a instanceof ArrayBuffer)var d=a;else c=new Uint8Array(a.byteLength),c.set(new Uint8Array(a)),d=c.buffer;a=Math.floor(a.byteLength/2);c=new Uint16Array(a);d=new DataView(d);for(var e=0;e<a;e++)c[e]=d.getUint16(2*e,b);return Xb(c)}A("shaka.util.StringUtils.fromUTF16",Yb);
function Zb(a){var b=new Uint8Array(a);if(239==b[0]&&187==b[1]&&191==b[2])return Wb(b);if(254==b[0]&&255==b[1])return Yb(b.subarray(2),!1);if(255==b[0]&&254==b[1])return Yb(b.subarray(2),!0);var c=function(a,b){return a.byteLength<=b||32<=a[b]&&126>=a[b]}.bind(null,b);D.debug("Unable to find byte-order-mark, making an educated guess.");if(0==b[0]&&0==b[2])return Yb(a,!1);if(0==b[1]&&0==b[3])return Yb(a,!0);if(c(0)&&c(1)&&c(2)&&c(3))return Wb(a);throw new F(2,2,2003);}
A("shaka.util.StringUtils.fromBytesAutoDetect",Zb);function $b(a){a=encodeURIComponent(a);a=unescape(a);for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b.buffer}A("shaka.util.StringUtils.toUTF8",$b);function ac(a,b){for(var c=new Uint8Array(2*a.length),d=new DataView(c.buffer),e=0;e<a.length;++e)d.setUint16(2*e,a.charCodeAt(e),b);return c.buffer}A("shaka.util.StringUtils.toUTF16",ac);
function Xb(a){if(!bc)for(var b=function(a){try{var b=new Uint8Array(a);return 0<String.fromCharCode.apply(null,b).length}catch(f){return!1}},c={size:65536};0<c.size;c={size:c.size},c.size/=2)if(b(c.size)){bc=function(a){return function(b){for(var c="",d=0;d<b.length;d+=a.size)c+=String.fromCharCode.apply(null,b.subarray(d,d+a.size));return c}}(c);break}return bc(a)}var bc=null;A("shaka.util.StringUtils.resetFromCharCode",function(){bc=null});var I={md:function(a,b){var c=Xb(a);b=void 0==b?!0:b;c=window.btoa(c).replace(/\+/g,"-").replace(/\//g,"_");return b?c:c.replace(/=*$/,"")}};A("shaka.util.Uint8ArrayUtils.toBase64",I.md);I.cb=function(a){a=window.atob(a.replace(/-/g,"+").replace(/_/g,"/"));for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b};A("shaka.util.Uint8ArrayUtils.fromBase64",I.cb);
I.yd=function(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b};A("shaka.util.Uint8ArrayUtils.fromHex",I.yd);I.nd=function(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b};A("shaka.util.Uint8ArrayUtils.toHex",I.nd);I.ab=function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};A("shaka.util.Uint8ArrayUtils.equal",I.ab);
I.concat=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];for(var d=c=0;d<b.length;++d)c+=b[d].length;c=new Uint8Array(c);for(var e=d=0;e<b.length;++e)c.set(b[e],d),d+=b[e].length;return c};A("shaka.util.Uint8ArrayUtils.concat",I.concat);function cc(){this.g=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0});this.h=null;this.l=[];this.i=[];this.j=!1;this.g.on("data",this.u.bind(this));this.g.on("done",this.s.bind(this))}cc.prototype.destroy=function(){this.g.dispose();this.g=null;return Promise.resolve()};function dc(a,b){return window.muxjs&&"mp2t"==a.toLowerCase().split(";")[0].split("/")[1]?b?MediaSource.isTypeSupported(ec(b,a)):MediaSource.isTypeSupported(ec("audio",a))||MediaSource.isTypeSupported(ec("video",a)):!1}
function ec(a,b){var c=b.replace(/mp2t/i,"mp4");"audio"==a&&(c=c.replace("video","audio"));var d=/avc1\.(66|77|100)\.(\d+)/.exec(c);if(d){var e="avc1.",f=d[1],h=Number(d[2]);e=("66"==f?e+"4200":"77"==f?e+"4d00":e+"6400")+(h>>4).toString(16);e+=(h&15).toString(16);c=c.replace(d[0],e)}return c}function fc(a,b){a.j=!0;a.h=new G;a.l=[];a.i=[];var c=new Uint8Array(b);a.g.push(c);a.g.flush();a.j&&a.h.reject(new F(2,3,3018));return a.h}
cc.prototype.u=function(a){this.i=a.captions;var b=new Uint8Array(a.data.byteLength+a.initSegment.byteLength);b.set(a.initSegment,0);b.set(a.data,a.initSegment.byteLength);this.l.push(b)};cc.prototype.s=function(){var a={data:I.concat.apply(null,this.l),captions:this.i};this.h.resolve(a);this.j=!1};function gc(a){this.h=a;this.g=null}gc.prototype.U=function(a){var b=this;this.stop();var c=!0,d=null;this.g=function(){window.clearTimeout(d);c=!1};d=window.setTimeout(function(){c&&b.h()},1E3*a);return this};gc.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function K(a){this.h=a;this.g=null}A("shaka.util.Timer",K);K.prototype.kb=function(){this.stop();this.h();return this};K.prototype.tickNow=K.prototype.kb;K.prototype.U=function(a){var b=this;this.stop();this.g=(new gc(function(){b.h()})).U(a);return this};K.prototype.tickAfter=K.prototype.U;K.prototype.Na=function(a){var b=this;this.stop();this.g=(new gc(function(){b.g.U(a);b.h()})).U(a);return this};K.prototype.tickEvery=K.prototype.Na;K.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)};
K.prototype.stop=K.prototype.stop;function hc(a,b){var c=ic();this.u=null==a.maxAttempts?c.maxAttempts:a.maxAttempts;this.j=null==a.baseDelay?c.baseDelay:a.baseDelay;this.s=null==a.fuzzFactor?c.fuzzFactor:a.fuzzFactor;this.l=null==a.backoffFactor?c.backoffFactor:a.backoffFactor;this.g=0;this.h=this.j;if(this.i=void 0===b?!1:b)this.g=1}
function jc(a){return u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:if(a.g>=a.u)if(a.i)a.g=1,a.h=a.j;else return c["return"](Promise.reject());d=a.g;a.g++;if(0==d)return c["return"]();e=a.h*(1+(2*Math.random()-1)*a.s);return v(c,new Promise(function(a){(new K(a)).U(e/1E3)}),2);case 2:a.h*=a.l,w(c)}})})}function ic(){return{maxAttempts:2,baseDelay:1E3,backoffFactor:2,fuzzFactor:.5,timeout:0}};function kc(a,b){this.promise=a;this.cf=b;this.g=!1}A("shaka.util.AbortableOperation",kc);function lc(a){return new kc(Promise.reject(a),function(){return Promise.resolve()})}kc.failed=lc;function mc(){var a=Promise.reject(new F(2,7,7001));a["catch"](function(){});return new kc(a,function(){return Promise.resolve()})}kc.aborted=mc;function nc(a){return new kc(Promise.resolve(a),function(){return Promise.resolve()})}kc.completed=nc;
function oc(a){return new kc(a,function(){return a["catch"](function(){})})}kc.notAbortable=oc;kc.prototype.abort=function(){this.g=!0;return this.cf()};kc.prototype.abort=kc.prototype.abort;function pc(a){return new kc(Promise.all(a.map(function(a){return a.promise})),function(){return Promise.all(a.map(function(a){return a.abort()}))})}kc.all=pc;kc.prototype["finally"]=function(a){this.promise.then(function(){return a(!0)},function(){return a(!1)});return this};kc.prototype["finally"]=kc.prototype["finally"];
kc.prototype.ra=function(a,b){function c(c){return function(k){if(e.g&&c)f.reject(h);else{var l=c?a:b;l?d=qc(l,k,f):(c?f.resolve:f.reject)(k)}}}function d(){f.reject(h);return e.abort()}var e=this,f=new G,h=new F(2,7,7001);this.promise.then(c(!0),c(!1));return new kc(f,function(){return d()})};kc.prototype.chain=kc.prototype.ra;
function qc(a,b,c){try{var d=a(b);if(d&&d.promise&&d.abort)return c.resolve(d.promise),function(){return d.abort()};c.resolve(d);return function(){return Promise.resolve(d).then(function(){},function(){})}}catch(e){return c.reject(e),function(){return Promise.resolve()}}};function rc(a){function b(a){switch(typeof a){case "undefined":case "boolean":case "number":case "string":case "symbol":case "function":return a;default:if(!a||a.buffer&&a.buffer.constructor==ArrayBuffer)return a;if(c.has(a))return null;var d=a.constructor==Array;if(a.constructor!=Object&&!d)return null;c.add(a);var f=d?[]:{},h;for(h in a)f[h]=b(a[h]);d&&(f.length=a.length);return f}}var c=new Set;return b(a)};function sc(a,b){return"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)?!0:a===b}function uc(a,b){var c=a.indexOf(b);-1<c&&a.splice(c,1)}function vc(a,b){var c=0;a.forEach(function(a){c+=b(a)?1:0});return c}
function wc(a,b,c){c||(c=sc);if(a.length!=b.length)return!1;b=b.slice();var d={};a=r(a);for(var e=a.next();!e.done;d={item:d.item},e=a.next()){d.item=e.value;e=b.findIndex(function(a){return function(b){return c(a.item,b)}}(d));if(-1==e)return!1;b[e]=b[b.length-1];b.pop()}return 0==b.length}function xc(a,b,c){c||(c=sc);if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(!c(a[d],b[d]))return!1;return!0};function yc(){this.g=[]}function zc(a,b){a.g.push(b["finally"](function(){uc(a.g,b)}))}yc.prototype.destroy=function(){var a=[];this.g.forEach(function(b){b.promise["catch"](function(){});a.push(b.abort())});this.g=[];return Promise.all(a)};function L(a){ab.call(this);this.j=!1;this.l=new yc;this.g=new Set;this.h=new Set;this.i=a||null}Za(L,ab);A("shaka.net.NetworkingEngine",L);L.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};L.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Ac={};function Bc(a,b,c){c=c||3;var d=Ac[a];if(!d||c>=d.priority)Ac[a]={priority:c,lh:b}}L.registerScheme=Bc;L.unregisterScheme=function(a){delete Ac[a]};L.prototype.nh=function(a){this.g.add(a)};L.prototype.registerRequestFilter=L.prototype.nh;
L.prototype.Nh=function(a){this.g["delete"](a)};L.prototype.unregisterRequestFilter=L.prototype.Nh;L.prototype.Sf=function(){this.g.clear()};L.prototype.clearAllRequestFilters=L.prototype.Sf;L.prototype.oh=function(a){this.h.add(a)};L.prototype.registerResponseFilter=L.prototype.oh;L.prototype.Oh=function(a){this.h["delete"](a)};L.prototype.unregisterResponseFilter=L.prototype.Oh;L.prototype.Tf=function(){this.h.clear()};L.prototype.clearAllResponseFilters=L.prototype.Tf;
L.defaultRetryParameters=function(){return ic()};function Cc(a,b){return{uris:a,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:b,licenseRequestType:null,sessionId:null}}L.makeRequest=Cc;L.prototype.destroy=function(){this.j=!0;this.g.clear();this.h.clear();return this.l.destroy()};L.prototype.destroy=L.prototype.destroy;
L.prototype.request=function(a,b){var c=this,d=new Dc;if(this.j){var e=Promise.reject(new F(2,7,7001));e["catch"](function(){});return new Ec(e,function(){return Promise.resolve()},d)}b.method=b.method||"GET";b.headers=b.headers||{};b.retryParameters=b.retryParameters?rc(b.retryParameters):ic();b.uris=rc(b.uris);e=Fc(this,a,b);var f=e.ra(function(){return Gc(c,a,b,new hc(b.retryParameters,!1),0,null,d)}),h=f.ra(function(b){return Hc(c,a,b)}),k=Date.now(),l=0;e.promise.then(function(){l=Date.now()-
k},function(){});var n=0;f.promise.then(function(){n=Date.now()},function(){});e=h.ra(function(b){var d=Date.now()-n,e=b.response;e.timeMs+=l;e.timeMs+=d;b.Ig||!c.i||e.fromCache||1!=a||c.i(e.timeMs,e.data.byteLength);return e},function(a){a&&(a.severity=2);throw a;});e=new Ec(e.promise,e.cf,d);zc(this.l,e);return e};L.prototype.request=L.prototype.request;
function Fc(a,b,c){var d=nc(void 0),e={};a=r(a.g);for(var f=a.next();!f.done;e={ce:e.ce},f=a.next())e.ce=f.value,d=d.ra(function(a){return function(){return a.ce(b,c)}}(e));return d.ra(void 0,function(a){if(a&&7001==a.code)throw a;throw new F(2,1,1006,a);})}
function Gc(a,b,c,d,e,f,h){var k=new Ab(c.uris[e]),l=k.Ua,n=!1;l||(l=location.protocol,l=l.slice(0,-1),Bb(k,l),c.uris[e]=k.toString());l=l.toLowerCase();var p=(l=Ac[l])?l.lh:null;if(!p)return lc(new F(2,1,1E3,k));var q;return oc(jc(d)).ra(function(){if(a.j)return mc();q=Date.now();return p(c.uris[e],c,b,function(c,d,e){a.i&&1==b&&(a.i(c,d),n=!0,h.g=e)})}).ra(function(a){void 0==a.timeMs&&(a.timeMs=Date.now()-q);return{response:a,Ig:n}},function(k){if(k&&7001==k.code)throw k;if(a.j)return mc();if(k&&
1==k.severity)return a.dispatchEvent(new B("retry",{error:k instanceof F?k:null})),e=(e+1)%c.uris.length,Gc(a,b,c,d,e,k,h);throw k||f;})}function Hc(a,b,c){var d=nc(void 0);a=r(a.h);for(var e=a.next();!e.done;e=a.next())d=d.ra(e.value.bind(null,b,c.response));return d.ra(function(){return c},function(a){if(a&&7001==a.code)throw a;var b=2;a instanceof F&&(b=a.severity);throw new F(b,1,1007,a);})}function Dc(){this.g=0}L.NumBytesRemainingClass=Dc;function Ec(a,b,c){kc.call(this,a,b);this.h=c}
ta(Ec,kc);L.PendingRequest=Ec;Ec.all=pc;Ec.notAbortable=oc;Ec.completed=nc;Ec.aborted=mc;Ec.failed=lc;function Ic(){}A("shaka.util.IReleasable",Ic);Ic.prototype.release=function(){};function M(){this.g=new $a}A("shaka.util.EventManager",M);M.prototype.release=function(){this.Mb();this.g=null};M.prototype.release=M.prototype.release;M.prototype.v=function(a,b,c,d){this.g&&(a=new Jc(a,b,c,d),this.g.push(b,a))};M.prototype.listen=M.prototype.v;M.prototype.Ma=function(a,b,c,d){function e(d){f.Ba(a,b,e);c(d)}var f=this;this.v(a,b,e,d)};M.prototype.listenOnce=M.prototype.Ma;
M.prototype.Ba=function(a,b,c){if(this.g){var d=this.g.get(b)||[];d=r(d);for(var e=d.next();!e.done;e=d.next())e=e.value,e.target!=a||c!=e.listener&&c||(e.Ba(),this.g.remove(b,e))}};M.prototype.unlisten=M.prototype.Ba;M.prototype.Mb=function(){if(this.g){var a=this.g.getAll();a=r(a);for(var b=a.next();!b.done;b=a.next())b.value.Ba();this.g.g={}}};M.prototype.removeAll=M.prototype.Mb;
function Jc(a,b,c,d){this.target=a;this.type=b;this.listener=c;this.g=Kc(a,d);this.target.addEventListener(b,c,this.g)}Jc.prototype.Ba=function(){this.target.removeEventListener(this.type,this.listener,this.g);this.listener=this.target=null;this.g=!1};Jc.prototype.unlisten=Jc.prototype.Ba;function Kc(a,b){if(void 0==b)return!1;if("boolean"==typeof b)return b;var c=new Set(["passive","capture"]);Object.keys(b).filter(function(a){return!c.has(a)});return Lc(a)?b:b.capture||!1}
function Lc(a){var b=Mc;if(void 0==b){b=!1;try{var c={},d={get:function(){b=!0;return!1}};Object.defineProperty(c,"passive",d);Object.defineProperty(c,"capture",d);d=function(){};a.addEventListener("test",d,c);a.removeEventListener("test",d,c)}catch(e){b=!1}Mc=b}return b||!1}var Mc=void 0;function Nc(a){a=Zb(a);return(new Ab(a)).Ta}A("shaka.util.FairPlayUtils.defaultGetContentId",Nc);function Oc(a,b,c){function d(a){(new DataView(e.buffer)).setUint32(f,a.byteLength,!0);f+=4;e.set(a,f);f+=a.byteLength}if(!c||!c.byteLength)throw new F(2,6,6015);b="string"==typeof b?new Uint8Array(ac(b,!0)):new Uint8Array(b);a=Zb(a);a=ac(a,!0);var e=new Uint8Array(12+a.byteLength+b.byteLength+c.byteLength),f=0;d(new Uint8Array(a));d(b);d(new Uint8Array(c));return e}
A("shaka.util.FairPlayUtils.initDataTransform",Oc);function Pc(a){var b=new Map;Object.keys(a).forEach(function(c){b.set(c,a[c])});return b}function Qc(a){var b={};a.forEach(function(a,d){b[d]=a});return b};function Rc(a,b){var c=a;b&&(c+='; codecs="'+b+'"');return c}function Sc(a){var b=[a.mimeType];Tc.forEach(function(c,d){var e=a[d];e&&b.push(c+'="'+e+'"')});return b.join(";")}function Uc(a){a=a.split(/ *; */);a.shift();return(a=a.find(function(a){return a.startsWith("codecs=")}))?a.split("=")[1].replace(/^"|"$/g,""):""}function Vc(a){a=a.split(".");var b=a[0];a.pop();return[b,a.join(".")]}
var Tc=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Wc(){return window.MediaSource&&MediaSource.isTypeSupported?!0:!1}function Xc(a){return""!=Yc().canPlayType(a)}function Zc(){return $c("Tizen")}function ad(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Zc()}function bd(){if(!ad())return null;var a=navigator.userAgent.match(/Version\/(\d+)/);return a?parseInt(a[1],10):(a=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(a[1],10):null}function $c(a){return(navigator.userAgent||"").includes(a)}
function Yc(){if(cd)return cd;dd||(dd=new K(function(){cd=null}));(cd=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(cd=document.createElement("video"));dd.U(1);return cd}var dd=null,cd=null;function ed(a,b){var c=this;b=void 0===b?1:b;this.K=a;this.F=new Set;this.s=this.u=null;this.V=!1;this.P=0;this.g=null;this.B=new M;this.h=new Map;this.H=[];this.C=new G;this.j=null;this.l=function(b){c.C.reject(b);a.onError(b)};this.sa=new Map;this.ba=new Map;this.R=new K(function(){return fd(c)});this.i=!1;this.oa=new G;this.M=!1;this.O=[];this.qa=!1;this.ea=(new K(function(){gd(c)})).Na(b);this.C["catch"](function(){})}m=ed.prototype;
m.destroy=function(){var a=this;return u(function c(){return y(c,function(c){switch(c.A){case 1:if(a.i)return v(c,a.oa,0);a.i=!0;return v(c,hd(a),4);case 4:a.oa.resolve(),c.I(0)}})})};
function hd(a){return u(function c(){return y(c,function(c){switch(c.A){case 1:return a.B.release(),a.B=null,a.C.reject(),a.ea.stop(),a.ea=null,a.R.stop(),a.R=null,v(c,id(a),2);case 2:if(!a.s){c.I(3);break}ya(c,4);return v(c,a.s.setMediaKeys(null),6);case 6:Aa(c,5);break;case 4:Da(c);case 5:a.s=null;case 3:a.g=null,a.F.clear(),a.u=null,a.H=[],a.j=null,a.l=null,a.K=null,w(c)}})})}m.configure=function(a){this.j=a};function jd(a,b,c){a.H=[];a.M=c;return kd(a,b)}
function ld(a,b,c){a.H=c;a.M=0<c.length;return kd(a,b)}function md(a,b,c,d,e,f){var h=new Map;h.set(b,{audioCapabilities:e,videoCapabilities:f,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:b,drmInfos:[{keySystem:b,licenseServerUri:c,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:d,initData:null,keyIds:null}]});return nd(a,h)}
function kd(a,b){var c=od(a);if(c)for(var d=r(b),e=d.next();!e.done;e=d.next())e.value.drmInfos=[c];c=b.some(function(a){return 0<a.drmInfos.length});c||(e=Pc(a.j.servers),pd(b,e));d=r(b);for(e=d.next();!e.done;e=d.next()){e=r(e.value.drmInfos);for(var f=e.next();!f.done;f=e.next())qd(f.value,Pc(a.j.servers),Pc(a.j.advanced||{}))}e=rd(a,b);if(!e.size)return a.V=!0,Promise.resolve();e=nd(a,e);return c?e:e["catch"](function(){})}
m.pc=function(a){var b=this;if(!this.u)return this.B.Ma(a,"encrypted",function(){b.l(new F(2,6,6010))}),Promise.resolve();this.s=a;this.B.Ma(this.s,"play",function(){for(var a=0;a<b.O.length;a++)sd(b,b.O[a]);b.qa=!0;b.O=[]});"webkitCurrentPlaybackTargetIsWireless"in this.s&&this.B.v(this.s,"webkitcurrentplaybacktargetiswirelesschanged",function(){return id(b)});a=this.s.setMediaKeys(this.u);a=a["catch"](function(a){return Promise.reject(new F(2,6,6003,a.message))});var c=td(this);return Promise.all([a,
c]).then(function(){if(b.i)return Promise.reject();ud(b);b.g.initData.length||b.H.length||b.B.v(b.s,"encrypted",function(a){return vd(b,a.initDataType,new Uint8Array(a.initData))})})["catch"](function(a){if(!b.i)return Promise.reject(a)})};
function td(a){return u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:if(!(a.u&&a.g&&a.g.serverCertificate&&a.g.serverCertificate.length)){c.I(0);break}ya(c,3);return v(c,a.u.setServerCertificate(a.g.serverCertificate),5);case 5:(d=c.G)||D.D("Server certificates are not supported by the key system.  The server certificate has been ignored.");Aa(c,0);break;case 3:return e=Da(c),c["return"](Promise.reject(new F(2,6,6004,e.message)))}})})}
function wd(a,b){return u(function d(){var e,f,h;return y(d,function(d){switch(d.A){case 1:return v(d,xd(a,b),2);case 2:e=d.G;if(!e)return D.T("Ignoring attempt to remove missing session",b),d["return"]();f=[];if(h=a.h.get(e))h.Za=new G,f.push(h.Za);D.T("Attempting to remove session",b);f.push(e.remove());return v(d,Promise.all(f),0)}})})}
function ud(a){var b=a.g?a.g.initData:[];b.forEach(function(b){return vd(a,b.initDataType,b.initData)});a.H.forEach(function(b){return xd(a,b)});b.length||a.H.length||a.C.resolve();return a.C}function vd(a,b,c){var d=a.h.values();d=r(d);for(var e=d.next();!e.done;e=d.next())if(I.ab(c,e.value.initData)&&!$c("Tizen 2")){D.debug("Ignoring duplicate init data.");return}yd(a,b,c)}function zd(a){return a?a.keySystem:""}
function Ad(a,b){if(navigator.userAgent.match(/Edge\//))return!0;b=b.toLowerCase();if(Zc()&&b.includes('codecs="ac-3"')){var c=b.replace("ac-3","ec-3");return a.F.has(b)||a.F.has(c)}return a.F.has(b)}function Bd(a){a=a.h.keys();a=bb(a,function(a){return a.sessionId});return Array.from(a)}m.sc=function(){var a=Infinity,b=this.h.keys();b=r(b);for(var c=b.next();!c.done;c=b.next())c=c.value,isNaN(c.expiration)||(a=Math.min(a,c.expiration));return a};
function rd(a,b){for(var c=new Set,d=r(b),e=d.next();!e.done;e=d.next()){var f=r(e.value.drmInfos);for(e=f.next();!e.done;e=f.next())c.add(e.value)}d=r(c);for(e=d.next();!e.done;e=d.next())qd(e.value,Pc(a.j.servers),Pc(a.j.advanced||{}));f=a.M?"required":"optional";var h=a.M?["persistent-license"]:["temporary"];d=new Map;c=r(c);for(e=c.next();!e.done;e=c.next())e=e.value,d.set(e.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:f,sessionTypes:h,
label:e.keySystem,drmInfos:[]});c=r(b);for(e=c.next();!e.done;e=c.next()){e=e.value;f=e.audio;h=e.video;var k=f?Cd(f):"",l=h?Cd(h):"",n=r(e.drmInfos);for(e=n.next();!e.done;e=n.next()){e=e.value;var p=d.get(e.keySystem);p.drmInfos.push(e);e.distinctiveIdentifierRequired&&(p.distinctiveIdentifier="required");e.persistentStateRequired&&(p.persistentState="required");f&&(p.audioCapabilities.push({robustness:e.audioRobustness||"",contentType:k}),"ac-3"==f.codecs.toLowerCase()&&Zc()&&p.audioCapabilities.push({robustness:e.audioRobustness||
"",contentType:Rc(f.mimeType,"ec-3")}));h&&p.videoCapabilities.push({robustness:e.videoRobustness||"",contentType:l})}}return d}function Cd(a){var b=Rc(a.mimeType,a.codecs);return dc(b)?ec(a.type,b):b}
function nd(a,b){if(1==b.size&&b.has(""))return Promise.reject(new F(2,6,6E3));for(var c=r(b.values()),d=c.next();!d.done;d=c.next())d=d.value,0==d.audioCapabilities.length&&delete d.audioCapabilities,0==d.videoCapabilities.length&&delete d.videoCapabilities;var e=c=new G;[!0,!1].forEach(function(a){var c=this;b.forEach(function(b,d){b.drmInfos.some(function(a){return!!a.licenseServerUri})==a&&(e=e["catch"](function(){if(!this.i)return navigator.requestMediaKeySystemAccess(d,[b])}.bind(c)))})}.bind(a));
e=e["catch"](function(){return Promise.reject(new F(2,6,6001))});e=e.then(function(a){if(this.i)return Promise.reject();this.F.clear();var c=a.getConfiguration(),d=c.videoCapabilities||[],e=r(c.audioCapabilities||[]);for(c=e.next();!c.done;c=e.next())this.F.add(c.value.contentType.toLowerCase());d=r(d);for(c=d.next();!c.done;c=d.next())this.F.add(c.value.contentType.toLowerCase());d=a.keySystem;c=b.get(a.keySystem);e=[];var f=[],p=[],q=[];Dd(c.drmInfos,e,f,p,q);1<f.length&&D.D("Multiple unique server certificates found! Only the first will be used.");
1<e.length&&D.D("Multiple unique license server URIs found! Only the first will be used.");this.g={keySystem:d,licenseServerUri:e[0],distinctiveIdentifierRequired:"required"==c.distinctiveIdentifier,persistentStateRequired:"required"==c.persistentState,audioRobustness:(c.audioCapabilities?c.audioCapabilities[0].robustness:"")||"",videoRobustness:(c.videoCapabilities?c.videoCapabilities[0].robustness:"")||"",serverCertificate:f[0],initData:p,keyIds:q};return this.g.licenseServerUri?a.createMediaKeys():
Promise.reject(new F(2,6,6012,this.g.keySystem))}.bind(a)).then(function(a){if(this.i)return Promise.reject();D.info("Created MediaKeys object for key system",this.g.keySystem);this.u=a;this.V=!0}.bind(a))["catch"](function(a){if(!this.i)return this.g=null,this.F.clear(),a instanceof F?Promise.reject(a):Promise.reject(new F(2,6,6002,a.message))}.bind(a));c.reject();return e}
function od(a){a=Pc(a.j.clearKeys);if(0==a.size)return null;var b=[],c=[];a.forEach(function(a,d){var e=I.yd(d),f=I.yd(a);e={kty:"oct",kid:I.md(e,!1),k:I.md(f,!1)};b.push(e);c.push(e.kid)});a=JSON.stringify({keys:b});var d=JSON.stringify({kids:c});d=[{initData:new Uint8Array($b(d)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(a),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",
serverCertificate:null,initData:d,keyIds:[]}}
function xd(a,b){try{D.N("Attempting to load an offline session",b);var c=a.u.createSession("persistent-license")}catch(f){var d=new F(2,6,6005,f.message);a.l(d);return Promise.reject(d)}a.B.v(c,"message",a.kf.bind(a));a.B.v(c,"keystatuseschange",a.hf.bind(a));var e={initData:null,loaded:!1,Td:Infinity,Za:null};a.h.set(c,e);return c.load(b).then(function(a){if(this.i)return Promise.reject();D.T("Loaded offline session",b,a);if(a)return e.loaded=!0,Ed(this)&&this.C.resolve(),c;this.h["delete"](c);
this.l(new F(2,6,6013))}.bind(a),function(a){this.i||(this.h["delete"](c),this.l(new F(2,6,6005,a.message)))}.bind(a))}
function yd(a,b,c){try{if(a.M){D.N("Creating new persistent session");var d=a.u.createSession("persistent-license")}else D.N("Creating new temporary session"),d=a.u.createSession()}catch(e){a.l(new F(2,6,6005,e.message));return}a.B.v(d,"message",a.kf.bind(a));a.B.v(d,"keystatuseschange",a.hf.bind(a));a.h.set(d,{initData:c,loaded:!1,Td:Infinity,Za:null});try{c=a.j.initDataTransform(c,a.g)}catch(e){b=e;e instanceof F||(b=new F(2,6,6016,e));a.l(b);return}d.generateRequest(b,c)["catch"](function(b){if(!a.i){a.h["delete"](d);
if(b.errorCode&&b.errorCode.systemCode){var c=b.errorCode.systemCode;0>c&&(c+=Math.pow(2,32));c="0x"+c.toString(16)}a.l(new F(2,6,6006,b.message,b,c))}})}function Fd(a,b){if(zd(b).startsWith("com.apple.fps")){var c=b.serverCertificate,d=Nc(a);a=Oc(a,d,c)}return a}m.kf=function(a){this.s&&this.j.delayLicenseRequestUntilPlayed&&this.s.paused&&!this.qa?this.O.push(a):sd(this,a)};
function sd(a,b){var c=b.target;D.N("Sending license request for session",c.sessionId,"of type",b.messageType);var d=a.h.get(c),e=a.g.licenseServerUri,f=a.j.advanced[a.g.keySystem];"individualization-request"==b.messageType&&f&&f.individualizationServer&&(e=f.individualizationServer);e=Cc([e],a.j.retryParameters);e.body=b.message;e.method="POST";e.licenseRequestType=b.messageType;e.sessionId=c.sessionId;"com.microsoft.playready"!=a.g.keySystem&&"com.chromecast.playready"!=a.g.keySystem||Gd(e);a.g.keySystem.startsWith("com.apple.fps")&&
a.j.fairPlayTransform&&Hd(e);var h=Date.now();a.K.cc.request(2,e).promise.then(function(a){if(this.i)return Promise.reject();this.g.keySystem.startsWith("com.apple.fps")&&this.j.fairPlayTransform&&Id(a);this.P+=(Date.now()-h)/1E3;D.N("Updating session",c.sessionId);return c.update(a.data).then(function(){var a=this;this.K.onEvent(new B("drmsessionupdate"));d&&(d.Za&&d.Za.resolve(),(new K(function(){d.loaded=!0;Ed(a)&&a.C.resolve()})).U(Jd))}.bind(this))}.bind(a),function(a){this.i||(a=new F(2,6,6007,
a),this.l(a),d&&d.Za&&d.Za.reject(a))}.bind(a))["catch"](function(a){this.i||(a=new F(2,6,6008,a.message),this.l(a),d&&d.Za&&d.Za.reject(a))}.bind(a))}
function Gd(a){var b=Yb(a.body,!0,!0);if(b.includes("PlayReadyKeyMessage")){D.debug("Unwrapping PlayReady request.");b=(new DOMParser).parseFromString(b,"application/xml");for(var c=b.getElementsByTagName("HttpHeader"),d=0;d<c.length;++d)a.headers[c[d].getElementsByTagName("name")[0].textContent]=c[d].getElementsByTagName("value")[0].textContent;a.body=I.cb(b.getElementsByTagName("Challenge")[0].textContent).buffer}else D.debug("PlayReady request is already unwrapped."),a.headers["Content-Type"]=
"text/xml; charset=utf-8"}function Hd(a){var b=new Uint8Array(a.body);b="spc="+I.md(b);a.headers["Content-Type"]="application/x-www-form-urlencoded";a.body=$b(b)}function Id(a){try{var b=Wb(a.data)}catch(c){return}b=b.trim();"<ckc>"===b.substr(0,5)&&"</ckc>"===b.substr(-6)&&(b=b.slice(5,-6));try{b=JSON.parse(b).ckc}catch(c){}a.data=I.cb(b).buffer}
m.hf=function(a){a=a.target;D.T("Key status changed for session",a.sessionId);var b=this.h.get(a),c=!1;a.keyStatuses.forEach(function(a,d){if("string"==typeof d){var e=d;d=a;a=e}if("com.microsoft.playready"==this.g.keySystem&&16==d.byteLength&&($c("Trident/")||navigator.userAgent.match(/Edge?\//))){e=new DataView(d);var f=e.getUint32(0,!0),l=e.getUint16(4,!0),n=e.getUint16(6,!0);e.setUint32(0,f,!1);e.setUint16(4,l,!1);e.setUint16(6,n,!1)}"com.microsoft.playready"==this.g.keySystem&&"status-pending"==
a&&(a="usable");"status-pending"!=a&&(b.loaded=!0);"expired"==a&&(c=!0);e=I.nd(new Uint8Array(d));this.sa.set(e,a)}.bind(this));var d=a.expiration-Date.now();(0>d||c&&1E3>d)&&b&&!b.Za&&(D.debug("Session has expired",a.sessionId),this.h["delete"](a),a.close()["catch"](function(){}));Ed(this)&&(this.C.resolve(),this.R.U(Kd))};
function fd(a){var b=a.sa,c=a.ba;c.clear();b.forEach(function(a,b){return c.set(b,a)});b=Array.from(c.values());b.length&&b.every(function(a){return"expired"==a})&&a.l(new F(2,6,6014));a.K.ad(Qc(c))}
function Ld(){function a(a){return u(function h(){var b,e,n;return y(h,function(h){switch(h.A){case 1:return ya(h,2),v(h,navigator.requestMediaKeySystemAccess(a,c),4);case 4:return b=h.G,n=(e=b.getConfiguration().sessionTypes)?e.includes("persistent-license"):!1,$c("Tizen 3")&&(n=!1),d.set(a,{persistentState:n}),v(h,b.createMediaKeys(),5);case 5:Aa(h,0);break;case 2:Da(h),d.set(a,null),w(h)}})})}var b=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{videoCapabilities:b,
persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:b}],d=new Map;b="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map(function(b){return a(b)});return Promise.all(b).then(function(){return Qc(d)})}
function Md(a,b){var c=b.audio,d=b.video;if(c&&c.encrypted&&(c=Cd(c),!Ad(a,c))||d&&d.encrypted&&(d=Cd(d),!Ad(a,d)))return!1;var e=zd(a.g);return 0==b.drmInfos.length||b.drmInfos.some(function(a){return a.keySystem==e})}
function Nd(a,b){if(!a.length)return b;if(!b.length)return a;for(var c=[],d=0;d<a.length;d++)for(var e=0;e<b.length;e++)if(a[d].keySystem==b[e].keySystem){var f=a[d];e=b[e];var h=[];h=h.concat(f.initData||[]);h=h.concat(e.initData||[]);var k=[];k=k.concat(f.keyIds);k=k.concat(e.keyIds);c.push({keySystem:f.keySystem,licenseServerUri:f.licenseServerUri||e.licenseServerUri,distinctiveIdentifierRequired:f.distinctiveIdentifierRequired||e.distinctiveIdentifierRequired,persistentStateRequired:f.persistentStateRequired||
e.persistentStateRequired,videoRobustness:f.videoRobustness||e.videoRobustness,audioRobustness:f.audioRobustness||e.audioRobustness,serverCertificate:f.serverCertificate||e.serverCertificate,initData:h,keyIds:k});break}return c}
function Od(a){return u(function c(){var d;return y(c,function(c){switch(c.A){case 1:return d=new Promise(function(a,c){(new K(c)).U(Pd)}),ya(c,2),v(c,Promise.race([Promise.all([a.close(),a.closed]),d]),4);case 4:Aa(c,0);break;case 2:Da(c),D.D("Timeout waiting for session close"),w(c)}})})}
function id(a){return u(function c(){var d;return y(c,function(c){switch(c.A){case 1:return d=Array.from(a.h.keys()),a.h.clear(),v(c,Promise.all(d.map(function(a){return u(function k(){return y(k,function(c){switch(c.A){case 1:return D.N("Closing session",a.sessionId),ya(c,2),v(c,Od(a),4);case 4:Aa(c,0);break;case 2:Da(c),w(c)}})})})),0)}})})}function gd(a){a.h.forEach(function(b,c){var d=b.Td,e=c.expiration;isNaN(e)&&(e=Infinity);e!=d&&(a.K.onExpirationUpdated(c.sessionId,e),b.Td=e)})}
function Ed(a){a=a.h.values();return cb(a,function(a){return a.loaded})}function pd(a,b){var c=[];b.forEach(function(a,b){c.push({keySystem:b,licenseServerUri:a,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})});for(var d=r(a),e=d.next();!e.done;e=d.next())e.value.drmInfos=c}
function Dd(a,b,c,d,e){a.forEach(function(a){b.includes(a.licenseServerUri)||b.push(a.licenseServerUri);a.serverCertificate&&(c.some(function(b){return I.ab(b,a.serverCertificate)})||c.push(a.serverCertificate));a.initData&&a.initData.forEach(function(a){d.some(function(b){return b.keyId&&b.keyId==a.keyId?!0:b.initDataType==a.initDataType&&I.ab(b.initData,a.initData)})||d.push(a)});if(a.keyIds)for(var f=0;f<a.keyIds.length;++f)e.includes(a.keyIds[f])||e.push(a.keyIds[f])})}
function qd(a,b,c){if(a.keySystem&&("org.w3.clearkey"!=a.keySystem||!a.licenseServerUri)){b.size&&(b=b.get(a.keySystem)||"",a.licenseServerUri=b);a.keyIds||(a.keyIds=[]);if(c=c.get(a.keySystem))a.distinctiveIdentifierRequired||(a.distinctiveIdentifierRequired=c.distinctiveIdentifierRequired),a.persistentStateRequired||(a.persistentStateRequired=c.persistentStateRequired),a.videoRobustness||(a.videoRobustness=c.videoRobustness),a.audioRobustness||(a.audioRobustness=c.audioRobustness),a.serverCertificate||
(a.serverCertificate=c.serverCertificate);window.cast&&window.cast.__platform__&&"com.microsoft.playready"==a.keySystem&&(a.keySystem="com.chromecast.playready")}}var Pd=1,Jd=5,Kd=.5;function Qd(){this.g=new muxjs.mp4.CaptionParser;this.l=[];this.j={}}Qd.prototype.init=function(a){var b=muxjs.mp4.probe;a=new Uint8Array(a);this.l=b.videoTrackIds(a);this.j=b.timescale(a);this.g.init()};Qd.prototype.h=function(a,b){var c=new Uint8Array(a);(c=this.g.parse(c,this.l,this.j))&&c.captions&&b(c.captions);this.g.clearParsedCaptions()};Qd.prototype.i=function(){this.g.resetCaptionStream()};function Rd(){}Rd.prototype.init=function(){};Rd.prototype.h=function(){};Rd.prototype.i=function(){};function Sd(a){return!a||1==a.length&&1E-6>a.end(0)-a.start(0)?null:a.length?a.end(a.length-1):null}function Td(a,b,c){c=void 0===c?0:c;return!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0)||b>a.end(a.length-1)?!1:b+c>=a.start(0)}function Ud(a,b){if(!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0))return 0;for(var c=0,d=a.length-1;0<=d&&a.end(d)>b;--d)c+=a.end(d)-Math.max(a.start(d),b);return c}
function Vd(a){if(!a)return[];for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b};function Wd(a,b,c){this.startTime=a;this.direction=Xd;this.endTime=b;this.payload=c;this.region=new Yd;this.position=null;this.positionAlign=Zd;this.size=0;this.textAlign=$d;this.writingMode=ae;this.lineInterpretation=be;this.line=null;this.lineHeight="";this.lineAlign=ce;this.displayAlign=de;this.fontSize=this.backgroundImage=this.backgroundColor=this.color="";this.fontWeight=ee;this.fontStyle=fe;this.fontFamily="";this.textDecoration=[];this.wrapLine=!0;this.id="";this.nestedCues=[];this.spacer=
!1}A("shaka.text.Cue",Wd);Wd.prototype.clone=function(){var a=new Wd(0,0,""),b;for(b in this)a[b]=this[b],a[b]&&a[b].constructor==Array&&(a[b]=a[b].slice());return a};
function ge(a,b){if(a.startTime!=b.startTime||a.endTime!=b.endTime||a.payload!=b.payload)return!1;for(var c in a)if("startTime"!=c&&"endTime"!=c&&"payload"!=c)if("nestedCues"==c){if(!xc(a.nestedCues,b.nestedCues,ge))return!1}else if("region"==c||"cellResolution"==c)for(var d in a[c]){if(a[c][d]!=b[c][d])return!1}else if(Array.isArray(a[c])){if(!xc(a[c],b[c]))return!1}else if(a[c]!=b[c])return!1;return!0}var Zd="auto";Wd.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Zd};
var $d="center",he={LEFT:"left",RIGHT:"right",CENTER:$d,START:"start",END:"end"};Wd.textAlign=he;var de="after",ie={BEFORE:"before",CENTER:"center",AFTER:de};Wd.displayAlign=ie;var Xd="ltr";Wd.direction={HORIZONTAL_LEFT_TO_RIGHT:Xd,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var ae="horizontal-tb";Wd.writingMode={HORIZONTAL_TOP_TO_BOTTOM:ae,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var be=0;Wd.lineInterpretation={LINE_NUMBER:be,PERCENTAGE:1};
var ce="start",je={CENTER:"center",START:ce,END:"end"};Wd.lineAlign=je;var ee=400;Wd.fontWeight={NORMAL:ee,BOLD:700};var fe="normal",ke={NORMAL:fe,ITALIC:"italic",OBLIQUE:"oblique"};Wd.fontStyle=ke;Wd.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Yd(){this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=me;this.scroll=ne}
A("shaka.text.CueRegion",Yd);var me=1;Yd.units={PX:0,PERCENTAGE:me,LINES:2};var ne="";Yd.scrollMode={NONE:ne,UP:"up"};function oe(a){this.l=null;this.i=a;this.j=this.C=0;this.s=Infinity;this.h=this.g=null;this.B="";this.u=new Map}var pe={};A("shaka.text.TextEngine.registerParser",function(a,b){pe[a]=b});A("shaka.text.TextEngine.unregisterParser",function(a){delete pe[a]});function qe(a){return pe[a]||window.muxjs&&"application/cea-608"==a?!0:!1}oe.prototype.destroy=function(){this.i=this.l=null;this.u.clear();return Promise.resolve()};function re(a,b){"application/cea-608"!=b&&(a.l=new pe[b])}
oe.prototype.Vc=function(a){var b={periodStart:0,segmentStart:null,segmentEnd:0};try{return this.l.parseMedia(new Uint8Array(a),b)[0].startTime}catch(c){throw new F(2,2,2009,c);}};
function se(a,b,c,d){return Promise.resolve().then(function(){if(this.l&&this.i)if(null==c||null==d)this.l.parseInit(new Uint8Array(b));else{var a={periodStart:this.C,segmentStart:c,segmentEnd:d};a=this.l.parseMedia(new Uint8Array(b),a).filter(function(a){return a.startTime>=this.j&&a.startTime<this.s}.bind(this));this.i.append(a);null==this.g&&(this.g=Math.max(c,this.j));this.h=Math.min(d,this.s)}}.bind(a))}
oe.prototype.remove=function(a,b){return Promise.resolve().then(function(){!this.i||!this.i.remove(a,b)||null==this.g||b<=this.g||a>=this.h||(a<=this.g&&b>=this.h?this.g=this.h=null:a<=this.g&&b<this.h?this.g=b:a>this.g&&b>=this.h&&(this.h=a))}.bind(this))};function te(a,b,c){a.B=b;if(b=a.u.get(b))for(var d=r(b.keys()),e=d.next();!e.done;e=d.next())(e=b.get(e.value).filter(function(a){return a.endTime<=c}))&&a.i.append(e)}
function ue(a,b,c,d,e){var f=c+" "+d,h=new Map;b=r(b);for(var k=b.next();!k.done;k=b.next()){var l=k.value;k=l.stream;h.has(k)||h.set(k,new Map);h.get(k).has(f)||h.get(k).set(f,[]);l.startTime+=e;l.endTime+=e;l.startTime>=a.j&&l.startTime<a.s&&(l=new Wd(l.startTime,l.endTime,l.text),h.get(k).get(f).push(l),k==a.B&&a.i.append([l]))}e=r(h.keys());for(f=e.next();!f.done;f=e.next())for(f=f.value,a.u.has(f)||a.u.set(f,new Map),b=r(h.get(f).keys()),k=b.next();!k.done;k=b.next())k=k.value,l=h.get(f).get(k),
a.u.get(f).set(k,l);a.g=null==a.g?Math.max(c,a.j):Math.min(a.g,Math.max(c,a.j));a.h=Math.max(a.h,Math.min(d,a.s))};function ve(a,b,c){this.j=a;this.l=c;this.h={};this.g=null;this.i={};this.u=new M;this.H=!1;this.B={};this.C=b;this.F=new G;this.s=we(this,this.F);this.K=""}var xe=window.URL.createObjectURL;function we(a,b){var c=new MediaSource;a.u.Ma(c,"sourceopen",function(){URL.revokeObjectURL(a.K);b.resolve()});a.K=xe(c);a.j.src=a.K;return c}function ye(a){var b=Rc(a.mimeType,a.codecs),c=Sc(a);return qe(b)||MediaSource.isTypeSupported(c)||dc(b,a.type)}m=ve.prototype;
m.destroy=function(){var a=this;this.H=!0;var b=[],c;for(c in this.i){var d=this.i[c],e=d[0];this.i[c]=d.slice(0,1);e&&b.push(e.p["catch"](Rb.Zc));for(e=1;e<d.length;++e)d[e].p.reject()}this.g&&b.push(this.g.destroy());this.l&&b.push(this.l.destroy());for(var f in this.B)b.push(this.B[f].destroy());return Promise.all(b).then(function(){a.u&&(a.u.release(),a.u=null);a.j&&(a.j.removeAttribute("src"),a.j.load(),a.j=null);a.s=null;a.g=null;a.l=null;a.h={};a.B={};a.C=null;a.i={}})};
m.init=function(a,b){var c=this;return u(function e(){var f;return y(e,function(e){switch(e.A){case 1:return f=Ub,v(e,c.F,2);case 2:a.forEach(function(a,e){var h=Rc(a.mimeType,a.codecs);e==f.Pa?ze(c,h):(!b&&MediaSource.isTypeSupported(h)||!dc(h,e)||(c.B[e]=new cc,h=ec(e,h)),h=c.s.addSourceBuffer(h),c.u.v(h,"error",c.Fh.bind(c,e)),c.u.v(h,"updateend",c.fc.bind(c,e)),c.h[e]=h,c.i[e]=[])}),w(e)}})})};function ze(a,b){a.g||(a.g=new oe(a.l));re(a.g,b)}
function Ae(a){return a.s?"ended"==a.s.readyState:!0}function Be(a,b){if("text"==b)var c=a.g.g;else c=Ce(a,b),c=!c||1==c.length&&1E-6>c.end(0)-c.start(0)?null:1==c.length&&0>c.start(0)?0:c.length?c.start(0):null;return c}function De(a,b){return"text"==b?a.g.h:Sd(Ce(a,b))}function Ee(a,b,c){if("text"==b)return a=a.g,null==a.h||a.h<c?0:a.h-Math.max(c,a.g);a=Ce(a,b);return Ud(a,c)}
m.zd=function(a){a.total=Vd(this.j.buffered);a.audio=Vd(Ce(this,"audio"));a.video=Vd(Ce(this,"video"));a.text=[];if(this.g){var b=this.g.g,c=this.g.h;null!=b&&null!=c&&a.text.push({start:b,end:c})}};function Ce(a,b){try{return a.h[b].buffered}catch(c){return b in a.h&&D.error("failed to get buffered range for "+b,c),null}}
function Fe(a,b,c,d,e,f){if("text"==b)return se(a.g,c,d,e);if(a.B[b])return fc(a.B[b],c).then(function(a){this.g||ze(this,"text/vtt");a.captions&&a.captions.length&&ue(this.g,a.captions,d,e,this.h.video.timestampOffset);return Ge(this,b,this.zf.bind(this,b,a.data.buffer))}.bind(a));f&&window.muxjs&&(a.g||ze(a,"text/vtt"),null==d&&null==e?a.C.init(c):a.C.h(c,function(b){b.length&&ue(a.g,b,d,e,a.h.video.timestampOffset)}));return Ge(a,b,a.zf.bind(a,b,c))}
function He(a,b){var c=De(a,"video")||0;te(a.g,b,c)}m.remove=function(a,b,c){return"text"==a?this.g.remove(b,c):Ge(this,a,this.Af.bind(this,a,b,c))};function Ie(a,b){if("text"==b){if(!a.g)return Promise.resolve();a.C.i();return a.g.remove(0,Infinity)}return Ge(a,b,a.Af.bind(a,b,0,a.s.duration))}m.flush=function(a){return"text"==a?Promise.resolve():Ge(this,a,this.ag.bind(this,a))};
function Je(a,b,c,d,e){return"text"==b?(a.g.C=c,a=a.g,a.j=d,a.s=e,Promise.resolve()):Promise.all([Ge(a,b,a.Nf.bind(a,b)),Ge(a,b,a.Eh.bind(a,b,c)),Ge(a,b,a.Bh.bind(a,b,d,e))])}m.endOfStream=function(a){return Ke(this,function(){Ae(this)||(a?this.s.endOfStream(a):this.s.endOfStream())}.bind(this))};m.Ya=function(a){return Ke(this,function(){this.s.duration=a}.bind(this))};m.wa=function(){return this.s.duration};m.zf=function(a,b){this.h[a].appendBuffer(b)};
m.Af=function(a,b,c){c<=b?this.fc(a):this.h[a].remove(b,c)};m.Nf=function(a){var b=this.h[a].appendWindowStart,c=this.h[a].appendWindowEnd;this.h[a].abort();this.h[a].appendWindowStart=b;this.h[a].appendWindowEnd=c;this.fc(a)};m.ag=function(a){this.j.currentTime-=.001;this.fc(a)};m.Eh=function(a,b){0>b&&(b+=.001);this.h[a].timestampOffset=b;this.fc(a)};m.Bh=function(a,b,c){this.h[a].appendWindowStart=0;this.h[a].appendWindowEnd=c;this.h[a].appendWindowStart=b;this.fc(a)};
m.Fh=function(a){this.i[a][0].p.reject(new F(2,3,3014,this.j.error?this.j.error.code:0))};m.fc=function(a){var b=this.i[a][0];b&&(b.p.resolve(),Le(this,a))};function Ge(a,b,c){if(a.H)return Promise.reject();c={start:c,p:new G};a.i[b].push(c);if(1==a.i[b].length)try{c.start()}catch(d){"QuotaExceededError"==d.name?c.p.reject(new F(2,3,3017,b)):c.p.reject(new F(2,3,3015,d)),Le(a,b)}return c.p}
function Ke(a,b){if(a.H)return Promise.reject();var c=[],d;for(d in a.h){var e=new G,f={start:function(a){a.resolve()}.bind(null,e),p:e};a.i[d].push(f);c.push(e);1==a.i[d].length&&f.start()}return Promise.all(c).then(function(){try{b()}catch(l){var a=Promise.reject(new F(2,3,3015,l))}for(var c in this.h)Le(this,c);return a}.bind(a),function(a){throw a;}.bind(a))}function Le(a,b){a.i[b].shift();var c=a.i[b][0];if(c)try{c.start()}catch(d){c.p.reject(new F(2,3,3015,d)),Le(a,b)}};var N={Je:function(a,b){var c=a.periods.reduce(function(a,b){return a.concat(b.variants)},[]);c=N.Oe(c,b);c=N.Gg(c);c=N.Zf(c);var d=N.$f(c);c=r(a.periods);for(var e=c.next();!e.done;e=c.next())e=e.value,e.variants=e.variants.filter(function(a){if(N.Se(a)==d)return!0;D.debug("Dropping Variant (better codec available)",a);return!1})},Gg:function(a){var b=new $a;a=r(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;var d=N.Se(c);b.push(d,c)}return b},Zf:function(a){var b=0,c=new Map,d=a.size();a.forEach(function(a,
f){for(var e=r(f),k=e.next();!k.done;k=e.next()){k=k.value;var l=k.video;if(l&&l.width&&l.height){l=l.width*l.height*(l.frameRate||1);c.has(l)||c.set(l,new $a);var n=c.get(l);n.push(a,k);n.size()===d&&(b=Math.max(b,l))}}});return b?c.get(b):a},$f:function(a){var b="",c=Infinity;a.forEach(function(a,e){for(var d=0,h=0,k=r(e),l=k.next();!l.done;l=k.next())d+=l.value.bandwidth||0,++h;d/=h;D.debug("codecs",a,"avg bandwidth",d);d<c&&(b=a,c=d)});return b},Se:function(a){var b="";a.video&&(b=Vc(a.video.codecs)[0]);
var c="";a.audio&&(c=Vc(a.audio.codecs)[0]);return b+"-"+c},Ld:function(a,b,c){function d(a,b,c){return a>=b&&a<=c}var e=a.video;return e&&e.width&&e.height&&(!d(e.width,b.minWidth,Math.min(b.maxWidth,c.width))||!d(e.height,b.minHeight,Math.min(b.maxHeight,c.height))||!d(e.width*e.height,b.minPixels,b.maxPixels))||a&&a.video&&a.video.frameRate&&!d(a.video.frameRate,b.minFrameRate,b.maxFrameRate)||!d(a.bandwidth,b.minBandwidth,b.maxBandwidth)?!1:!0},Ce:function(a,b,c){var d=!1;a.forEach(function(a){var e=
a.allowedByApplication;a.allowedByApplication=N.Ld(a,b,c);e!=a.allowedByApplication&&(d=!0)});return d},filterNewPeriod:function(a,b,c,d){d.variants=d.variants.filter(function(d){if(a&&a.V&&!Md(a,d))return D.debug("Dropping variant - not compatible with key system",d),!1;var e=d.audio;d=d.video;return e&&!ye(e)?(D.debug("Dropping variant - audio not compatible with platform",N.Db(e)),!1):d&&!ye(d)||$c("Xbox One")&&d&&(d.width&&1920<d.width||d.height&&1080<d.height)&&d.codecs.includes("avc1.")?(D.debug("Dropping variant - video not compatible with platform",
N.Db(d)),!1):e&&b&&!N.De(e,b)?(D.debug("Droping variant - not compatible with active audio","active audio",N.Db(b),"variant.audio",N.Db(e)),!1):d&&c&&!N.De(d,c)?(D.debug("Droping variant - not compatible with active video","active video",N.Db(c),"variant.video",N.Db(d)),!1):!0});d.textStreams=d.textStreams.filter(function(a){var b=qe(Rc(a.mimeType,a.codecs));b||D.debug("Dropping text stream. Is not supported by the platform.",a);return b})},De:function(a,b){return a.mimeType!=b.mimeType||a.codecs.split(".")[0]!=
b.codecs.split(".")[0]?!1:!0},od:function(a){var b=a.audio,c=a.video,d=b?b.codecs:null,e=c?c.codecs:null,f=[];e&&f.push(e);d&&f.push(d);var h=[];c&&h.push(c.mimeType);b&&h.push(b.mimeType);h=h[0]||null;var k=[];b&&k.push(b.kind);c&&k.push(c.kind);k=k[0]||null;var l=new Set;b&&b.roles.forEach(function(a){return l.add(a)});c&&c.roles.forEach(function(a){return l.add(a)});a={id:a.id,active:!1,type:"variant",bandwidth:a.bandwidth,language:a.language,label:null,kind:k,width:null,height:null,frameRate:null,
pixelAspectRatio:null,mimeType:h,codecs:f.join(", "),audioCodec:d,videoCodec:e,primary:a.primary,roles:Array.from(l),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null};c&&(a.videoId=c.id,a.originalVideoId=c.originalId,a.width=c.width||null,a.height=c.height||null,a.frameRate=c.frameRate||null,a.pixelAspectRatio=c.pixelAspectRatio||null,a.videoBandwidth=c.bandwidth||
null);b&&(a.audioId=b.id,a.originalAudioId=b.originalId,a.channelsCount=b.channelsCount,a.audioSamplingRate=b.audioSamplingRate,a.audioBandwidth=b.bandwidth||null,a.label=b.label,a.audioRoles=b.roles);return a},ld:function(a){return{id:a.id,active:!1,type:"text",bandwidth:0,language:a.language,label:a.label,kind:a.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:a.mimeType,codecs:a.codecs||null,audioCodec:null,videoCodec:null,primary:a.primary,roles:a.roles,audioRoles:null,
videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:a.originalId}},Dd:function(a){a.__shaka_id||(a.__shaka_id=N.Sg++);return a.__shaka_id},Sg:0,Jg:function(a){var b=N.Ve(a);b.active="disabled"!=a.mode;b.type="text";b.originalTextId=a.id;"captions"==a.kind&&(b.mimeType="application/cea-608");a.kind&&(b.roles=[a.kind]);return b},Ue:function(a){var b=N.Ve(a);b.active=a.enabled;b.type="variant";
b.originalAudioId=a.id;"main"==a.kind&&(b.primary=!0);a.kind&&(b.roles=[a.kind],b.audioRoles=[a.kind]);return b},Ve:function(a){return{id:N.Dd(a),active:!1,type:"",bandwidth:0,language:E(a.language),label:a.label,kind:a.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,
originalAudioId:null,originalTextId:null}},ac:function(a){return a.allowedByApplication&&a.allowedByKeySystem},yg:function(a){return a.filter(function(a){return N.ac(a)})},Oe:function(a,b){var c=a.filter(function(a){return a.audio&&a.audio.channelsCount}),d=new Map;c=r(c);for(var e=c.next();!e.done;e=c.next()){e=e.value;var f=e.audio.channelsCount;d.has(f)||d.set(f,[]);d.get(f).push(e)}c=Array.from(d.keys());if(0==c.length)return a;e=c.filter(function(a){return a<=b});return e.length?d.get(Math.max.apply(null,
e)):d.get(Math.min.apply(null,c))},rc:function(a,b,c){var d=a,e=a.filter(function(a){return a.primary});e.length&&(d=e);var f=d.length?d[0].language:"";d=d.filter(function(a){return a.language==f});if(b){var h=nb(E(b),a.map(function(a){return a.language}));h&&(d=a.filter(function(a){return E(a.language)==h}))}if(c){a=N.Ne(d,c);if(a.length)return a;D.D("No exact match for the text role could be found.")}else if(a=d.filter(function(a){return 0==a.roles.length}),a.length)return a;a=d.map(function(a){return a.roles}).reduce(Rb.rd,
[]);return a.length?N.Ne(d,a[0]):d},Ne:function(a,b){return a.filter(function(a){return a.roles.includes(b)})},Te:function(a,b,c){for(var d=0;d<c.length;d++)if(c[d].audio==a&&c[d].video==b)return c[d];return null},Kg:function(a){return"audio"==a.type},Og:function(a){return"video"==a.type},Fg:function(a){var b=[];a.audio&&b.push(a.audio);a.video&&b.push(a.video);return b},Db:function(a){return N.Kg(a)?"type=audio codecs="+a.codecs+" bandwidth="+a.bandwidth+" channelsCount="+a.channelsCount+" audioSamplingRate="+
a.audioSamplingRate:N.Og(a)?"type=video codecs="+a.codecs+" bandwidth="+a.bandwidth+" frameRate="+a.frameRate+" width="+a.width+" height="+a.height:"unexpected stream type"}};function Me(){this.s=null;this.j=!1;this.h=new vb;this.l=[];this.u=!1;this.g=this.i=null}A("shaka.abr.SimpleAbrManager",Me);Me.prototype.stop=function(){this.s=null;this.j=!1;this.l=[];this.i=null};Me.prototype.stop=Me.prototype.stop;Me.prototype.init=function(a){this.s=a};Me.prototype.init=Me.prototype.init;
Me.prototype.chooseVariant=function(){var a=Ne(this.g.restrictions,this.l),b=this.h.getBandwidthEstimate(this.g.defaultBandwidthEstimate);this.l.length&&!a.length&&(D.D("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),a=Ne(null,this.l),a=[a[0]]);for(var c=a[0]||null,d=0;d<a.length;++d){var e=a[d],f=e.bandwidth/this.g.bandwidthDowngradeTarget,h=(a[d+1]||{bandwidth:Infinity}).bandwidth/this.g.bandwidthUpgradeTarget;D.T("Bandwidth ranges:",(e.bandwidth/1E6).toFixed(3),
(f/1E6).toFixed(3),(h/1E6).toFixed(3));b>=f&&b<=h&&(c=e)}this.i=Date.now();return c};Me.prototype.chooseVariant=Me.prototype.chooseVariant;Me.prototype.enable=function(){this.j=!0};Me.prototype.enable=Me.prototype.enable;Me.prototype.disable=function(){this.j=!1};Me.prototype.disable=Me.prototype.disable;
Me.prototype.segmentDownloaded=function(a,b){D.T("Segment downloaded:","deltaTimeMs="+a,"numBytes="+b,"lastTimeChosenMs="+this.i,"enabled="+this.j);var c=this.h;if(!(16E3>b)){var d=8E3*b/a,e=a/1E3;c.g+=b;tb(c.h,e,d);tb(c.i,e,d)}if(null!=this.i&&this.j)a:{D.T("Suggesting Streams...");if(!this.u){if(!(128E3<=this.h.g)){D.T("Still waiting for a good estimate...");break a}this.u=!0}else if(Date.now()-this.i<1E3*this.g.switchInterval){D.T("Still within switch interval...");break a}c=this.chooseVariant();
d=this.h.getBandwidthEstimate(this.g.defaultBandwidthEstimate);D.debug("Calling switch_(), bandwidth="+Math.round(d/1E3)+" kbps");this.s(c)}};Me.prototype.segmentDownloaded=Me.prototype.segmentDownloaded;Me.prototype.getBandwidthEstimate=function(){return this.h.getBandwidthEstimate(this.g.defaultBandwidthEstimate)};Me.prototype.getBandwidthEstimate=Me.prototype.getBandwidthEstimate;Me.prototype.setVariants=function(a){this.l=a};Me.prototype.setVariants=Me.prototype.setVariants;
Me.prototype.configure=function(a){this.g=a};Me.prototype.configure=Me.prototype.configure;function Ne(a,b){a&&(b=b.filter(function(b){return N.Ld(b,a,{width:Infinity,height:Infinity})}));return b.sort(function(a,b){return a.bandwidth-b.bandwidth})};function Oe(a,b){this.g=a;this.h=b}Oe.prototype.toString=function(){return"v"+this.g+"."+this.h};function Pe(a,b){var c=new Oe(2,6),d=Qe,e=d.g,f=c.h-e.h;(0<(c.g-e.g||f)?d.i:d.h)(d.g,c,a,b)}function Re(a,b,c,d){D.ha([c,"has been deprecated and will be removed in",b,". We are currently at version",a,". Additional information:",d].join(" "))}function Se(a,b,c,d){D.Ic([c,"has been deprecated and has been removed in",b,". We are now at version",a,". Additional information:",d].join(""))}var Qe=null;var Te="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Ue="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Ve=["loop","playbackRate"],We=["pause","play"],Xe="abrstatuschanged adaptation buffering drmsessionupdate emsg error expirationupdated largegap loading manifestparsed onstatechange onstateidle streaming textchanged texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged".split(" "),
Ye={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},Ze={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},$e=[["getConfiguration","configure"]],af=[["isTextTrackVisible","setTextTrackVisibility"]],
bf="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),cf=["attach","detach","load","unload"];
function df(a){return JSON.stringify(a,function(a,c){if("function"!=typeof c){if(c instanceof Event||c instanceof B){var b={};for(f in c){var e=c[f];e&&"object"==typeof e?"detail"==f&&(b[f]=e):f in Event||(b[f]=e)}return b}if(c instanceof Error){var f=new Set(["name","message","stack"]);for(b in c)f.add(b);e=r(Object.getOwnPropertyNames(c));for(b=e.next();!b.done;b=e.next())f.add(b.value);e={};f=r(f);for(b=f.next();!b.done;b=f.next())b=b.value,e[b]=c[b];f={__type__:"Error",contents:e}}else if(c instanceof
TimeRanges)for(f={__type__:"TimeRanges",length:c.length,start:[],end:[]},b=0;b<c.length;++b)f.start.push(c.start(b)),f.end.push(c.end(b));else f=c instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(c)}:"number"==typeof c?isNaN(c)?"NaN":isFinite(c)?c:0>c?"-Infinity":"Infinity":c;return f}})}
function ef(a){return JSON.parse(a,function(a,c){if("NaN"==c)var b=NaN;else if("-Infinity"==c)b=-Infinity;else if("Infinity"==c)b=Infinity;else if(c&&"object"==typeof c&&"TimeRanges"==c.__type__)b=ff(c);else if(c&&"object"==typeof c&&"Uint8Array"==c.__type__)b=new Uint8Array(c.entries);else if(c&&"object"==typeof c&&"Error"==c.__type__){b=c.contents;var e=Error(b.message),f;for(f in b)e[f]=b[f];b=e}else b=c;return b})}
function ff(a){return{length:a.length,start:function(b){return a.start[b]},end:function(b){return a.end[b]}}};function gf(a,b,c,d,e,f){this.R=a;this.j=new K(b);this.V=c;this.B=!1;this.H=d;this.P=e;this.M=f;this.h=this.s=!1;this.O="";this.u=null;this.C=this.Ud.bind(this);this.F=this.Zg.bind(this);this.g={video:{},player:{}};this.K=0;this.i={};this.l=null;hf.add(this)}var jf=!1,kf=null;m=gf.prototype;m.destroy=function(){hf["delete"](this);lf(this);kf&&mf(this);this.j&&(this.j.stop(),this.j=null);this.P=this.H=null;this.h=this.s=!1;this.F=this.C=this.l=this.i=this.g=this.u=null;return Promise.resolve()};
m.na=function(){return this.h};m.gd=function(){return this.O};
m.init=function(){if(this.R.length)if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){this.s=!0;this.j.kb();var a=new chrome.cast.SessionRequest(this.R);a=new chrome.cast.ApiConfig(a,nf.bind(this),of.bind(this),"origin_scoped");chrome.cast.initialize(a,function(){D.debug("CastSender: init")},function(a){D.error("CastSender: init error",a)});jf&&this.j.U(.02);(a=kf)&&a.status!=chrome.cast.SessionStatus.STOPPED?(D.debug("CastSender: re-using existing connection"),pf(this,a)):kf=null}else window.__onGCastApiAvailable||
(window.__onGCastApiAvailable=qf),window.__onGCastApiAvailable!=qf&&D.ha("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")};m.ke=function(a){this.u=a;this.h&&rf(this,{type:"appData",appData:this.u})};
m.cast=function(a){if(!this.s)return Promise.reject(new F(1,8,8E3));if(!jf)return Promise.reject(new F(1,8,8001));if(this.h)return Promise.reject(new F(1,8,8002));this.l=new G;chrome.cast.requestSession(this.Wd.bind(this,a),this.gf.bind(this));return this.l};m.Vb=function(){if(this.h){lf(this);if(kf){mf(this);try{kf.stop(function(){},function(){})}catch(a){}kf=null}this.Ud()}};
m.get=function(a,b){if("video"==a){if(We.includes(b))return this.rf.bind(this,a,b)}else if("player"==a){if(Ze[b]&&!this.get("player","isLive")())return function(){};if(bf.includes(b))return this.rf.bind(this,a,b);if(cf.includes(b))return this.qh.bind(this,a,b);if(Ye[b])return this.nf.bind(this,a,b)}return this.nf(a,b)};m.set=function(a,b,c){this.g[a][b]=c;rf(this,{type:"set",targetName:a,property:b,value:c})};
m.Wd=function(a,b){D.debug("CastSender: onSessionInitiated");kf=b;b.addUpdateListener(this.C);b.addMessageListener("urn:x-cast:com.google.shaka.v2",this.F);this.Ud();rf(this,{type:"init",initState:a,appData:this.u});this.l.resolve()};m.gf=function(a){var b=8003;switch(a.code){case "cancel":b=8004;break;case "timeout":b=8005;break;case "receiver_unavailable":b=8006}this.l.reject(new F(2,8,b,a))};m.nf=function(a,b){return this.g[a][b]};
m.rf=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];rf(this,{type:"call",targetName:a,methodName:b,args:d})};m.qh=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];e=new G;var f=this.K.toString();this.K++;this.i[f]=e;try{rf(this,{type:"asyncCall",targetName:a,methodName:b,args:d,id:f})}catch(h){e.reject(h)}return e};function nf(a){for(var b=r(hf),c=b.next();!c.done;c=b.next())pf(c.value,a)}
function pf(a,b){D.debug("CastSender: onExistingSessionJoined");var c=a.M();a.l=new G;a.B=!0;a.Wd(c,b)}function of(a){for(var b=r(hf),c=b.next();!c.done;c=b.next()){c=c.value;var d=a;D.debug("CastSender: receiver status",d);jf="available"==d;c.j.kb()}}function mf(a){var b=kf;b.removeUpdateListener(a.C);b.removeMessageListener("urn:x-cast:com.google.shaka.v2",a.F)}
m.Ud=function(){var a=kf?"connected"==kf.status:!1;D.debug("CastSender: connection status",a);if(this.h&&!a){this.P();for(var b in this.g)this.g[b]={};lf(this)}this.O=(this.h=a)?kf.receiver.friendlyName:"";this.j.kb()};function lf(a){for(var b in a.i){var c=a.i[b];delete a.i[b];c.reject(new F(1,7,7E3))}}
m.Zg=function(a,b){var c=ef(b);D.T("CastSender: message",c);switch(c.type){case "event":var d=c.event;this.H(c.targetName,new B(d.type,d));break;case "update":d=c.update;for(var e in d){c=this.g[e]||{};for(var f in d[e])c[f]=d[e][f]}this.B&&(this.V(),this.B=!1);break;case "asyncComplete":if(e=c.id,c=c.error,f=this.i[e],delete this.i[e],f)if(c){e=new F(c.severity,c.category,c.code);for(d in c)e[d]=c[d];f.reject(e)}else f.resolve()}};
function rf(a,b){var c=df(b),d=kf;try{d.sendMessage("urn:x-cast:com.google.shaka.v2",c,function(){},D.error)}catch(e){throw D.error("Cast session sendMessage threw",e),c=new F(2,8,8005,e),a.H("player",new B("error",{detail:c})),a.Vb(),c;}}var hf=new Set;function qf(a){if(a){a=r(hf);for(var b=a.next();!b.done;b=a.next())b.value.init()}};function O(a,b,c){var d=this;ab.call(this);this.i=a;this.h=b;this.u=this.l=this.j=this.B=this.s=null;this.F=c;this.C=new Map;this.g=new gf(c,function(){return sf(d)},function(){return tf(d)},function(a,b){return uf(d,a,b)},function(){return vf(d)},function(){return wf(d)});xf(this)}Za(O,ab);A("shaka.cast.CastProxy",O);
O.prototype.destroy=function(a){a&&this.g.Vb();this.u&&(this.u.release(),this.u=null);a=[];this.h&&(a.push(this.h.destroy()),this.h=null);this.g&&(a.push(this.g.destroy()),this.g=null);this.B=this.s=this.i=null;return Promise.all(a)};O.prototype.destroy=O.prototype.destroy;O.prototype.wc=function(){return this.s};O.prototype.getVideo=O.prototype.wc;O.prototype.eb=function(){return this.B};O.prototype.getPlayer=O.prototype.eb;O.prototype.Ee=function(){return this.g.s&&jf};O.prototype.canCast=O.prototype.Ee;
O.prototype.na=function(){return this.g.na()};O.prototype.isCasting=O.prototype.na;O.prototype.gd=function(){return this.g.gd()};O.prototype.receiverName=O.prototype.gd;O.prototype.cast=function(){var a=wf(this);return this.g.cast(a).then(function(){if(this.h)return this.h.ze()}.bind(this))};O.prototype.cast=O.prototype.cast;O.prototype.ke=function(a){this.g.ke(a)};O.prototype.setAppData=O.prototype.ke;
O.prototype.Bf=function(){var a=this.g;if(a.h){var b=a.M();chrome.cast.requestSession(a.Wd.bind(a,b),a.gf.bind(a))}};O.prototype.suggestDisconnect=O.prototype.Bf;
O.prototype.Ie=function(a){var b=this;return u(function d(){return y(d,function(d){switch(d.A){case 1:if(a==b.F)return d["return"]();b.F=a;b.g.Vb();return v(d,b.g.destroy(),2);case 2:b.g=null,b.g=new gf(a,function(){return sf(b)},function(){return tf(b)},function(a,d){return uf(b,a,d)},function(){return vf(b)},function(){return wf(b)}),b.g.init(),w(d)}})})};O.prototype.changeReceiverId=O.prototype.Ie;O.prototype.Vb=function(){this.g.Vb()};O.prototype.forceDisconnect=O.prototype.Vb;
function xf(a){a.g.init();a.u=new M;Te.forEach(function(a){this.u.v(this.i,a,this.M.bind(this))}.bind(a));Xe.forEach(function(a){this.u.v(this.h,a,this.H.bind(this))}.bind(a));a.s={};for(var b in a.i)Object.defineProperty(a.s,b,{configurable:!1,enumerable:!0,get:a.K.bind(a,b),set:a.O.bind(a,b)});a.B={};yf(a,function(b){Object.defineProperty(a.B,b,{configurable:!1,enumerable:!0,get:function(){return zf(a,b)}})});Af(a);a.j=new ab;a.j.Hc=a.s;a.l=new ab;a.l.Hc=a.B}
function Af(a){var b=new Map;yf(a,function(c,d){if(b.has(d)){var e=b.get(d);c.length<e.length?a.C.set(c,e):a.C.set(e,c)}else b.set(d,c)})}
function yf(a,b){function c(a){return"constructor"==a||"function"!=typeof d[a]?!1:!e.has(a)}var d=a.h,e=new Set;for(f in d)c(f)&&(e.add(f),b(f,d[f]));var f=Object.getPrototypeOf(d);for(var h=Object.getPrototypeOf({});f&&f!=h;){for(var k=r(Object.getOwnPropertyNames(f)),l=k.next();!l.done;l=k.next())l=l.value,c(l)&&(e.add(l),b(l,d[l]));f=Object.getPrototypeOf(f)}}
function wf(a){var b={video:{},player:{},playerAfterLoad:{},manifest:a.h.Rc(),startTime:null};a.i.pause();Ve.forEach(function(a){b.video[a]=this.i[a]}.bind(a));a.i.ended||(b.startTime=a.i.currentTime);$e.forEach(function(a){var c=a[1];a=this.h[a[0]]();b.player[c]=a}.bind(a));af.forEach(function(a){var c=a[1];a=this.h[a[0]]();b.playerAfterLoad[c]=a}.bind(a));return b}function sf(a){a.dispatchEvent(new B("caststatuschanged"))}function tf(a){a.j.dispatchEvent(new B(a.s.paused?"pause":"play"))}
function vf(a){$e.forEach(function(a){var b=a[1];a=this.g.get("player",a[0])();this.h[b](a)}.bind(a));var b=a.g.get("player","getAssetUri")(),c=a.g.get("video","ended"),d=Promise.resolve(),e=a.i.autoplay,f=null;c||(f=a.g.get("video","currentTime"));b&&(a.i.autoplay=!1,d=a.h.load(b,f));var h={};Ve.forEach(function(a){h[a]=this.g.get("video",a)}.bind(a));d.then(function(){a.i&&(Ve.forEach(function(a){this.i[a]=h[a]}.bind(a)),af.forEach(function(a){var b=a[1];a=this.g.get("player",a[0])();this.h[b](a)}.bind(a)),
a.i.autoplay=e,b&&a.i.play())},function(b){a.h.dispatchEvent(new B("error",{detail:b}))})}O.prototype.K=function(a){if("addEventListener"==a)return this.j.addEventListener.bind(this.j);if("removeEventListener"==a)return this.j.removeEventListener.bind(this.j);if(this.g.na()&&0==Object.keys(this.g.g.video).length){var b=this.i[a];if("function"!=typeof b)return b}return this.g.na()?this.g.get("video",a):(a=this.i[a],"function"==typeof a&&(a=a.bind(this.i)),a)};
O.prototype.O=function(a,b){this.g.na()?this.g.set("video",a,b):this.i[a]=b};O.prototype.M=function(a){this.g.na()||this.j.dispatchEvent(new B(a.type,a))};
function zf(a,b){a.C.has(b)&&(b=a.C.get(b));if("addEventListener"==b)return a.l.addEventListener.bind(a.l);if("removeEventListener"==b)return a.l.removeEventListener.bind(a.l);if("getMediaElement"==b)return function(){return this.s}.bind(a);if("getSharedConfiguration"==b)return D.D("Can't share configuration across a network. Returning copy."),a.g.get("player","getConfiguration");if("getNetworkingEngine"==b)return a.g.na()&&D.D("NOTE: getNetworkingEngine() is always local!"),a.h.tc.bind(a.h);if(a.g.na()){if("getManifest"==
b||"drmInfo"==b)return function(){D.ha(b+"() does not work while casting!");return null};if("getManifestUri"==b)return Pe("getManifestUri",'Please use "getAssetUri" instead.'),zf(a,"getAssetUri");if("attach"==b||"detach"==b)return function(){D.ha(b+"() does not work while casting!");return Promise.resolve()}}return a.g.na()&&0==Object.keys(a.g.g.video).length&&Ye[b]||!a.g.na()?a.h[b].bind(a.h):a.g.get("player",b)}O.prototype.H=function(a){this.g.na()||this.l.dispatchEvent(a)};
function uf(a,b,c){a.g.na()&&("video"==b?a.j.dispatchEvent(c):"player"==b&&a.l.dispatchEvent(c))};function Bf(a,b,c,d){var e=this;ab.call(this);this.g=a;this.h=b;this.i=new M;this.M={video:a,player:b};this.F=c||function(){};this.O=d||function(a){return a};this.H=!1;this.s=!0;this.l=0;this.C=!1;this.B=!0;this.u=this.j=null;this.K=new K(function(){Cf(e)});Df(this)}Za(Bf,ab);A("shaka.cast.CastReceiver",Bf);Bf.prototype.isConnected=function(){return this.H};Bf.prototype.isConnected=Bf.prototype.isConnected;Bf.prototype.Mg=function(){return this.s};Bf.prototype.isIdle=Bf.prototype.Mg;
Bf.prototype.destroy=function(){var a=this;return u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:return a.i&&(a.i.release(),a.i=null),d=[],a.h&&(d.push(a.h.destroy()),a.h=null),a.K&&(a.K.stop(),a.K=null),a.g=null,a.M=null,a.F=null,a.H=!1,a.s=!0,a.j=null,a.u=null,v(c,Promise.all(d),2);case 2:e=cast.receiver.CastReceiverManager.getInstance(),e.stop(),w(c)}})})};Bf.prototype.destroy=Bf.prototype.destroy;
function Df(a){var b=cast.receiver.CastReceiverManager.getInstance();b.onSenderConnected=a.jf.bind(a);b.onSenderDisconnected=a.jf.bind(a);b.onSystemVolumeChanged=a.Yf.bind(a);a.u=b.getCastMessageBus("urn:x-cast:com.google.cast.media");a.u.onMessage=a.Ug.bind(a);a.j=b.getCastMessageBus("urn:x-cast:com.google.shaka.v2");a.j.onMessage=a.eh.bind(a);b.start();Te.forEach(function(a){this.i.v(this.g,a,this.pf.bind(this,"video"))}.bind(a));Xe.forEach(function(a){this.i.v(this.h,a,this.pf.bind(this,"player"))}.bind(a));
cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?a.h.me(3840,2160):a.h.me(1920,1080);a.i.v(a.g,"loadeddata",function(){this.C=!0}.bind(a));a.i.v(a.h,"loading",function(){this.s=!1;Ef(this)}.bind(a));a.i.v(a.g,"playing",function(){this.s=!1;Ef(this)}.bind(a));a.i.v(a.g,"pause",function(){Ef(this)}.bind(a));a.i.v(a.h,"unloading",function(){this.s=!0;Ef(this)}.bind(a));a.i.v(a.g,"ended",function(){var a=this;(new K(function(){a.g&&a.g.ended&&
(a.s=!0,Ef(a))})).U(5)}.bind(a))}m=Bf.prototype;m.jf=function(){this.l=0;this.B=!0;this.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length;Ef(this)};function Ef(a){Promise.resolve().then(function(){this.h&&(this.dispatchEvent(new B("caststatuschanged")),Ff(this)||Gf(this))}.bind(a))}
function Hf(a,b,c){for(var d in b.player)a.h[d](b.player[d]);a.F(c);c=Promise.resolve();var e=a.g.autoplay;b.manifest&&(a.g.autoplay=!1,c=a.h.load(b.manifest,b.startTime));c.then(function(){if(a.h){for(var c in b.video)a.g[c]=b.video[c];for(var d in b.playerAfterLoad)a.h[d](b.playerAfterLoad[d]);a.g.autoplay=e;b.manifest&&(a.g.play(),Gf(a))}},function(b){a.h.dispatchEvent(new B("error",{detail:b}))})}m.pf=function(a,b){this.h&&(Cf(this),If(this,{type:"event",targetName:a,event:b},this.j))};
function Cf(a){a.K.U(.5);var b={video:{},player:{}};Ue.forEach(function(a){b.video[a]=this.g[a]}.bind(a));if(a.h.$())for(var c in Ze)0==a.l%Ze[c]&&(b.player[c]=a.h[c]());for(var d in Ye)0==a.l%Ye[d]&&(b.player[d]=a.h[d]());if(c=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())b.video.volume=c.level,b.video.muted=c.muted;a.C&&(a.l+=1);If(a,{type:"update",update:b},a.j);Ff(a)}function Ff(a){return a.B&&(a.g.duration||a.h.$())?(Jf(a),a.B=!1,!0):!1}
function Jf(a,b){b=void 0===b?0:b;var c={contentId:a.h.Rc(),streamType:a.h.$()?"LIVE":"BUFFERED",contentType:""};a.h.$()||(c.duration=a.g.duration);Gf(a,b,c)}m.Yf=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&If(this,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},this.j);If(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.j)};
m.eh=function(a){var b=ef(a.data);D.debug("CastReceiver: message",b);switch(b.type){case "init":this.l=0;this.C=!1;this.B=!0;Hf(this,b.initState,b.appData);Cf(this);break;case "appData":this.F(b.appData);break;case "set":var c=b.targetName,d=b.property;b=b.value;if("video"==c){var e=cast.receiver.CastReceiverManager.getInstance();if("volume"==d){e.setSystemVolumeLevel(b);break}else if("muted"==d){e.setSystemVolumeMuted(b);break}}this.M[c][d]=b;break;case "call":c=this.M[b.targetName];c[b.methodName].apply(c,
b.args);break;case "asyncCall":c=b.targetName;d=b.methodName;"player"==c&&"load"==d&&(this.l=0,this.C=!1);e=b.id;a=a.senderId;var f=this.M[c];b=f[d].apply(f,b.args);"player"==c&&"load"==d&&(b=b.then(function(){this.B=!0}.bind(this)));b.then(this.uf.bind(this,a,e,null),this.uf.bind(this,a,e))}};
m.Ug=function(a){var b=ef(a.data);D.debug("CastReceiver: message",b);switch(b.type){case "PLAY":this.g.play();Gf(this);break;case "PAUSE":this.g.pause();Gf(this);break;case "SEEK":a=b.currentTime;var c=b.resumeState;null!=a&&(this.g.currentTime=Number(a));c&&"PLAYBACK_START"==c?(this.g.play(),Gf(this)):c&&"PLAYBACK_PAUSE"==c&&(this.g.pause(),Gf(this));break;case "STOP":this.h.ze().then(function(){this.h&&Gf(this)}.bind(this));break;case "GET_STATUS":Jf(this,Number(b.requestId));break;case "VOLUME":c=
b.volume;a=c.level;c=c.muted;var d=this.g.volume,e=this.g.muted;null!=a&&(this.g.volume=Number(a));null!=c&&(this.g.muted=c);d==this.g.volume&&e==this.g.muted||Gf(this);break;case "LOAD":this.l=0;this.B=this.C=!1;a=b.media;c=b.currentTime;d=this.O(a.contentId);e=b.autoplay||!0;this.F(a.customData);e&&(this.g.autoplay=!0);this.h.load(d,c).then(function(){this.h&&Jf(this)}.bind(this))["catch"](function(a){var c="LOAD_FAILED";7==a.category&&7E3==a.code&&(c="LOAD_CANCELLED");If(this,{requestId:Number(b.requestId),
type:c},this.u)}.bind(this));break;default:D.D("Unrecognized message type from the generic Chromecast controller!",b.type),If(this,{requestId:Number(b.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.u)}};m.uf=function(a,b,c){this.h&&If(this,{type:"asyncComplete",id:b,error:c},this.j,a)};function If(a,b,c,d){a.H&&(a=df(b),d?c.getCastChannel(d).send(a):c.broadcast(a))}
function Gf(a,b,c){b=void 0===b?0:b;c=void 0===c?null:c;var d=a.g.playbackRate;var e=Kf;e=a.s?e.IDLE:a.h.$b()?e.If:a.g.paused?e.Kf:e.Lf;d={mediaSessionId:0,playbackRate:d,playerState:e,currentTime:a.g.currentTime,supportedMediaCommands:63,volume:{level:a.g.volume,muted:a.g.muted}};c&&(d.media=c);If(a,{requestId:b,type:"MEDIA_STATUS",status:[d]},a.u)}var Kf={IDLE:"IDLE",Lf:"PLAYING",If:"BUFFERING",Kf:"PAUSED"};function P(a,b){this.X=a;this.h=b==Lf;this.g=0}A("shaka.util.DataViewReader",P);var Lf=1;P.Endianness={Th:0,Vh:Lf};P.prototype.Va=function(){return this.g<this.X.byteLength};P.prototype.hasMoreData=P.prototype.Va;P.prototype.za=function(){return this.g};P.prototype.getPosition=P.prototype.za;P.prototype.lg=function(){return this.X.byteLength};P.prototype.getLength=P.prototype.lg;P.prototype.Ia=function(){try{var a=this.X.getUint8(this.g);this.g+=1;return a}catch(b){Mf()}};P.prototype.readUint8=P.prototype.Ia;
P.prototype.Bc=function(){try{var a=this.X.getUint16(this.g,this.h);this.g+=2;return a}catch(b){Mf()}};P.prototype.readUint16=P.prototype.Bc;P.prototype.S=function(){try{var a=this.X.getUint32(this.g,this.h);this.g+=4;return a}catch(b){Mf()}};P.prototype.readUint32=P.prototype.S;P.prototype.qf=function(){try{var a=this.X.getInt32(this.g,this.h);this.g+=4;return a}catch(b){Mf()}};P.prototype.readInt32=P.prototype.qf;
P.prototype.jc=function(){try{if(this.h){var a=this.X.getUint32(this.g,!0);var b=this.X.getUint32(this.g+4,!0)}else b=this.X.getUint32(this.g,!1),a=this.X.getUint32(this.g+4,!1)}catch(c){Mf()}if(2097151<b)throw new F(2,3,3001);this.g+=8;return b*Math.pow(2,32)+a};P.prototype.readUint64=P.prototype.jc;P.prototype.Lb=function(a){this.g+a>this.X.byteLength&&Mf();var b=new Uint8Array(this.X.buffer,this.X.byteOffset+this.g,a);this.g+=a;return b};P.prototype.readBytes=P.prototype.Lb;
P.prototype.Z=function(a){this.g+a>this.X.byteLength&&Mf();this.g+=a};P.prototype.skip=P.prototype.Z;P.prototype.sf=function(a){this.g<a&&Mf();this.g-=a};P.prototype.rewind=P.prototype.sf;P.prototype.seek=function(a){(0>a||a>this.X.byteLength)&&Mf();this.g=a};P.prototype.seek=P.prototype.seek;P.prototype.$d=function(){for(var a=this.g;this.Va()&&0!=this.X.getUint8(this.g);)this.g+=1;a=new Uint8Array(this.X.buffer,this.X.byteOffset+a,this.g-a);this.g+=1;return Wb(a)};
P.prototype.readTerminatedString=P.prototype.$d;function Mf(){throw new F(2,3,3E3);};function Q(){this.i=[];this.h=[];this.g=!1}A("shaka.util.Mp4Parser",Q);Q.prototype.box=function(a,b){var c=Nf(a);this.i[c]=0;this.h[c]=b;return this};Q.prototype.box=Q.prototype.box;Q.prototype.Da=function(a,b){var c=Nf(a);this.i[c]=1;this.h[c]=b;return this};Q.prototype.fullBox=Q.prototype.Da;Q.prototype.stop=function(){this.g=!0};Q.prototype.stop=Q.prototype.stop;
Q.prototype.parse=function(a,b){var c=new Uint8Array(a);c=new P(new DataView(c.buffer,c.byteOffset,c.byteLength),0);for(this.g=!1;c.Va()&&!this.g;)this.cd(0,c,b)};Q.prototype.parse=Q.prototype.parse;
Q.prototype.cd=function(a,b,c){var d=b.za(),e=b.S(),f=b.S(),h=!1;D.T("Parsing MP4 box",Of(f));switch(e){case 0:e=b.X.byteLength-d;break;case 1:e=b.jc(),h=!0}var k=this.h[f];if(k){var l=null,n=null;1==this.i[f]&&(n=b.S(),l=n>>>24,n&=16777215);f=d+e;c&&f>b.X.byteLength&&(f=b.X.byteLength);f-=b.za();b=0<f?b.Lb(f):new Uint8Array(0);b=new P(new DataView(b.buffer,b.byteOffset,b.byteLength),0);k({parser:this,partialOkay:c||!1,version:l,flags:n,reader:b,size:e,start:d+a,has64BitSize:h})}else b.Z(Math.min(d+
e-b.za(),b.X.byteLength-b.za()))};Q.prototype.parseNext=Q.prototype.cd;function Pf(a){for(var b=Qf(a);a.reader.Va()&&!a.parser.g;)a.parser.cd(a.start+b,a.reader,a.partialOkay)}Q.children=Pf;function Rf(a){for(var b=Qf(a),c=a.reader.S();0<c&&!a.parser.g;--c)a.parser.cd(a.start+b,a.reader,a.partialOkay)}Q.sampleDescription=Rf;function Sf(a){return function(b){a(b.reader.Lb(b.reader.X.byteLength-b.reader.za()))}}Q.allData=Sf;
function Nf(a){for(var b=0,c=0;c<a.length;c++)b=b<<8|a.charCodeAt(c);return b}function Of(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}Q.typeToString=Of;function Qf(a){return 8+(a.has64BitSize?8:0)+(null!=a.flags?4:0)}Q.headerSize=Qf;function Tf(a){var b=this;this.g=[];this.h=[];this.data=[];(new Q).box("moov",Pf).Da("pssh",function(a){if(1<a.version)D.D("Unrecognized PSSH version found!");else{var c=a.reader.X;c=new Uint8Array(c.buffer,c.byteOffset-12,a.size);b.data.push(c);b.g.push(I.nd(a.reader.Lb(16)));if(0<a.version){c=a.reader.S();for(var e=0;e<c;++e){var f=I.nd(a.reader.Lb(16));b.h.push(f)}}}}).parse(a);0==this.data.length&&D.D("No pssh box found!")}
function Uf(a){if(!a)return a;var b=new Tf(a);if(1>=b.data.length)return a;a=[];var c={};b=r(b.data);for(var d=b.next();!d.done;c={Xc:c.Xc},d=b.next())c.Xc=d.value,a.some(function(a){return function(b){return I.ab(b,a.Xc)}}(c))||a.push(c.Xc);return I.concat.apply(I,Oa(a))};var R={Qc:function(a,b){var c=R.ia(a,b);return 1!=c.length?null:c[0]},wd:function(a,b,c){a=R.Pe(a,b,c);return 1!=a.length?null:a[0]},ia:function(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return a instanceof Element&&a.tagName==b})},Pe:function(a,b,c){return Array.prototype.filter.call(a.childNodes,function(a){return a instanceof Element&&a.localName==c&&a.namespaceURI==b})},getAttributeNS:function(a,b,c){return a.hasAttributeNS(b,c)?a.getAttributeNS(b,c):null},Sc:function(a){return Array.prototype.every.call(a.childNodes,
function(a){return a.nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE})?a.textContent.trim():null},W:function(a,b,c,d){d=void 0===d?null:d;var e=null;a=a.getAttribute(b);null!=a&&(e=c(a));return null==e?d:e},ih:function(a){if(!a)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z");a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)},ib:function(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);
if(!b)return D.D("Invalid duration string:",a),null;a=31536E3*Number(b[1]||null)+2592E3*Number(b[2]||null)+86400*Number(b[3]||null)+3600*Number(b[4]||null)+60*Number(b[5]||null)+Number(b[6]||null);return isFinite(a)?a:null},ed:function(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Number(b[1]);if(!isFinite(a))return null;b=Number(b[2]);return isFinite(b)?{start:a,end:b}:null},parseInt:function(a){a=Number(a);return 0===a%1?a:null},dd:function(a){a=Number(a);return 0===a%1&&0<a?a:null},
gc:function(a){a=Number(a);return 0===a%1&&0<=a?a:null},parseFloat:function(a){a=Number(a);return isNaN(a)?null:a},Wf:function(a){var b;a=(b=a.match(/^(\d+)\/(\d+)$/))?Number(b[1])/Number(b[2]):Number(a);return isNaN(a)?null:a},mf:function(a,b){var c=new DOMParser;try{var d=c.parseFromString(a,"text/xml")}catch(f){}if(d&&d.documentElement.tagName==b)var e=d.documentElement;return e&&0<e.getElementsByTagName("parsererror").length?null:e},lf:function(a,b){try{var c=Wb(a);return R.mf(c,b)}catch(d){}}};var Vf=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");
function Wf(a,b,c){var d=Xf(a),e=null;a=[];var f=[],h=new Set(d.map(function(a){return a.keyId}));h["delete"](null);if(1<h.size)throw new F(2,4,4010);c||(f=d.filter(function(a){return"urn:mpeg:dash:mp4protection:2011"==a.tf?(e=a.init||e,!1):!0}),f.length&&(a=Yf(e,b,f),0==a.length&&(a=[Tb("",e)])));if(d.length&&(c||!f.length))for(a=[],b=r(Vf.values()),c=b.next();!c.done;c=b.next())c=c.value,"org.w3.clearkey"!=c&&a.push(Tb(c,e));if(h=Array.from(h)[0]||null)for(b=r(a),c=b.next();!c.done;c=b.next())for(c=
r(c.value.initData),d=c.next();!d.done;d=c.next())d.value.keyId=h;return{Le:h,Wh:e,drmInfos:a,Qe:!0}}function Zf(a,b,c,d){var e=Wf(a,b,d);if(c.Qe){a=1==c.drmInfos.length&&!c.drmInfos[0].keySystem;b=0==e.drmInfos.length;if(0==c.drmInfos.length||a&&!b)c.drmInfos=e.drmInfos;c.Qe=!1}else if(0<e.drmInfos.length&&(c.drmInfos=c.drmInfos.filter(function(a){return e.drmInfos.some(function(b){return b.keySystem==a.keySystem})}),0==c.drmInfos.length))throw new F(2,4,4008);return e.Le||c.Le}
function $f(a){var b=0,c=(new DataView(a)).getUint32(b,!0);b+=4;if(c!==a.byteLength)return D.D("PlayReady Object with invalid length encountered."),[];b+=2;c=[];for(var d=new DataView(a);b<a.byteLength-1;){var e=d.getUint16(b,!0);b+=2;var f=d.getUint16(b,!0);b+=2;var h=new Uint8Array(a,b,f);c.push({type:e,value:h});b+=f}return c}
function ag(a){a=r(a.getElementsByTagName("DATA"));for(var b=a.next();!b.done;b=a.next()){b=r(b.value.childNodes);for(var c=b.next();!c.done;c=b.next())if(c=c.value,c instanceof Element&&"LA_URL"==c.tagName)return c.textContent}return""}
function Yf(a,b,c){var d=[];c=r(c);for(var e=c.next();!e.done;e=c.next()){e=e.value;var f=Vf.get(e.tf);if(f){var h;if(h=R.wd(e.node,"urn:microsoft:playready","pro")){h=I.cb(h.textContent);var k=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=h.length,n=k.length+16+l,p=new ArrayBuffer(n),q=new Uint8Array(p);p=new DataView(p);var t=0;p.setUint32(t,n);t+=4;p.setUint32(t,1886614376);t+=4;p.setUint32(t,0);t+=4;q.set(k,t);t+=k.length;p.setUint32(t,l);t+=4;q.set(h,t);h=[{initData:q,
initDataType:"cenc",keyId:e.keyId}]}else h=null;h=Tb(f,e.init||a||h);if(f=bg.get(f))h.licenseServerUri=f(e);d.push(h)}else for(e=b(e.node)||[],e=r(e),f=e.next();!f.done;f=e.next())d.push(f.value)}return d}
var bg=(new Map).set("com.widevine.alpha",function(a){return(a=R.wd(a.node,"urn:microsoft","laurl"))?a.getAttribute("licenseUrl")||"":""}).set("com.microsoft.playready",function(a){a=R.wd(a.node,"urn:microsoft:playready","pro");if(!a)return"";a=I.cb(a.textContent);a=$f(a.buffer).filter(function(a){return 1===a.type})[0];if(!a)return"";a=Yb(a.value,!0);return(a=R.mf(a,"WRMHEADER"))?ag(a):""});function Xf(a){var b=[];a=r(a);for(var c=a.next();!c.done;c=a.next())(c=cg(c.value))&&b.push(c);return b}
function cg(a){var b=a.getAttribute("schemeIdUri"),c=R.getAttributeNS(a,"urn:mpeg:cenc:2013","default_KID"),d=R.Pe(a,"urn:mpeg:cenc:2013","pssh").map(R.Sc);if(!b)return D.error("Missing required schemeIdUri attribute on","ContentProtection element",a),null;b=b.toLowerCase();if(c&&(c=c.replace(/-/g,"").toLowerCase(),c.includes(" ")))throw new F(2,4,4009);var e=[];try{e=d.map(function(a){return{initDataType:"cenc",initData:I.cb(a),keyId:null}})}catch(f){throw new F(2,4,4007);}return{node:a,tf:b,keyId:c,
init:0<e.length?e:null}};function dg(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(b,c,d,e){if("$$"==b)return"$";var h=f[c];if(null==h)return D.D("URL template does not have an available substitution for identifier",'"'+c+'":',a),b;"RepresentationID"==c&&d&&(D.D("URL template should not contain a width specifier for identifier",'"RepresentationID":',a),d=void 0);"Time"==c&&(h=Math.round(h));switch(e){case void 0:case "d":case "i":case "u":b=
h.toString();break;case "o":b=h.toString(8);break;case "x":b=h.toString(16);break;case "X":b=h.toString(16).toUpperCase();break;default:b=h.toString()}d=window.parseInt(d,10)||1;return Array(Math.max(0,d-b.length)+1).join("0")+b})}
function eg(a,b){var c=fg(a,b,"timescale"),d=1;c&&(d=R.dd(c)||1);c=fg(a,b,"duration");(c=R.dd(c||""))&&(c/=d);var e=fg(a,b,"startNumber"),f=Number(fg(a,b,"presentationTimeOffset"))||0,h=R.gc(e||"");if(null==e||null==h)h=1;var k=gg(a,b,"SegmentTimeline");e=null;if(k){e=d;var l=a.ma.duration||Infinity;k=R.ia(k,"S");for(var n=[],p=-f,q=0;q<k.length;++q){var t=k[q],x=R.W(t,"t",R.gc),C=R.W(t,"d",R.gc),z=R.W(t,"r",R.parseInt);null!=x&&(x-=f);if(!C){D.D('"S" element must have a duration:','ignoring the remaining "S" elements.',
t);break}x=null!=x?x:p;z=z||0;if(0>z)if(q+1<k.length){z=R.W(k[q+1],"t",R.gc);if(null==z){D.D('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',t);break}else if(x>=z){D.D('An "S" element cannot have a negative repeat','if its start time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',t);break}z=Math.ceil((z-x)/C)-1}else{if(Infinity==l){D.D('The last "S" element cannot have a negative repeat',
"if the Period has an infinite duration:",'ignoring the last "S" element.',t);break}else if(x/e>=l){D.D('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',t);break}z=Math.ceil((l*e-x)/C)-1}0<n.length&&x!=p&&(Math.abs((x-p)/e)>=Vb&&D.D("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",t),n[n.length-1].end=x/e);for(t=0;t<=z;++t)p=x+C,n.push({start:x/e,end:p/e,Ph:x}),x=p}e=n}return{timescale:d,
xa:c,Ob:h,Ja:f/d||0,Ae:f,aa:e}}function fg(a,b,c){return[b(a.L),b(a.ua),b(a.Ha)].filter(Rb.qb).map(function(a){return a.getAttribute(c)}).reduce(function(a,b){return a||b})}function gg(a,b,c){return[b(a.L),b(a.ua),b(a.Ha)].filter(Rb.qb).map(function(a){return R.Qc(a,c)}).reduce(function(a,b){return a||b})}
function hg(a,b,c,d,e,f){for(var h=R.getAttributeNS(a,"http://www.w3.org/1999/xlink","href"),k=R.getAttributeNS(a,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=0;l<a.attributes.length;l++){var n=a.attributes[l];"http://www.w3.org/1999/xlink"==n.namespaceURI&&(a.removeAttributeNS(n.namespaceURI,n.localName),--l)}if(5<=f)return lc(new F(2,4,4028));if("onLoad"!=k)return lc(new F(2,4,4027));var p=Sb([d],[h]);return e.request(0,Cc(p,b)).ra(function(d){d=R.lf(d.data,a.tagName);if(!d)return lc(new F(2,
4,4001,h));for(;a.childNodes.length;)a.removeChild(a.childNodes[0]);for(;d.childNodes.length;){var k=d.childNodes[0];d.removeChild(k);a.appendChild(k)}for(k=0;k<d.attributes.length;k++){var l=d.attributes[k].nodeName,n=d.getAttribute(l);a.setAttribute(l,n)}return ig(a,b,c,p[0],e,f+1)})}
function ig(a,b,c,d,e,f){f=void 0===f?0:f;if(R.getAttributeNS(a,"http://www.w3.org/1999/xlink","href")){var h=hg(a,b,c,d,e,f);c&&(h=h.ra(void 0,function(){return ig(a,b,c,d,e,f)}));return h}h=[];for(var k=0;k<a.childNodes.length;k++){var l=a.childNodes[k];l instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==R.getAttributeNS(l,"http://www.w3.org/1999/xlink","href")?(a.removeChild(l),--k):"SegmentTimeline"!=l.tagName&&h.push(ig(l,b,c,d,e,f)))}return pc(h).ra(function(){return a})};function jg(a,b,c){this.i=a;this.h=b;this.g=c}A("shaka.media.InitSegmentReference",jg);jg.prototype.td=function(){return this.i()};jg.prototype.createUris=jg.prototype.td;jg.prototype.Cd=function(){return this.h};jg.prototype.getStartByte=jg.prototype.Cd;jg.prototype.Ad=function(){return this.g};jg.prototype.getEndByte=jg.prototype.Ad;function S(a,b,c,d,e,f){this.position=a;this.startTime=b;this.endTime=c;this.i=d;this.h=e;this.g=f}A("shaka.media.SegmentReference",S);S.prototype.za=function(){return this.position};
S.prototype.getPosition=S.prototype.za;S.prototype.Vc=function(){return this.startTime};S.prototype.getStartTime=S.prototype.Vc;S.prototype.jg=function(){return this.endTime};S.prototype.getEndTime=S.prototype.jg;S.prototype.td=function(){return this.i()};S.prototype.createUris=S.prototype.td;S.prototype.Cd=function(){return this.h};S.prototype.getStartByte=S.prototype.Cd;S.prototype.Ad=function(){return this.g};S.prototype.getEndByte=S.prototype.Ad;function kg(a,b,c,d){var e,f=(new Q).Da("sidx",function(a){e=lg(b,d,c,a)});a&&f.parse(a);if(e)return e;D.error('Invalid box type, expected "sidx".');throw new F(2,3,3004);}
function lg(a,b,c,d){var e=[];d.reader.Z(4);var f=d.reader.S();if(0==f)throw D.error("Invalid timescale."),new F(2,3,3005);if(0==d.version){var h=d.reader.S();var k=d.reader.S()}else h=d.reader.jc(),k=d.reader.jc();d.reader.Z(2);var l=d.reader.Bc();a=a+d.size+k;for(k=0;k<l;k++){var n=d.reader.S(),p=(n&2147483648)>>>31;n&=2147483647;var q=d.reader.S();d.reader.Z(4);if(1==p)throw D.error("Heirarchical SIDXs are not supported."),new F(2,3,3006);e.push(new S(e.length,h/f-b,(h+q)/f-b,function(){return c},
a,a+n-1));h+=q;a+=n}d.parser.stop();return e};function mg(a){this.g=a}A("shaka.media.SegmentIndex",mg);mg.prototype.destroy=function(){this.g=null;return Promise.resolve()};mg.prototype.destroy=mg.prototype.destroy;mg.prototype.find=function(a){for(var b=this.g.length-1,c=b;0<=c;--c){var d=this.g[c],e=c<b?this.g[c+1].startTime:d.endTime;if(a>=d.startTime&&a<e)return d.position}return this.g.length&&a<this.g[0].startTime?this.g[0].position:null};mg.prototype.find=mg.prototype.find;
mg.prototype.get=function(a){if(0==this.g.length)return null;a-=this.g[0].position;return 0>a||a>=this.g.length?null:this.g[a]};mg.prototype.get=mg.prototype.get;mg.prototype.offset=function(a){for(var b=0;b<this.g.length;++b)this.g[b].startTime+=a,this.g[b].endTime+=a};mg.prototype.offset=mg.prototype.offset;
mg.prototype.Md=function(a){for(var b=[],c=0,d=0;c<this.g.length&&d<a.length;){var e=this.g[c],f=a[d];e.startTime<f.startTime?(b.push(e),c++):(e.startTime>f.startTime?0==c?b.push(f):D.D("Refusing to rewrite original references on update!"):(.1<Math.abs(e.endTime-f.endTime)?b.push(new S(e.position,f.startTime,f.endTime,f.i,f.h,f.g)):b.push(e),c++),d++)}for(;c<this.g.length;)b.push(this.g[c++]);if(b.length)for(c=b[b.length-1].position+1;d<a.length;)e=a[d++],e=new S(c++,e.startTime,e.endTime,e.i,e.h,
e.g),b.push(e);else b=a;this.g=b};mg.prototype.merge=mg.prototype.Md;mg.prototype.ud=function(a){for(var b=0;b<this.g.length;++b)if(this.g[b].endTime>a){this.g.splice(0,b);return}this.g=[]};mg.prototype.evict=mg.prototype.ud;function ng(a,b){for(;a.g.length;)if(a.g[a.g.length-1].startTime>=b)a.g.pop();else break;for(;a.g.length;)if(0>=a.g[0].endTime)a.g.shift();else break;if(0!=a.g.length){var c=a.g[a.g.length-1];a.g[a.g.length-1]=new S(c.position,c.startTime,b,c.i,c.h,c.g)}};function og(a){this.h=a;this.g=new P(a,0);pg||(pg=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var pg;og.prototype.Va=function(){return this.g.Va()};
function qg(a){var b=rg(a);if(7<b.length)throw new F(2,3,3002);for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=rg(a);a:{d=I.ab;for(var e=0;e<pg.length;e++)if(d(c,pg[e])){d=!0;break a}d=!1}if(d)c=a.h.byteLength-a.g.za();else{if(8==c.length&&c[1]&224)throw new F(2,3,3001);d=c[0]&(1<<8-c.length)-1;for(e=1;e<c.length;e++)d=256*d+c[e];c=d}c=a.g.za()+c<=a.h.byteLength?c:a.h.byteLength-a.g.za();d=new DataView(a.h.buffer,a.h.byteOffset+a.g.za(),c);a.g.Z(c);return new sg(b,d)}
function rg(a){var b=a.g.Ia(),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new F(2,3,3002);var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=a.g.Ia();return d}function sg(a,b){this.id=a;this.g=b}function tg(a){if(8<a.g.byteLength)throw new F(2,3,3002);if(8==a.g.byteLength&&a.g.getUint8(0)&224)throw new F(2,3,3001);for(var b=0,c=0;c<a.g.byteLength;c++){var d=a.g.getUint8(c);b=256*b+d}return b};function ug(){}
ug.prototype.parse=function(a,b,c,d){var e;b=new og(new DataView(b));if(440786851!=qg(b).id)throw D.error("Not an EBML element."),new F(2,3,3008);var f=qg(b);if(408125543!=f.id)throw D.error("Not a Segment element."),new F(2,3,3009);b=f.g.byteOffset;f=new og(f.g);for(e=null;f.Va();){var h=qg(f);if(357149030==h.id){e=h;break}}if(!e)throw D.error("Not an Info element."),new F(2,3,3010);f=new og(e.g);e=1E6;for(h=null;f.Va();){var k=qg(f);if(2807729==k.id)e=tg(k);else if(17545==k.id)if(h=k,4==h.g.byteLength)h=
h.g.getFloat32(0);else if(8==h.g.byteLength)h=h.g.getFloat64(0);else throw new F(2,3,3003);}if(null==h)throw new F(2,3,3011);f=e/1E9;e=h*f;a=qg(new og(new DataView(a)));if(475249515!=a.id)throw D.error("Not a Cues element."),new F(2,3,3007);return vg(a,b,f,e,c,d)};
function vg(a,b,c,d,e,f){function h(){return e}var k=[];a=new og(a.g);for(var l=null,n=null;a.Va();){var p=qg(a);if(187==p.id){var q=wg(p);q&&(p=c*q.Qh,q=b+q.ph,null!=l&&k.push(new S(k.length,l-f,p-f,h,n,q-1)),l=p,n=q)}}null!=l&&k.push(new S(k.length,l-f,d-f,h,n,null));return k}
function wg(a){var b=new og(a.g);a=qg(b);if(179!=a.id)throw D.D("Not a CueTime element."),new F(2,3,3013);a=tg(a);b=qg(b);if(183!=b.id)throw D.D("Not a CueTrackPositions element."),new F(2,3,3012);b=new og(b.g);for(var c=0;b.Va();){var d=qg(b);if(241==d.id){c=tg(d);break}}return{Qh:a,ph:c}};function xg(a,b){var c=gg(a,b,"Initialization");if(!c)return null;var d=a.L.La,e=c.getAttribute("sourceURL");e&&(d=Sb(a.L.La,[e]));e=0;var f=null;if(c=R.W(c,"range",R.ed))e=c.start,f=c.end;return new jg(function(){return d},e,f)}
function yg(a,b){var c=Number(fg(a,zg,"presentationTimeOffset"))||0,d=fg(a,zg,"timescale"),e=1;d&&(e=R.dd(d)||1);c=c/e||0;d=xg(a,zg);var f=a.L.contentType;e=a.L.mimeType.split("/")[1];if("text"!=f&&"mp4"!=e&&"webm"!=e)throw D.error("SegmentBase specifies an unsupported container type.",a.L),new F(2,4,4006);if("webm"==e&&!d)throw D.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",a.L),new F(2,
4,4005);f=gg(a,zg,"RepresentationIndex");var h=fg(a,zg,"indexRange"),k=a.L.La;h=R.ed(h||"");if(f){var l=f.getAttribute("sourceURL");l&&(k=Sb(a.L.La,[l]));h=R.W(f,"range",R.ed,h)}if(!h)throw D.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",a.L),new F(2,4,4002);e=Ag(a,b,d,k,h.start,h.end,e,c);return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,
initSegmentReference:d,Ja:c}}function Ag(a,b,c,d,e,f,h,k){var l=a.presentationTimeline,n=!a.Tb||!a.ma.Gd,p=a.ma.start,q=a.ma.duration,t=b,x=null;return{createSegmentIndex:function(){var a=[t(d,e,f),"webm"==h?t(c.i(),c.h,c.g):null];t=null;return Promise.all(a).then(function(a){var b=a[0];a=a[1]||null;b="mp4"==h?kg(b,e,d,k):(new ug).parse(b,a,d,k);l.dc(b,p);x=new mg(b);n&&ng(x,q)})},findSegmentPosition:function(a){return x.find(a)},getSegmentReference:function(a){return x.get(a)}}}
function zg(a){return a.Cc};function Bg(a,b){var c=xg(a,Cg);var d=Dg(a);var e=eg(a,Cg),f=e.Ob;0==f&&(D.D("SegmentList@startNumber must be > 0"),f=1);var h=0;e.xa?h=e.xa*(f-1):e.aa&&0<e.aa.length&&(h=e.aa[0].start);d={xa:e.xa,startTime:h,Ob:f,Ja:e.Ja,aa:e.aa,Ib:d};if(!d.xa&&!d.aa&&1<d.Ib.length)throw D.D("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",a.L),new F(2,4,4002);if(!d.xa&&!a.ma.duration&&!d.aa&&1==d.Ib.length)throw D.D("SegmentList does not contain sufficient segment information:",
"the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",a.L),new F(2,4,4002);if(d.aa&&0==d.aa.length)throw D.D("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",a.L),new F(2,4,4002);f=e=null;a.Ha.id&&a.L.id&&(f=a.Ha.id+","+a.L.id,e=b[f]);h=Eg(a.ma.duration,d.Ob,a.L.La,d);e?(e.Md(h),f=a.presentationTimeline.vc(),e.ud(f-a.ma.start)):(a.presentationTimeline.dc(h,a.ma.start),e=new mg(h),f&&
a.Tb&&(b[f]=e));a.Tb&&a.ma.Gd||ng(e,a.ma.duration);return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e),initSegmentReference:c,Ja:d.Ja}}function Cg(a){return a.tb}
function Eg(a,b,c,d){var e=d.Ib.length;d.aa&&d.aa.length!=d.Ib.length&&(e=Math.min(d.aa.length,d.Ib.length),D.D("The number of items in the segment timeline and the number of segment","URLs do not match, truncating",d.Ib.length,"to",e));for(var f=[],h=d.startTime,k=0;k<e;k++){var l=d.Ib[k],n=Sb(c,[l.Qg]),p=void 0;p=null!=d.xa?h+d.xa:d.aa?d.aa[k].end:h+a;f.push(new S(k+b,h,p,function(a){return a}.bind(null,n),l.start,l.end));h=p}return f}
function Dg(a){return[a.L.tb,a.ua.tb,a.Ha.tb].filter(Rb.qb).map(function(a){return R.ia(a,"SegmentURL")}).reduce(function(a,c){return 0<a.length?a:c}).map(function(b){b.getAttribute("indexRange")&&!a.Xe&&(a.Xe=!0,D.D("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var c=b.getAttribute("media");b=R.W(b,"mediaRange",R.ed,{start:0,end:null});return{Qg:c,start:b.start,end:b.end}})};function Fg(a,b,c,d){var e=Gg(a);var f=eg(a,Hg);var h=fg(a,Hg,"media"),k=fg(a,Hg,"index");f={xa:f.xa,timescale:f.timescale,Ob:f.Ob,Ja:f.Ja,Ae:f.Ae,aa:f.aa,Kd:h,zc:k};h=f.zc?1:0;h+=f.aa?1:0;h+=f.xa?1:0;if(0==h)throw D.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",a.L),new F(2,4,4002);1!=h&&(D.D("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,",
"a SegmentTimeline or a segment duration.",a.L),f.zc?(D.info("Using the index URL template by default."),f.aa=null):D.info("Using the SegmentTimeline by default."),f.xa=null);if(!f.zc&&!f.Kd)throw D.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",a.L),new F(2,4,4002);if(f.zc){c=a.L.mimeType.split("/")[1];if("mp4"!=c&&"webm"!=c)throw D.error("SegmentTemplate specifies an unsupported container type.",a.L),new F(2,4,4006);
if("webm"==c&&!e)throw D.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",a.L),new F(2,4,4005);d=dg(f.zc,a.L.id,null,a.bandwidth||null,null);d=Sb(a.L.La,[d]);a=Ag(a,b,e,d,0,null,c,f.Ja)}else f.xa?(d||(a.presentationTimeline.Pd(f.xa),a.presentationTimeline.Qd(a.ma.start)),a=Ig(a,f)):(h=b=null,a.Ha.id&&a.L.id&&(h=a.Ha.id+","+a.L.id,b=c[h]),k=Jg(a,f),d=!a.Tb||!a.ma.Gd,b?(d&&ng(new mg(k),
a.ma.duration),b.Md(k),c=a.presentationTimeline.vc(),b.ud(c-a.ma.start)):(a.presentationTimeline.dc(k,a.ma.start),b=new mg(k),h&&a.Tb&&(c[h]=b)),d&&ng(b,a.ma.duration),a={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:b.find.bind(b),getSegmentReference:b.get.bind(b)});return{createSegmentIndex:a.createSegmentIndex,findSegmentPosition:a.findSegmentPosition,getSegmentReference:a.getSegmentReference,initSegmentReference:e,Ja:f.Ja}}function Hg(a){return a.Ec}
function Ig(a,b){var c=a.ma.duration,d=b.xa,e=b.Ob,f=b.timescale,h=b.Kd,k=a.bandwidth||null,l=a.L.id,n=a.L.La;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0>a||c&&a>=c?null:Math.floor(a/d)},getSegmentReference:function(a){var b=a*d,p=b+d;c&&(p=Math.min(p,c));return 0>p||c&&b>=c?null:new S(a,b,p,function(){var c=dg(h,l,a+e,k,b*f);return Sb(n,[c])},0,null)}}}
function Jg(a,b){for(var c=[],d=0;d<b.aa.length;d++){var e=d+b.Ob;c.push(new S(e,b.aa[d].start,b.aa[d].end,function(a,b,c,d,e,p){a=dg(a,b,e,c,p);return Sb(d,[a]).map(function(a){return a.toString()})}.bind(null,b.Kd,a.L.id,a.bandwidth||null,a.L.La,e,b.aa[d].Ph+b.Ae),0,null))}return c}function Gg(a){var b=fg(a,Hg,"initialization");if(!b)return null;var c=a.L.id,d=a.bandwidth||null,e=a.L.La;return new jg(function(){var a=dg(b,c,null,d,null);return Sb(e,[a])},0,null)};var U={hc:{},Ac:{},be:function(a,b){U.Ac[a]=b}};A("shaka.media.ManifestParser.registerParserByExtension",U.be);U.kc=function(a,b){U.hc[a]=b};A("shaka.media.ManifestParser.registerParserByMime",U.kc);
U.mh=function(){var a={};if(Wc()){for(var b in U.hc)a[b]=!0;for(var c in U.Ac)a[c]=!0}b={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};c=r(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var d=c.next();!d.done;d=c.next())d=d.value,a[d]=Wc()?!!U.hc[d]:Xc(d);for(var e in b)a[e]=Wc()?!!U.Ac[e]:Xc(b[e]);return a};
U.create=function(a,b,c,d){return u(function f(){var h,k;return y(f,function(f){switch(f.A){case 1:return ya(f,2),v(f,U.kg(a,b,c,d),4);case 4:return h=f.G,f["return"](new h);case 2:throw k=Da(f),k.severity=2,k;}})})};
U.kg=function(a,b,c,d){return u(function f(){var h,k,l,n,p;return y(f,function(f){switch(f.A){case 1:h=U;if(d){if(k=h.hc[d.toLowerCase()])return f["return"](k);D.D("Could not determine manifest type using MIME type ",d)}if(l=h.getExtension(a)){if(n=h.Ac[l])return f["return"](n);D.D("Could not determine manifest type for extension ",l)}else D.D("Could not find extension for ",a);if(d){f.I(2);break}return v(f,h.wg(a,b,c),3);case 3:if(d=f.G){if(p=U.hc[d])return f["return"](p);D.D("Could not determine manifest type using MIME type",
d)}case 2:throw new F(2,4,4E3,a);}})})};U.wg=function(a,b,c){return u(function e(){var f,h,k;return y(e,function(e){switch(e.A){case 1:return f=Cc([a],c),f.method="HEAD",v(e,b.request(0,f).promise,2);case 2:return h=e.G,k=h.headers["content-type"],e["return"](k?k.toLowerCase().split(";").shift():"")}})})};U.getExtension=function(a){a=(new Ab(a)).Ga.split("/").pop().split(".");return 1==a.length?"":a.pop().toLowerCase()};
U.isSupported=function(a,b){return Wc()?b in U.hc||U.getExtension(a)in U.Ac?!0:!1:!1};function V(a,b,c){this.j=a;this.fd=b;this.s=this.l=Infinity;this.g=1;this.h=this.i=null;this.B=0;this.C=!0;this.u=0;this.F=void 0===c?!0:c}A("shaka.media.PresentationTimeline",V);V.prototype.wa=function(){return this.l};V.prototype.getDuration=V.prototype.wa;V.prototype.ug=function(){return this.g};V.prototype.getMaxSegmentDuration=V.prototype.ug;V.prototype.Ya=function(a){this.l=a};V.prototype.setDuration=V.prototype.Ya;V.prototype.Ag=function(){return this.j};
V.prototype.getPresentationStartTime=V.prototype.Ag;V.prototype.vf=function(a){this.B=a};V.prototype.setClockOffset=V.prototype.vf;V.prototype.Fc=function(a){this.C=a};V.prototype.setStatic=V.prototype.Fc;V.prototype.qe=function(a){this.s=a};V.prototype.setSegmentAvailabilityDuration=V.prototype.qe;V.prototype.Ch=function(a){this.fd=a};V.prototype.setDelay=V.prototype.Ch;V.prototype.ig=function(){return this.fd};V.prototype.getDelay=V.prototype.ig;
V.prototype.dc=function(a,b){if(0!=a.length){var c=a[a.length-1].endTime+b;this.Qd(a[0].startTime+b);this.g=a.reduce(function(a,b){return Math.max(a,b.endTime-b.startTime)},this.g);this.h=Math.max(this.h,c);null!=this.j&&this.F&&(this.j=(Date.now()+this.B)/1E3-this.h-this.g);D.N("notifySegments:","maxSegmentDuration="+this.g)}};V.prototype.notifySegments=V.prototype.dc;V.prototype.Qd=function(a){this.i=null==this.i?a:Math.min(this.i,a)};V.prototype.notifyMinSegmentStartTime=V.prototype.Qd;
V.prototype.Pd=function(a){this.g=Math.max(this.g,a);D.N("notifyNewSegmentDuration:","maxSegmentDuration="+this.g)};V.prototype.notifyMaxSegmentDuration=V.prototype.Pd;V.prototype.offset=function(a){null!=this.i&&(this.i+=a);null!=this.h&&(this.h+=a)};V.prototype.offset=V.prototype.offset;V.prototype.$=function(){return Infinity==this.l&&!this.C};V.prototype.isLive=V.prototype.$;V.prototype.Gb=function(){return Infinity!=this.l&&!this.C};V.prototype.isInProgress=V.prototype.Gb;
V.prototype.vc=function(){if(Infinity==this.s)return this.u;var a=this.Xb()-this.s;return Math.max(this.u,a)};V.prototype.getSegmentAvailabilityStart=V.prototype.vc;V.prototype.yf=function(a){this.u=a};V.prototype.setUserSeekStart=V.prototype.yf;V.prototype.Xb=function(){return this.$()||this.Gb()?Math.min(Math.max(0,(Date.now()+this.B)/1E3-this.g-this.j),this.l):this.l};V.prototype.getSegmentAvailabilityEnd=V.prototype.Xb;
V.prototype.uc=function(a){var b=Math.max(this.i,this.u);if(Infinity==this.s)return Math.ceil(1E3*b)/1E3;var c=this.Xb()-this.s;a=Math.min(c+a,this.fb());return Math.max(b,a)};V.prototype.getSafeSeekRangeStart=V.prototype.uc;V.prototype.Wb=function(){return this.uc(0)};V.prototype.getSeekRangeStart=V.prototype.Wb;V.prototype.fb=function(){var a=this.$()||this.Gb()?this.fd:0;return Math.max(0,this.Xb()-a)};V.prototype.getSeekRangeEnd=V.prototype.fb;
V.prototype.Ef=function(){return null==this.j||null!=this.h&&this.F?!1:!0};V.prototype.usingPresentationStartTime=V.prototype.Ef;function Kg(a,b,c,d){a=Cc(a,d);if(0!=b||null!=c)a.headers.Range=c?"bytes="+b+"-"+c:"bytes="+b+"-";return a};function Lg(){var a=this;this.h=this.g=null;this.j=[];this.i=null;this.B=[];this.s=1;this.C={};this.F=0;this.H=new sb(5);this.u=new K(function(){Mg(a)});this.l=new yc}A("shaka.dash.DashParser",Lg);m=Lg.prototype;m.configure=function(a){this.g=a};m.start=function(a,b){var c=this;return u(function e(){var f;return y(e,function(e){switch(e.A){case 1:return c.j=[a],c.h=b,v(e,Ng(c),2);case 2:f=e.G;c.h&&Og(c,f);if(!c.h)throw new F(2,7,7001);return e["return"](c.i)}})})};
m.stop=function(){this.g=this.h=null;this.j=[];this.i=null;this.B=[];this.C={};null!=this.u&&(this.u.stop(),this.u=null);return this.l.destroy()};m.update=function(){Ng(this)["catch"](function(a){if(this.h)this.h.onError(a)}.bind(this))};m.onExpirationUpdated=function(){};
function Ng(a){var b=Date.now(),c=a.h.networkingEngine.request(0,Cc(a.j,a.g.retryParameters));zc(a.l,c);return c.promise.then(function(b){if(a.h)return b.uri&&!a.j.includes(b.uri)&&a.j.unshift(b.uri),Pg(a,b.data,b.uri)}).then(function(){var c=(Date.now()-b)/1E3;tb(a.H,1,c);return c})}function Pg(a,b,c){b=R.lf(b,"MPD");if(!b)throw new F(2,4,4001,c);b=ig(b,a.g.retryParameters,a.g.dash.xlinkFailGracefully,c,a.h.networkingEngine);zc(a.l,b);return b.promise.then(function(b){return Qg(a,b,c)})}
function Qg(a,b,c){return u(function e(){var f,h,k,l,n,p,q,t,x,C,z,H,J,T,Ba,ka,gb,Ra,va,hb,oa,Ca,Sa,Ya,Fa,ib,wb;return y(e,function(e){switch(e.A){case 1:l=Rb;n=R;p=[c];q=n.ia(b,"Location").map(n.Sc).filter(l.qb);0<q.length&&(t=Sb(p,q),p=a.j=t);x=n.ia(b,"BaseURL").map(n.Sc);C=Sb(p,x);z=a.g.dash.ignoreMinBufferTime;H=0;z||(H=n.W(b,"minBufferTime",n.ib));a.F=n.W(b,"minimumUpdatePeriod",n.ib,-1);J=n.W(b,"availabilityStartTime",n.ih);T=n.W(b,"timeShiftBufferDepth",n.ib);Ba=n.W(b,"maxSegmentDuration",
n.ib);ka=b.getAttribute("type")||"static";gb=a.g.dash.ignoreSuggestedPresentationDelay;Ra=null;gb||(Ra=n.W(b,"suggestedPresentationDelay",n.ib));a.i?va=a.i.presentationTimeline:(hb=Math.max(a.g.dash.defaultPresentationDelay,1.5*H),oa=null!=Ra?Ra:hb,va=new V(J,oa,a.g.dash.autoCorrectDrift));Ca={Tb:"static"!=ka,presentationTimeline:va,Ha:null,ma:null,ua:null,L:null,bandwidth:0,Xe:!1};for(var Mb=Ca,Nb=C,Ob=R.W(b,"mediaPresentationDuration",R.ib),xb=[],Ma=0,yb=R.ia(b,"Period"),Na=0;Na<yb.length;Na++){var Pb=
yb[Na];Ma=R.W(Pb,"start",R.ib,Ma);var Ta=R.W(Pb,"duration",R.ib),sa=null;if(Na!=yb.length-1){var le=R.W(yb[Na+1],"start",R.ib);null!=le&&(sa=le-Ma)}else null!=Ob&&(sa=Ob-Ma);le=Vb;sa&&Ta&&Math.abs(sa-Ta)>le&&D.D("There is a gap/overlap between Periods",Pb);null==sa&&(sa=Ta);Pb=Rg(a,Mb,Nb,{start:Ma,duration:sa,node:Pb,Gd:null==sa||Na==yb.length-1});xb.push(Pb);Ta=Mb.Ha.id;a.B.includes(Ta)||(a.B.push(Ta),a.i&&(a.h.filterNewPeriod(Pb),a.i.periods.push(Pb)));if(null==sa){Na!=yb.length-1&&D.D("Skipping Period",
Na+1,"and any subsequent Periods:","Period",Na+1,"does not have a valid start time.",xb[Na+1]);Ma=null;break}Ma+=sa}null==a.i&&a.h.filterAllPeriods(xb);null!=Ob?(Ma!=Ob&&D.D("@mediaPresentationDuration does not match the total duration of all","Periods."),f=xb,h=Ob,k=!1):(f=xb,h=Ma,k=!0);Sa=h;Ya=f;va.Fc("static"==ka);"static"!=ka&&k||va.Ya(Sa||Infinity);(Fa=va.$())&&!isNaN(a.g.availabilityWindowOverride)&&(T=a.g.availabilityWindowOverride);null==T&&(T=Infinity);va.qe(T);va.Pd(Ba||1);if(a.i){e.I(0);
break}a.i={presentationTimeline:va,periods:Ya,offlineSessionIds:[],minBufferTime:H||0};if(!va.Ef()){e.I(0);break}ib=n.ia(b,"UTCTiming");return v(e,Sg(a,C,ib),4);case 4:wb=e.G;if(!a.h)return e["return"]();va.vf(wb);w(e)}})})}
function Rg(a,b,c,d){b.Ha=Tg(d.node,null,c);b.ma=d;b.Ha.id||(D.info("No Period ID given for Period with start time "+d.start+",  Assigning a default"),b.Ha.id="__shaka_period_"+d.start);R.ia(d.node,"EventStream").forEach(a.jh.bind(a,d.start,d.duration));c=R.ia(d.node,"AdaptationSet").map(a.hh.bind(a,b)).filter(Rb.qb);if(b.Tb){b=[];for(var e=r(c),f=e.next();!f.done;f=e.next()){f=r(f.value.sh);for(var h=f.next();!h.done;h=f.next())b.push(h.value)}if(b.length!=(new Set(b)).size)throw new F(2,4,4018);
}var k=c.filter(function(a){return!a.xe});c.filter(function(a){return a.xe}).forEach(function(a){var b=a.xe.split(" ");k.forEach(function(c){b.includes(c.id)&&c.streams.forEach(function(b){b.trickModeVideo=a.streams.find(function(a){return Vc(b.codecs)[0]==Vc(a.codecs)[0]})})})});b=Ug(k,"video");e=Ug(k,"audio");if(!b.length&&!e.length)throw new F(2,4,4004);c=a.g.disableAudio;if(!e.length||c)e=[null];c=a.g.disableVideo;if(!b.length||c)b=[null];c=[];for(f=0;f<e.length;f++)for(h=0;h<b.length;h++)Vg(a,
e[f],b[h],c);b=[];if(!a.g.disableText)for(a=Ug(k,"text"),e=0;e<a.length;e++)b.push.apply(b,a[e].streams);return{startTime:d.start,textStreams:b,variants:c}}function Ug(a,b){return a.filter(function(a){return a.contentType==b})}
function Vg(a,b,c,d){if(b||c)if(b&&c){var e=b.drmInfos;var f=c.drmInfos;if(e.length&&f.length?0<Nd(e,f).length:1){f=Nd(b.drmInfos,c.drmInfos);for(var h=0;h<b.streams.length;h++)for(var k=0;k<c.streams.length;k++)e=(c.streams[k].bandwidth||0)+(b.streams[h].bandwidth||0),e={id:a.s++,language:b.language,primary:b.Jd||c.Jd,audio:b.streams[h],video:c.streams[k],bandwidth:e,drmInfos:f,allowedByApplication:!0,allowedByKeySystem:!0},d.push(e)}}else for(f=b||c,h=0;h<f.streams.length;h++)e=f.streams[h].bandwidth||
0,e={id:a.s++,language:f.language||"und",primary:f.Jd,audio:b?f.streams[h]:null,video:c?f.streams[h]:null,bandwidth:e,drmInfos:f.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},d.push(e)}
m.hh=function(a,b){a.ua=Tg(b,a.Ha,null);if("image"==a.ua.contentType)return D.D("Skipping Image AdaptationSet",a.ua),null;var c=!1,d=R.ia(b,"Role"),e=d.map(function(a){return a.getAttribute("value")}).filter(Rb.qb),f=void 0,h="text"==a.ua.contentType;h&&(f="subtitle");for(var k=0;k<d.length;k++){var l=d[k].getAttribute("schemeIdUri");if(null==l||"urn:mpeg:dash:role:2011"==l)switch(l=d[k].getAttribute("value"),l){case "main":c=!0;break;case "caption":case "subtitle":f=l}}var n=null,p=!1;R.ia(b,"EssentialProperty").forEach(function(a){"http://dashif.org/guidelines/trickmode"==
a.getAttribute("schemeIdUri")?n=a.getAttribute("value"):p=!0});k=R.ia(b,"Accessibility");var q=new Map;d={};k=r(k);for(l=k.next();!l.done;d={qc:d.qc},l=k.next()){var t=l.value;l=t.getAttribute("schemeIdUri");t=t.getAttribute("value");"urn:scte:dash:cc:cea-608:2015"==l||"urn:scte:dash:cc:cea-708:2015"==l?(d.qc=1,null!=t?t.split(";").forEach(function(a){return function(b){if(b.includes("=")){b=b.split("=");var c=b[0].startsWith("CC")?b[0]:"CC"+b[0];b=b[1].split(",")[0].split(":").pop()}else c="CC"+
a.qc,a.qc+=2;q.set(c,E(b))}}(d)):q.set("CC1","und")):"urn:mpeg:dash:role:2011"==l&&null!=t&&(e.push(t),"captions"==t&&(f="caption"))}if(p)return null;d=R.ia(b,"ContentProtection");var x=Wf(d,this.g.dash.customScheme,this.g.dash.ignoreDrmInfo);d=E(b.getAttribute("lang")||"und");k=b.getAttribute("label");(l=R.ia(b,"Label"))&&l.length&&(l=l[0],l.textContent&&(k=l.textContent));l=R.ia(b,"Representation");e=l.map(this.kh.bind(this,a,x,f,d,k,c,e,q)).filter(function(a){return!!a});if(0==e.length){if(this.g.dash.ignoreEmptyAdaptationSet||
h)return null;throw new F(2,4,4003);}a.ua.contentType&&"application"!=a.ua.contentType||(a.ua.contentType=Wg(e[0].mimeType,e[0].codecs),e.forEach(function(b){b.type=a.ua.contentType}));e.forEach(function(a){x.drmInfos.forEach(function(b){a.keyId&&b.keyIds.push(a.keyId)})});h=l.map(function(a){return a.getAttribute("id")}).filter(Rb.qb);return{id:a.ua.id||"__fake__"+this.s++,contentType:a.ua.contentType,language:d,Jd:c,streams:e,drmInfos:x.drmInfos,xe:n,sh:h}};
m.kh=function(a,b,c,d,e,f,h,k,l){a.L=Tg(l,a.ua,null);if(!Xg(a.L))return D.D("Skipping Representation",a.L),null;a.bandwidth=R.W(l,"bandwidth",R.dd)||0;var n=a.L.contentType;n="text"==n||"application"==n;try{var p=this.uh.bind(this);if(a.L.Cc)var q=yg(a,p);else if(a.L.tb)q=Bg(a,this.C);else if(a.L.Ec)q=Fg(a,p,this.C,!!this.i);else{var t=a.L.La,x=a.ma.duration||0;q={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0<=a&&a<x?1:null},getSegmentReference:function(a){return 1!=
a?null:new S(1,0,x,function(){return t},0,null)},initSegmentReference:null,Ja:0}}}catch(C){if(n&&4002==C.code)return null;throw C;}l=R.ia(l,"ContentProtection");l=Zf(l,this.g.dash.customScheme,b,this.g.dash.ignoreDrmInfo);return{id:this.s++,originalId:a.L.id,createSegmentIndex:q.createSegmentIndex,findSegmentPosition:q.findSegmentPosition,getSegmentReference:q.getSegmentReference,initSegmentReference:q.initSegmentReference,presentationTimeOffset:q.Ja,mimeType:a.L.mimeType,codecs:a.L.codecs,frameRate:a.L.frameRate,
pixelAspectRatio:a.L.pixelAspectRatio,bandwidth:a.bandwidth,width:a.L.width,height:a.L.height,kind:c,encrypted:0<b.drmInfos.length,keyId:l,language:d,label:e,type:a.ua.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:a.L.emsgSchemeIdUris,roles:h,channelsCount:a.L.Rd,audioSamplingRate:a.L.audioSamplingRate,closedCaptions:k}};
function Mg(a){u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:return D.info("Updating manifest..."),d=0,ya(c,2),v(c,Ng(a),4);case 4:d=c.G;Aa(c,3);break;case 2:e=Da(c),a.h&&(e.severity=1,a.h.onError(e));case 3:if(!a.h)return c["return"]();Og(a,d);w(c)}})})}function Og(a,b){0>a.F||a.u.U(Math.max(3,a.F-b,ub(a.H)))}
function Tg(a,b,c){b=b||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Rd:null,audioSamplingRate:null};c=c||b.La;var d=R.gc,e=R.Wf,f=R.ia(a,"BaseURL").map(R.Sc),h=a.getAttribute("contentType")||b.contentType,k=a.getAttribute("mimeType")||b.mimeType,l=a.getAttribute("codecs")||b.codecs;e=R.W(a,"frameRate",e)||b.frameRate;var n=a.getAttribute("sar")||b.pixelAspectRatio,p=R.ia(a,"InbandEventStream"),q=b.emsgSchemeIdUris.slice();p=r(p);for(var t=p.next();!t.done;t=p.next())t=
t.value.getAttribute("schemeIdUri"),q.includes(t)||q.push(t);p=R.ia(a,"AudioChannelConfiguration");p=Yg(p)||b.Rd;t=R.W(a,"audioSamplingRate",d)||b.audioSamplingRate;h||(h=Wg(k,l));return{La:Sb(c,f),Cc:R.Qc(a,"SegmentBase")||b.Cc,tb:R.Qc(a,"SegmentList")||b.tb,Ec:R.Qc(a,"SegmentTemplate")||b.Ec,width:R.W(a,"width",d)||b.width,height:R.W(a,"height",d)||b.height,contentType:h,mimeType:k,codecs:l,frameRate:e,pixelAspectRatio:n,emsgSchemeIdUris:q,id:a.getAttribute("id"),Rd:p,audioSamplingRate:t}}
function Yg(a){for(var b=0;b<a.length;++b){var c=a[b],d=c.getAttribute("schemeIdUri");if(d&&(c=c.getAttribute("value")))switch(d){case "urn:mpeg:dash:outputChannelPositionList:2012":return c.trim().split(/ +/).length;case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case "urn:dts:dash:audio_channel_configuration:2012":var e=parseInt(c,10);if(!e){D.D("Channel parsing failure! Ignoring scheme and value",d,c);continue}return e;case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":case "urn:dolby:dash:audio_channel_configuration:2011":e=
parseInt(c,16);if(!e){D.D("Channel parsing failure! Ignoring scheme and value",d,c);continue}for(a=0;e;)e&1&&++a,e>>=1;return a;default:D.D("Unrecognized audio channel scheme:",d,c)}}return null}
function Xg(a){var b=a.Cc?1:0;b+=a.tb?1:0;b+=a.Ec?1:0;if(0==b){if("text"==a.contentType||"application"==a.contentType)return!0;D.D("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',a);return!1}1!=b&&(D.D("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",
a),a.Cc?(D.info("Using SegmentBase by default."),a.tb=null):D.info("Using SegmentList by default."),a.Ec=null);return!0}
function Zg(a,b,c,d){b=Sb(b,[c]);b=Cc(b,a.g.retryParameters);b.method=d;b=a.h.networkingEngine.request(4,b);zc(a.l,b);return b.promise.then(function(a){if("HEAD"==d){if(!a.headers||!a.headers.date)return D.D("UTC timing response is missing","expected date header"),0;a=a.headers.date}else a=Wb(a.data);a=Date.parse(a);return isNaN(a)?(D.D("Unable to parse date from UTC timing response"),0):a-Date.now()})}
function Sg(a,b,c){c=c.map(function(a){return{scheme:a.getAttribute("schemeIdUri"),value:a.getAttribute("value")}});var d=a.g.dash.clockSyncUri;!c.length&&d&&c.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:d});return Rb.Uf(c,function(a){var c=a.scheme;a=a.value;switch(c){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":return Zg(this,b,a,"HEAD");case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return Zg(this,
b,a,"GET");case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":return c=Date.parse(a),isNaN(c)?0:c-Date.now();case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":return D.ha("NTP UTCTiming scheme is not supported"),Promise.reject();default:return D.ha("Unrecognized scheme in UTCTiming element",c),Promise.reject()}}.bind(a))["catch"](function(){D.ha("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!");
return 0})}m.jh=function(a,b,c){var d=R.gc,e=c.getAttribute("schemeIdUri")||"",f=c.getAttribute("value")||"",h=R.W(c,"timescale",d)||1;R.ia(c,"Event").forEach(function(c){var k=R.W(c,"presentationTime",d)||0,n=R.W(c,"duration",d)||0;k=k/h+a;n=k+n/h;null!=b&&(k=Math.min(k,a+b),n=Math.min(n,a+b));c={schemeIdUri:e,value:f,startTime:k,endTime:n,id:c.getAttribute("id")||"",eventElement:c};this.h.onTimelineRegionAdded(c)}.bind(this))};
m.uh=function(a,b,c){a=Kg(a,b,c,this.g.retryParameters);a=this.h.networkingEngine.request(1,a);zc(this.l,a);return a.promise.then(function(a){return a.data})};function Wg(a,b){return qe(Rc(a,b))?"text":a.split("/")[0]}U.be("mpd",Lg);U.kc("application/dash+xml",Lg);U.kc("video/vnd.mpeg.dash.mpd",Lg);function $g(a,b,c,d){this.h=a;this.type=b;this.g=c;this.segments=d||null}function ah(a,b,c,d){this.id=a;this.name=b;this.g=c;this.value=void 0===d?null:d}ah.prototype.toString=function(){function a(a){return a.name+"="+(isNaN(Number(a.value))?'"'+a.value+'"':a.value)}var b="#"+this.name,c=this.g?this.g.map(a):[];this.value&&c.unshift(this.value);0<c.length&&(b+=":"+c.join(","));return b};function bh(a,b){this.name=a;this.value=b}
ah.prototype.getAttribute=function(a){var b=this.g.filter(function(b){return b.name==a});return b.length?b[0]:null};function ch(a,b,c){return(a=a.getAttribute(b))?a.value:c||null}function dh(a,b){this.h=b;this.g=a};var eh={Ub:function(a,b){return a.filter(function(a){return a.name==b})},Bb:function(a,b){var c=eh.Ub(a,b);return c.length?c[0]:null},xd:function(a,b,c){return a.filter(function(a){var d=a.getAttribute("TYPE");a=a.getAttribute("GROUP-ID");return d.value==b&&a.value==c})},sd:function(a,b){return Sb([a],[b])[0]},Fd:function(a){return/^#(?!EXT)/m.test(a)}};function fh(a){this.h=a;this.g=0}function gh(a){hh(a,/[ \t]+/gm)}function hh(a,b){b.lastIndex=a.g;var c=b.exec(a.h);c=null==c?null:{position:c.index,length:c[0].length,xh:c};if(a.g==a.h.length||null==c||c.position!=a.g)return null;a.g+=c.length;return c.xh}function ih(a){return a.g==a.h.length?null:(a=hh(a,/[^ \t\n]*/gm))?a[0]:null};function jh(){this.g=0}
function kh(a,b,c){b=Wb(b);b=b.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var d=b.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(d[0]))throw new F(2,4,4015);b=0;for(var e=1;e<d.length;e++)if(!eh.Fd(d[e])){var f=lh(a,d[e]);--a.g;if(mh.includes(f.name)){b=1;break}else"EXT-X-STREAM-INF"==f.name&&(e+=1)}e=[];for(f=1;f<d.length;)if(eh.Fd(d[f]))f+=1;else{var h=lh(a,d[f]);if(nh.includes(h.name)){if(1!=b)throw new F(2,4,4017);d=d.splice(f,d.length-f);a=oh(a,c,d,e);return new $g(c,b,e,a)}e.push(h);f+=1;"EXT-X-STREAM-INF"==
h.name&&(h.g.push(new bh("URI",d[f])),f+=1)}return new $g(c,b,e)}function oh(a,b,c,d){var e=[],f=[];c.forEach(function(c){if(/^(#EXT)/.test(c))c=lh(a,c),mh.includes(c.name)?d.push(c):f.push(c);else{if(eh.Fd(c))return[];c=eh.sd(b,c.trim());e.push(new dh(c,f));f=[]}});return e}
function lh(a,b){var c=a.g++,d=b.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!d)throw new F(2,4,4016,b);var e=d[1],f=d[2];d=[];var h;if(f){f=new fh(f);var k;(k=hh(f,/^([^,=]+)(?:,|$)/g))&&(h=k[1]);for(var l=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;k=hh(f,l);)d.push(new bh(k[1],k[2]||k[3]))}return new ah(c,e,d,h)}var mh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),nh="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function ph(a){try{var b=ph.parse(a);return nc({uri:a,Xd:a,data:b.data,headers:{"content-type":b.contentType}})}catch(c){return lc(c)}}A("shaka.net.DataUriPlugin",ph);
ph.parse=function(a){var b=a.split(":");if(2>b.length||"data"!=b[0])throw D.error("Bad data URI, failed to parse scheme"),new F(2,1,1004,a);b=b.slice(1).join(":").split(",");if(2>b.length)throw D.error("Bad data URI, failed to extract encoding and MIME type"),new F(2,1,1004,a);var c=b[0];a=window.decodeURIComponent(b.slice(1).join(","));b=c.split(";");c=b[0];var d=!1;1<b.length&&"base64"==b[b.length-1]&&(d=!0,b.pop());return{data:d?I.cb(a).buffer:$b(a),contentType:c}};Bc("data",ph);function qh(){var a=this;this.g=this.j=null;this.ea=1;this.M=new Map;this.V=new Set;this.h=new Map;this.i=null;this.H="";this.F=new jh;this.R=0;this.s=new K(function(){rh(a)});this.l=sh;this.C=null;this.K=0;this.O=Infinity;this.u=new yc;this.P=[];this.B=new Map;this.ba=!1}A("shaka.hls.HlsParser",qh);m=qh.prototype;m.configure=function(a){this.g=a};
m.start=function(a,b){var c=this;return u(function e(){var f,h;return y(e,function(e){switch(e.A){case 1:return c.j=b,v(e,th(c,Cc([a],c.g.retryParameters),0),2);case 2:return f=e.G,c.H=f.uri,v(e,uh(c,f.data),3);case 3:return h=c.R,0<h&&c.s.U(h),e["return"](c.C)}})})};m.stop=function(){this.s&&(this.s.stop(),this.s=null);var a=[];this.u&&(a.push(this.u.destroy()),this.u=null);this.g=this.j=null;this.M.clear();this.V.clear();this.h.clear();this.C=null;return Promise.all(a)};
m.update=function(){if(this.l!=vh.xb){for(var a=[],b=r(this.h.values()),c=b.next();!c.done;c=b.next())a.push(wh(this,c.value));return Promise.all(a)}};
function wh(a,b){return u(function d(){var e,f,h,k,l,n,p,q,t,x,C;return y(d,function(d){switch(d.A){case 1:return e=eh,f=vh,h=b.Of,v(d,th(a,Cc([h],a.g.retryParameters),0),2);case 2:k=d.G;l=kh(a.F,k.data,k.uri);if(1!=l.type)throw new F(2,4,4017);p=(n=e.Bb(l.g,"EXT-X-MEDIA-SEQUENCE"))?Number(n.value):0;q=b.stream;return v(d,xh(a,b.pd,l,p,q.mimeType,q.codecs),3);case 3:t=d.G;b.Dc.g=t;x=t[t.length-1];if(C=e.Bb(l.g,"EXT-X-ENDLIST"))yh(a,f.xb),a.i.Ya(x.endTime);w(d)}})})}m.onExpirationUpdated=function(){};
function uh(a,b){return u(function d(){var e,f,h,k,l,n,p,q,t,x,C;return y(d,function(d){switch(d.A){case 1:e=kh(a.F,b,a.H);if(0!=e.type)throw new F(2,4,4022);return v(d,zh(a,e),2);case 2:f=d.G;if(!a.j)throw new F(2,7,7001);if(a.ba&&0==f.variants.length)throw D.info("No stream is created, because we don't support AES-128","encryption yet"),new F(2,4,4034);a.j.filterAllPeriods([f]);h=Infinity;k=0;l=Infinity;for(var H=r(a.h.values()),z=H.next();!z.done;z=H.next())n=z.value,h=Math.min(h,n.Nd),k=Math.max(k,
n.Nd),"text"!=n.stream.type&&(l=Math.min(l,n.duration));a.l!=vh.xb?(a.i=new V(0,3*a.K),a.i.Fc(!1)):(a.i=new V(null,0),a.i.Fc(!0));Ah(a);if(a.l!=vh.xb){a.R=a.O;p=vh;a.l==p.Be&&(q=a.i.fd,isNaN(a.g.availabilityWindowOverride)||(q=a.g.availabilityWindowOverride),a.i.qe(q));for(t=0;95443.7176888889<=k;)t+=95443.7176888889,k-=95443.7176888889;if(t)for(D.debug("Offsetting live streams by",t,"to compensate for rollover"),H=r(a.h.values()),z=H.next();!z.done;z=H.next())x=z.value,95443.7176888889>x.Nd?(D.N("Offset applied to",
x.stream.type),x.stream.presentationTimeOffset=-t,x.Dc.offset(t)):D.N("Offset NOT applied to",x.stream.type)}else for(a.i.Ya(l),a.i.offset(-h),H=r(a.h.values()),z=H.next();!z.done;z=H.next())C=z.value,C.stream.presentationTimeOffset=h,C.Dc.offset(-h),ng(C.Dc,l);a.C={presentationTimeline:a.i,periods:[f],offlineSessionIds:[],minBufferTime:0};w(d)}})})}
function zh(a,b){return u(function d(){var e,f,h,k,l,n,p,q,t,x,C,z;return y(d,function(d){switch(d.A){case 1:return e=eh,f=Rb,h=b.g,k=e.Ub(b.g,"EXT-X-MEDIA"),l=k.filter(function(a){return"SUBTITLES"==Bh(a,"TYPE")}.bind(a)),n=l.map(function(a){var b=this;return u(function ka(){var d;return y(ka,function(e){switch(e.A){case 1:if(b.g.disableText)return e["return"](null);ya(e,2);return v(e,Ch(b,a),4);case 4:return e["return"](e.G);case 2:d=Da(e);if(b.g.hls.ignoreTextStreamFailures)return e["return"](null);
throw d;}})})}.bind(a)),p=k.filter(function(a){return"CLOSED-CAPTIONS"==Bh(a,"TYPE")}),Dh(a,p),v(d,Promise.all(n),2);case 2:return q=d.G,t=e.Ub(h,"EXT-X-STREAM-INF"),x=t.map(function(a){return Eh(this,a,b)}.bind(a)),v(d,Promise.all(x),3);case 3:return C=d.G,z=C.reduce(f.rd,[]),z=z.filter(function(a){return null!=a}),d["return"]({startTime:0,variants:z,textStreams:q.filter(function(a){return null!=a})})}})})}
function Eh(a,b,c){return u(function e(){var f,h,k,l,n,p,q,t,x,C,z,H,J,T,Ba,ka,gb,Ra,va,hb,oa,Ca,Sa,Ya,Fa,ib,wb,tc,Mb;return y(e,function(e){switch(e.A){case 1:f=Ub;h=eh;k=[];a.g.disableVideo||k.push("avc1.42E01E");a.g.disableAudio||k.push("mp4a.40.2");l=k.join(",");n=ch(b,"CODECS",l);p=Fh(n.split(/\s*,\s*/));q=b.getAttribute("RESOLUTION");x=t=null;C=ch(b,"FRAME-RATE");z=Number(ch(b,"AVERAGE-BANDWIDTH"))||Number(Bh(b,"BANDWIDTH"));q&&(H=q.value.split("x"),t=H[0],x=H[1]);J=h.Ub(c.g,"EXT-X-MEDIA");
J=J.filter(function(a){return"CLOSED-CAPTIONS"!=Bh(a,"TYPE")});J=J.filter(function(a){var b=ch(a,"URI")||"";return"SUBTITLES"==(ch(a,"TYPE")||"")||""!=b});T=ch(b,"AUDIO");Ba=ch(b,"VIDEO");T?J=h.xd(J,"AUDIO",T):Ba&&(J=h.xd(J,"VIDEO",Ba));if(ka=Gh(f.Pa,p)){if(gb=ch(b,"SUBTITLES"))if(Ra=h.xd(J,"SUBTITLES",gb),Ra.length&&(va=a.M.get(Ra[0].id)))va.stream.codecs=ka;uc(p,ka)}hb=J.map(function(a){return Hh(this,a,p)}.bind(a));oa=[];Ca=[];return v(e,Promise.all(hb),2);case 2:Ya=e.G;Ya=Ya.filter(function(a){return null!=
a});T?oa=Ya:Ba&&(Ca=Ya);D.debug("Guessing stream type for",b.toString());ib=!1;oa.length||Ca.length?oa.length?(tc=Bh(b,"URI"),Mb=oa[0].pd,tc==Mb?(D.debug("Guessing audio-only."),Fa=f.nc,ib=!0):(D.debug("Guessing video."),Fa=f.wb)):(D.debug("Guessing audio."),Fa=f.nc):1==p.length?(wb=Gh(f.wb,p),q||C||wb?(D.debug("Guessing video-only."),Fa=f.wb):(D.debug("Guessing audio-only."),Fa=f.nc)):(D.debug("Guessing multiplexed audio+video."),Fa=f.wb,p=[p.join(",")]);if(ib){e.I(3);break}return v(e,Ih(a,b,p,Fa),
4);case 4:Sa=e.G;case 3:if(Sa)Sa.stream.type==f.nc?oa=[Sa]:Ca=[Sa];else if(null===Sa)return D.debug("streamInfo is null"),e["return"]([]);Ca&&Jh(Ca);oa&&Jh(oa);return e["return"](Kh(a,oa,Ca,z,t,x,C))}})})}function Jh(a){a.forEach(function(a){if(a){var b=a.stream.codecs.split(",");b=b.filter(function(a){return"mp4a.40.34"!=a});a.stream.codecs=b.join(",")}})}
function Kh(a,b,c,d,e,f,h){c.forEach(function(a){if(a=a.stream)a.width=Number(e)||void 0,a.height=Number(f)||void 0,a.frameRate=Number(h)||void 0}.bind(a));var k=a.g?a.g.disableAudio:!1;if(!b.length||k)b=[null];k=a.g?a.g.disableVideo:!1;if(!c.length||k)c=[null];k=[];b=r(b);for(var l=b.next();!l.done;l=b.next()){l=l.value;for(var n=r(c),p=n.next();!p.done;p=n.next()){var q=p.value;p=l?l.stream:null;var t=q?q.stream:null,x=l?l.drmInfos:null,C=q?q.drmInfos:null;q=(q?q.pd:"")+" - "+(l?l.pd:"");var z=
void 0;if(p&&t)if(x.length&&C.length?0<Nd(x,C).length:1)z=Nd(x,C);else{D.D("Incompatible DRM info in HLS variant.  Skipping.");continue}else p?z=x:t&&(z=C);a.V.has(q)?D.debug("Skipping variant which only differs in text streams."):(p=Lh(a,p,t,d,z),k.push(p),a.V.add(q))}}return k}function Lh(a,b,c,d,e){return{id:a.ea++,language:b?b.language:"und",primary:!!b&&b.primary||!!c&&c.primary,audio:b,video:c,bandwidth:d,drmInfos:e,allowedByApplication:!0,allowedByKeySystem:!0}}
function Ch(a,b){return u(function d(){var e;return y(d,function(d){switch(d.A){case 1:return Bh(b,"TYPE"),v(d,Hh(a,b,[]),2);case 2:return e=d.G,d["return"](e.stream)}})})}function Dh(a,b){for(var c=r(b),d=c.next();!d.done;d=c.next()){d=d.value;Bh(d,"TYPE");var e=ch(d,"LANGUAGE")||"und";e=E(e);var f=Bh(d,"GROUP-ID");d=Bh(d,"INSTREAM-ID");a.B.get(f)||a.B.set(f,new Map);a.B.get(f).set(d,e)}}
function Hh(a,b,c){return u(function e(){var f,h,k,l,n,p,q,t,x,C,z;return y(e,function(e){switch(e.A){case 1:f=Bh(b,"URI");if(a.h.has(f))return e["return"](a.h.get(f));h=Bh(b,"TYPE").toLowerCase();k=Ub;"subtitles"==h&&(h=k.Pa);l=E(ch(b,"LANGUAGE","und"));n=ch(b,"NAME");p=b.getAttribute("DEFAULT");q="YES"==p;t=ch(b,"CHANNELS");if("audio"==h)if(t){var H=t.split("/")[0];H=parseInt(H,10)}else H=null;else H=null;x=H;C=ch(b,"CHARACTERISTICS");return v(e,Mh(a,f,c,h,l,q,n,x,null,C),2);case 2:z=e.G;if(a.h.has(f))return e["return"](a.h.get(f));
if(null==z)return e["return"](null);a.M.set(b.id,z);a.h.set(f,z);return e["return"](z)}})})}
function Ih(a,b,c,d){return u(function f(){var h,k,l,n,p;return y(f,function(f){switch(f.A){case 1:h=Ub;k=Bh(b,"URI");if(a.h.has(k))return f["return"](a.h.get(k));l=ch(b,"CLOSED-CAPTIONS");n=null;d==h.wb&&l&&"NONE"!=l&&(n=a.B.get(l));return v(f,Mh(a,k,c,d,"und",!1,null,null,n,null),2);case 2:p=f.G;if(null==p)return f["return"](null);if(a.h.has(k))return f["return"](a.h.get(k));a.h.set(k,p);return f["return"](p)}})})}
function Mh(a,b,c,d,e,f,h,k,l,n){return u(function q(){var t,x,C,z,H,J,T,Ba,ka,gb,Ra,va,hb,oa,Ca,Sa,Ya,Fa,ib,wb,tc,Mb,Nb,Ob,xb,Ma,yb,Na;return y(q,function(q){switch(q.A){case 1:return t=eh,x=t.sd(a.H,b),v(q,th(a,Cc([x],a.g.retryParameters),0),2);case 2:C=q.G;x=C.uri;z=kh(a.F,C.data,x);if(1!=z.type)throw new F(2,4,4017);H=[];z.segments.forEach(function(a){a=t.Ub(a.h,"EXT-X-KEY");H.push.apply(H,a)});J=!1;T=[];Ba=null;for(var Ta=r(H),sa=Ta.next();!sa.done;sa=Ta.next())if(ka=sa.value,gb=Bh(ka,"METHOD"),
"NONE"!=gb){J=!0;if("AES-128"==gb)return D.D("Unsupported HLS Encryption",gb),a.ba=!0,q["return"](null);Ra=Bh(ka,"KEYFORMAT");(hb=(va=Nh[Ra])?va(ka):null)?(hb.keyIds.length&&(Ba=hb.keyIds[0]),T.push(hb)):D.D("Unsupported HLS KEYFORMAT",Ra)}if(J&&!T.length)throw new F(2,4,4026);Oh(a,z);oa=Ph(d,c);return v(q,Qh(a,d,oa,z),3);case 3:return Ca=q.G,Rh.includes(Ca)&&(oa=""),Ya=(Sa=t.Bb(z.g,"EXT-X-MEDIA-SEQUENCE"))?Number(Sa.value):0,ya(q,4),v(q,xh(a,b,z,Ya,Ca,oa),6);case 6:Fa=q.G;Aa(q,5);break;case 4:ib=
Da(q);if(4035==ib.code)return D.ha("Skipping unsupported HLS stream",Ca,b),q["return"](null);throw ib;case 5:wb=Fa[0].startTime;tc=Fa[Fa.length-1].endTime;Mb=tc-wb;Nb=new mg(Fa);Ob=Sh(z);xb=void 0;"text"==d&&(xb="subtitle");Ma=[];if(n)for(Ta=r(n.split(",")),sa=Ta.next();!sa.done;sa=Ta.next())yb=sa.value,Ma.push(yb);Na={id:a.ea++,originalId:h,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:Nb.find.bind(Nb),getSegmentReference:Nb.get.bind(Nb),initSegmentReference:Ob,presentationTimeOffset:0,
mimeType:Ca,codecs:oa,kind:xb,encrypted:J,keyId:Ba,language:e,label:h,type:d,primary:f,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Ma,channelsCount:k,audioSamplingRate:null,closedCaptions:l};return q["return"]({stream:Na,Dc:Nb,drmInfos:T,pd:b,Of:x,Nd:wb,Xh:tc,duration:Mb})}})})}
function Oh(a,b){var c=vh,d=eh.Bb(b.g,"EXT-X-PLAYLIST-TYPE"),e=eh.Bb(b.g,"EXT-X-ENDLIST");e=d&&"VOD"==d.value||e;d=d&&"EVENT"==d.value&&!e;d=!e&&!d;e?yh(a,c.xb):(d?yh(a,c.Be):yh(a,c.Jf),c=Th(b.g,"EXT-X-TARGETDURATION"),c=Number(c.value),a.K=Math.max(c,a.K),a.O=Math.min(c,a.O))}
function Sh(a){var b=eh.Ub(a.g,"EXT-X-MAP");if(!b.length)return null;if(1<b.length)throw new F(2,4,4020);b=b[0];var c=Bh(b,"URI"),d=eh.sd(a.h,c);a=0;c=null;if(b=ch(b,"BYTERANGE"))a=b.split("@"),b=Number(a[0]),a=Number(a[1]),c=a+b-1;return new jg(function(){return[d]},a,c)}
function Uh(a,b,c,d){var e=b.h,f=b.g;b=Th(e,"EXTINF").value.split(",");b=d+Number(b[0]);var h=0,k=null;if(e=eh.Bb(e,"EXT-X-BYTERANGE"))h=e.value.split("@"),e=Number(h[0]),h=h[1]?Number(h[1]):a.g+1,k=h+e-1;return new S(c,d,b,function(){return[f]},h,k)}function Ah(a){a.i&&(a.P.forEach(function(b){a.i.dc(b,0)}),a.P=[])}
function xh(a,b,c,d,e,f){return u(function k(){var l,n,p,q,t,x,C,z,H,J,T;return y(k,function(k){switch(k.A){case 1:return l=c.segments,n=[],p=l[0].g,q=Uh(null,l[0],d,0),t=Sh(c),v(k,Vh(a,b,t,q,e,f),2);case 2:x=k.G;D.debug("First segment",p.split("/").pop(),"starts at",x);for(var ka=0;ka<l.length;++ka)C=l[ka],z=n[n.length-1],H=0==ka?x:z.endTime,J=d+ka,T=Uh(z,C,J,H),n.push(T);a.P.push(n);Ah(a);return k["return"](n)}})})}
function Wh(a,b){return u(function d(){var e,f,h,k,l,n;return y(d,function(d){switch(d.A){case 1:e=1;f=Kg(b.i(),b.h,b.h+2048-1,a.g.retryParameters);h=Kg(b.i(),b.h,b.g,a.g.retryParameters);if(a.g.hls.useFullSegmentsForStartTime)return d["return"](th(a,h,e));ya(d,2);return v(d,th(a,f,e),4);case 4:return k=d.G,d["return"](k);case 2:l=Da(d);if(7001==l.code)throw l;D.ha("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",
f.uris[0]);return v(d,th(a,h,e),5);case 5:return n=d.G,d["return"](n)}})})}
function Vh(a,b,c,d,e,f){return u(function k(){var l,n,p,q,t,x,C,z,H;return y(k,function(k){switch(k.A){case 1:if(a.C){l=a.h.get(b);n=l.Dc;if(p=n.get(d.position))return D.N("Found segment start time in previous manifest"),k["return"](p.startTime);D.debug("Unable to find segment start time in previous manifest!")}D.N("Fetching segment to find start time");e=e.toLowerCase();if(Rh.includes(e))throw D.ha("Raw formats are not yet supported.  Skipping "+e),new F(1,4,4035);if("video/webm"==e)throw D.ha("WebM in HLS is not yet supported.  Skipping."),
new F(1,4,4035);if("video/mp4"!=e&&"audio/mp4"!=e){k.I(2);break}q=[Wh(a,d)];c&&q.push(Wh(a,c));return v(k,Promise.all(q),3);case 3:return t=k.G,x=t[0],C=t[1]||t[0],k["return"](Xh(b,x.uri,x.data,C.data));case 2:if("video/mp2t"!=e){k.I(4);break}return v(k,Wh(a,d),5);case 5:return z=k.G,k["return"](Yh(b,z.uri,z.data));case 4:if("application/mp4"!=e&&!e.startsWith("text/")){k.I(6);break}return v(k,Wh(a,d),7);case 7:return H=k.G,k["return"](Zh(e,f,H.data));case 6:throw new F(2,4,4030,b);}})})}
function Xh(a,b,c,d){var e=0;(new Q).box("moov",Pf).box("trak",Pf).box("mdia",Pf).Da("mdhd",function(a){a.reader.Z(0==a.version?8:16);e=a.reader.S();a.parser.stop()}).parse(d,!0);if(!e)throw D.error("Unable to find timescale in init segment!"),new F(2,4,4030,a,b);var f=0,h=!1;(new Q).box("moof",Pf).box("traf",Pf).Da("tfdt",function(a){f=(0==a.version?a.reader.S():a.reader.jc())/e;h=!0;a.parser.stop()}).parse(c,!0);if(!h)throw new F(2,4,4030,a,b);return f}
function Yh(a,b,c){function d(){f.seek(h+188);k=f.Ia();71!=k&&(f.seek(h+192),k=f.Ia());71!=k&&(f.seek(h+204),k=f.Ia());71!=k&&e();f.sf(1)}function e(){throw new F(2,4,4030,a,b);}for(var f=new P(new DataView(c),0),h=0,k=0;;)if(h=f.za(),k=f.Ia(),71!=k&&e(),c=f.Bc(),8191==(c&8191))d();else if(c&16384)if(c=(f.Ia()&48)>>4,0!=c&&2!=c||e(),3==c&&(c=f.Ia(),f.Z(c)),1!=f.S()>>8)d();else{f.Z(3);c=f.Ia()>>6;0!=c&&1!=c||e();0==f.Ia()&&e();c=f.Ia();var l=f.Bc(),n=f.Bc();return(1073741824*((c&14)>>1)+((l&65534)<<
14|(n&65534)>>1))/9E4}else d()}function Zh(a,b,c){a=Rc(a,b);if(!qe(a))return 0;b=new oe(null);re(b,a);return b.Vc(c)}function Fh(a){var b=new Set,c=[];a=r(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=Vc(d)[0];b.has(e)?D.debug("Ignoring duplicate codec"):(c.push(d),b.add(e))}return c}function Gh(a,b){for(var c=$h[a],d=0;d<c.length;d++)for(var e=0;e<b.length;e++)if(c[d].test(b[e].trim()))return b[e].trim();return"text"==a?"":null}
function Ph(a,b){if(1==b.length)return b[0];var c=Gh(a,b);if(null!=c)return c;throw new F(2,4,4025,b);}
function Qh(a,b,c,d){return u(function f(){var h,k,l,n,p,q,t,x,C,z;return y(f,function(f){switch(f.A){case 1:h=Ub;k=d.segments[0].g;l=new Ab(k);n=l.Ga.split(".").pop();p=ai[b];if(q=p[n])return f["return"](q);if(b==h.Pa)return c&&"vtt"!=c&&"wvtt"!=c?f["return"]("application/mp4"):f["return"]("text/vtt");t=Cc([k],a.g.retryParameters);t.method="HEAD";return v(f,th(a,t,1),2);case 2:return x=f.G,C=x.headers["content-type"],C?f["return"](C.split(";")[0]):(z=p.mp4,f["return"](z))}})})}
function Bh(a,b){var c=a.getAttribute(b);if(!c)throw new F(2,4,4023,b);return c.value}function Th(a,b){var c=eh.Bb(a,b);if(!c)throw new F(2,4,4024,b);return c}
var $h={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},Rh=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],ai={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",
cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function rh(a){u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:D.info("Updating manifest...");if(!a.j)return c["return"]();ya(c,2);return v(c,a.update(),4);case 4:d=a.R;a.s.U(d);Aa(c,0);break;case 2:e=Da(c);if(!a.j)return c["return"]();e.severity=1;a.j.onError(e);a.s.U(.1);w(c)}})})}
function yh(a,b){a.l=b;a.i&&a.i.Fc(a.l==vh.xb);a.l!=vh.xb||a.s.stop()}function th(a,b,c){if(!a.u)throw new F(2,7,7001);b=a.j.networkingEngine.request(c,b);zc(a.u,b);return b.promise}
var Nh={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(a){var b=Bh(a,"METHOD");Pe("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227");var c=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(!c.includes(b))return D.error("Widevine in HLS is only supported with [",c.join(", "),"], not",b),null;b=Bh(a,"URI");b=ph.parse(b);b=new Uint8Array(b.data);b=Tb("com.widevine.alpha",[{initDataType:"cenc",initData:b}]);if(a=ch(a,"KEYID"))b.keyIds=[a.toLowerCase().substr(2)];
return b}},sh="VOD",vh={xb:sh,Jf:"EVENT",Be:"LIVE"};U.be("m3u8",qh);U.kc("application/x-mpegurl",qh);U.kc("application/vnd.apple.mpegurl",qh);function bi(){this.g=new Map}function ci(a,b,c){di(a,b).text=c}function di(a,b){a.g.has(b)||a.g.set(b,new ei);return a.g.get(b)}function ei(){this.text=this.variant=null};function fi(a,b){this.g=a;this.h=new Set([a]);b=b||[];for(var c=r(b),d=c.next();!d.done;d=c.next())this.add(d.value)}fi.prototype.add=function(a){if(gi(this.g,a))return this.h.add(a),!0;D.D("Rejecting variant - not compatible with root.");return!1};
function gi(a,b){var c;if(!(c=!!a.audio!=!!b.audio||!!a.video!=!!b.video||a.language!=b.language)&&(c=a.audio&&b.audio)){c=a.audio;var d=b.audio;c=!(c.channelsCount==d.channelsCount&&hi(c,d)&&ii(c.roles,d.roles))}!c&&(c=a.video&&b.video)&&(c=a.video,d=b.video,c=!(hi(c,d)&&ii(c.roles,d.roles)));return c?!1:!0}fi.prototype.values=function(){return this.h.values()};
function hi(a,b){if(a.mimeType!=b.mimeType)return!1;var c=a.codecs.split(",").map(function(a){return Vc(a)[0]}),d=b.codecs.split(",").map(function(a){return Vc(a)[0]});if(c.length!=d.length)return!1;c.sort();d.sort();for(var e=0;e<c.length;e++)if(c[e]!=d[e])return!1;return!0}function ii(a,b){var c=new Set(a),d=new Set(b);c["delete"]("main");d["delete"]("main");if(c.size!=d.size)return!1;c=r(c);for(var e=c.next();!e.done;e=c.next())if(!d.has(e.value))return!1;return!0};function ji(a){this.g=a;this.h=new ki(a.language,"",a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,"")}ji.prototype.create=function(a){var b=this,c=a.filter(function(a){return gi(b.g,a)});return c.length?new fi(c[0],c):this.h.create(a)};function ki(a,b,c,d){this.i=a;this.j=b;this.g=c;this.h=void 0===d?"":d}
ki.prototype.create=function(a){var b=[];b=li(a,this.i);var c=a.filter(function(a){return a.primary});b=b.length?b:c.length?c:a;a=mi(b,this.j);a.length?b=a:D.D("No exact match for variant role could be found.");this.g&&(a=N.Oe(b,this.g),a.length?b=a:D.D("No exact match for the channel count could be found."));this.h&&(a=ni(b,this.h),a.length?b=a:D.D("No exact match for variant label could be found."));a=new fi(b[0]);b=r(b);for(c=b.next();!c.done;c=b.next())c=c.value,gi(a.g,c)&&a.add(c);return a};
function li(a,b){var c=E(b),d=nb(c,a.map(function(a){return mb(a)}));return d?a.filter(function(a){return d==mb(a)}):[]}function mi(a,b){return a.filter(function(a){return a.audio?b?a.audio.roles.includes(b):0==a.audio.roles.length:!1})}function ni(a,b){return a.filter(function(a){return a.audio?a.audio.label.toLowerCase()==b.toLowerCase():!1})};function oi(){this.g=pi;this.h=(new Map).set(pi,2).set(qi,1)}function ri(a,b,c){a.h.set(pi,c).set(qi,b)}var qi=0,pi=1;function si(a,b){this.l=a;this.s=ti(a);this.g=a.g.currentTime;this.j=Date.now()/1E3;this.h=!1;this.u=b;this.i=function(){}}si.prototype.release=function(){this.l=null;this.i=function(){}};function ui(a,b){a.i=b}function vi(a){this.g=a}function ti(a){if(a.g.paused||0==a.g.playbackRate||0==a.g.buffered.length)var b=!1;else a:{b=a.g.buffered;a=a.g.currentTime;for(var c=0;c<b.length;c++){var d=b.start(c),e=b.end(c);if(!(a<d-.1||a>e-.5)){b=!0;break a}}b=!1}return b};function wi(a,b,c,d,e){var f=this;this.g=a;this.H=b;this.F=c;this.B=e;this.j=new M;this.u=!1;this.C=a.readyState;this.i=!1;this.h=d;this.s=!1;this.j.v(a,"waiting",function(){return xi(f)});this.l=(new K(function(){xi(f)})).Na(.25)}wi.prototype.release=function(){this.j&&(this.j.release(),this.j=null);null!=this.l&&(this.l.stop(),this.l=null);this.h&&(this.h.release(),this.h=null);this.g=this.H=this.B=null};wi.prototype.Vd=function(){this.s=!0;xi(this)};
function xi(a){if(0!=a.g.readyState){if(a.g.seeking){if(!a.u)return}else a.u=!1;if(!a.g.paused||0==a.g.currentTime){a.g.readyState!=a.C&&(a.i=!1,a.C=a.g.readyState);var b;if(!(b=!a.h)){b=a.h;var c=b.l,d=ti(c),e=c.g.currentTime,f=Date.now()/1E3;if(b.g!=e||b.s!=d)b.j=f,b.g=e,b.s=d,b.h=!1;e=f-b.j;if(d=e>=b.u&&d&&!b.h)b.i(b.g,e),b.h=!0,b.g=c.g.currentTime;b=!d}if(b){f=a.F.smallGapLimit;b=a.g.currentTime;c=a.g.buffered;a:{if(c&&c.length&&!(1==c.length&&1E-6>c.end(0)-c.start(0)))for(d=navigator.userAgent.match(/Edge\//)||
$c("Trident/")||Zc()||$c("CrKey")?.5:.1,e=0;e<c.length;e++)if(c.start(e)>b&&(0==e||c.end(e-1)-b<=d)){d=e;break a}d=null}if(null!=d&&(0!=d||a.s)){e=c.start(d);var h=a.H.fb();if(!(e>=h)){h=e-b;f=h<=f;var k=!1;if(!(.001>h)){if(!f&&!a.i){a.i=!0;var l=new B("largegap",{currentTime:b,gapSize:h});l.cancelable=!0;a.B(l);a.F.jumpLargeGaps&&!l.defaultPrevented?k=!0:D.info("Ignoring large gap at",b,"size",h)}if(f||k)0==d?D.info("Jumping forward",h,"seconds because of gap before start time of",e):D.info("Jumping forward",
h,"seconds because of gap starting at",c.end(d-1),"and ending at",e),a.g.currentTime=e}}}}}}};function yi(a){var b=this;this.i=a;this.g=new Set;this.h=(new K(function(){zi(b,!1)})).Na(.25)}yi.prototype.release=function(){this.h.stop();for(var a=r(this.g),b=a.next();!b.done;b=a.next())b.value.release();this.g.clear()};function zi(a,b){for(var c=r(a.g),d=c.next();!d.done;d=c.next())d.value.l(a.i.currentTime,b)};function Ai(a){var b=[];a=r(a);for(var c=a.next();!c.done;c=a.next()){c=r(c.value.variants);for(var d=c.next();!d.done;d=c.next())b.push(d.value)}return b}function Bi(a,b){for(var c=null,d=r(a),e=d.next();!e.done;e=d.next())e=e.value,b>=e.startTime&&(c=e);return c};function Ci(a){this.i=a;this.g=null;this.h=function(){}}Ci.prototype.release=function(){this.g=this.i=null;this.h=function(){}};Ci.prototype.l=function(a){var b=this.g,c=this.i.periods;a=Bi(c,a)||c[0];b!=a&&this.h(a);this.g=a};function Di(a,b){a.h=b};function Ei(a){var b=this;this.g=a;this.j=!1;this.i=this.g.Uc();this.h=new K(function(){b.g.bf(.25*b.i)})}Ei.prototype.release=function(){this.h&&(this.h.stop(),this.h=null);this.g=null};Ei.prototype.set=function(a){this.i=a;Fi(this)};Ei.prototype.Tc=function(){return this.g.Tc()};function Fi(a){a.h.stop();var b=a.j?0:a.i;if(0<=b)try{a.g.Uc()!=b&&a.g.oe(b);return}catch(c){}a.h.Na(.25);0!=a.g.Uc()&&a.g.oe(0)};/*

 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Gi(a,b,c,d){b==HTMLMediaElement.HAVE_NOTHING||a.readyState>=b?d():(b=Hi.get(b),c.Ma(a,b,d))}var Hi=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Ii(a,b,c){var d=this;this.g=a;this.l=b;this.j=c;this.s=!1;this.h=new M;this.i=new Ji(a);Gi(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Ki(d,d.j)})}Ii.prototype.release=function(){this.h&&(this.h.release(),this.h=null);null!=this.i&&(this.i.release(),this.i=null);this.l=function(){};this.g=null};function Li(a){return a.s?a.g.currentTime:a.j}function Mi(a,b){0<a.g.readyState?Ni(a.i,b):Gi(a.g,HTMLMediaElement.HAVE_METADATA,a.h,function(){Ki(a,a.j)})}
function Ki(a,b){.001>Math.abs(a.g.currentTime-b)?Oi(a):(a.h.Ma(a.g,"seeking",function(){Oi(a)}),Ni(a.i,0==a.g.currentTime?b:a.g.currentTime))}function Oi(a){a.s=!0;a.h.v(a.g,"seeking",function(){return a.l()})}function Ji(a){var b=this;this.h=a;this.s=10;this.l=this.i=this.j=0;this.g=new K(function(){0>=b.j?(D.D(["Failed to move playhead from",b.i,"to",b.l].join(" ")),b.g.stop()):b.h.currentTime!=b.i?b.g.stop():(b.h.currentTime=b.l,b.j--)})}
Ji.prototype.release=function(){this.g&&(this.g.stop(),this.g=null);this.h=null};function Ni(a,b){a.i=a.h.currentTime;a.l=b;a.j=a.s;a.h.currentTime=b;a.g.Na(.1)};function Pi(a){function b(){null==c.i?c.j=!0:(c.h.Ma(c.g,"seeking",function(){c.j=!0}),c.g.currentTime=Math.max(0,c.g.currentTime+c.i))}var c=this;this.g=a;this.j=!1;this.i=null;this.h=new M;Gi(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.h,function(){b()})}Pi.prototype.release=function(){this.h&&(this.h.release(),this.h=null);this.g=null};Pi.prototype.C=function(a){this.i=this.j?this.i:a};Pi.prototype.l=function(){return(this.j?this.g.currentTime:this.i)||0};Pi.prototype.F=function(){};
function Qi(a,b,c,d,e,f){var h=this;this.i=a;this.g=b.presentationTimeline;this.K=b.minBufferTime||0;this.s=c;this.H=e;this.B=null;this.j=new wi(a,b.presentationTimeline,c,Ri(a,c),f);this.h=new Ii(a,function(){a:{var a=h.j;a.u=!0;a.s=!1;a.i=!1;a=Li(h.h);var b=Si(h,a);if(.001<Math.abs(b-a)){var c=Date.now()/1E3;if(!h.B||h.B<c-1){h.B=c;Mi(h.h,b);a=void 0;break a}}D.N("Seek to "+a);h.H();a=void 0}return a},Ti(this,d));this.u=(new K(function(){if(0!=h.i.readyState&&!h.i.paused){var a=Li(h.h),b=h.g.Wb(),
c=h.g.fb();3>c-b&&(b=c-3);a<b&&(b=Si(h,a),D.info("Jumping forward "+(b-a)+" seconds to catch up with the seek range."),h.i.currentTime=b)}})).Na(.25)}Qi.prototype.release=function(){this.h&&(this.h.release(),this.h=null);this.j&&(this.j.release(),this.j=null);this.u&&(this.u.stop(),this.u=null);this.i=this.h=this.g=this.s=null;this.H=function(){}};Qi.prototype.C=function(a){Mi(this.h,a)};Qi.prototype.l=function(){var a=Li(this.h);return 0<this.i.readyState&&!this.i.paused?Ui(this,a):a};
function Ti(a,b){null==b?b=Infinity>a.g.wa()?a.g.Wb():a.g.fb():0>b&&(b=a.g.fb()+b);return Vi(a,Ui(a,b))}Qi.prototype.F=function(){this.j.Vd()};function Vi(a,b){var c=a.g.wa();return b>=c?c-a.s.durationBackoff:b}
function Si(a,b){var c=Td.bind(null,a.i.buffered),d=Math.max(a.K,a.s.rebufferingGoal),e=a.s.safeSeekOffset,f=a.g.Wb(),h=a.g.fb(),k=a.g.wa();3>h-f&&(f=h-3);var l=a.g.uc(d),n=a.g.uc(e);d=a.g.uc(d+e);if(b>=k)return D.N("Playhead past duration."),Vi(a,b);if(b>h)return D.N("Playhead past end."),h;if(b<f){if(c(n))return D.N("Playhead before start & start is buffered"),n;D.N("Playhead before start & start is unbuffered");return d}if(b>=l||c(b))return D.N("Playhead in safe region or in buffered region."),
b;D.N("Playhead outside safe region & in unbuffered region.");return d}function Ui(a,b){var c=a.g.Wb();if(b<c)return c;c=a.g.fb();return b>c?c:b}function Ri(a,b){if(!b.stallEnabled)return null;var c=b.stallSkip,d=new si(new vi(a),b.stallThreshold);ui(d,function(b,d){D.debug("Stall detected at "+b+" for "+d+" seconds.");c?(D.debug("Seeking forward "+c+" seconds to break stall."),a.currentTime+=c):(D.debug("Pausing and unpausing to break stall."),a.pause(),a.play())});return d};function Wi(a){var b=this;this.h=function(){};this.g=new Set;this.j=a;this.i=(new K(function(){for(var a=b.j(),d=r(b.g),e=d.next();!e.done;e=d.next())e=e.value,e.endTime<a.start&&b.g["delete"](e)})).Na(2)}Wi.prototype.release=function(){this.h=function(){};this.g.clear();this.i.stop()};function Xi(a,b){a.h=b};function Yi(a){var b=this;this.s=a;this.j=new Map;this.g=function(){};this.h=function(){};this.i=function(){};this.u=[{Rb:null,Qb:Zi,Fb:function(a,d){return b.g(a,d)}},{Rb:$i,Qb:Zi,Fb:function(a,d){return b.g(a,d)}},{Rb:aj,Qb:Zi,Fb:function(a,d){return b.g(a,d)}},{Rb:Zi,Qb:$i,Fb:function(a,d){return b.h(a,d)}},{Rb:Zi,Qb:aj,Fb:function(a,d){return b.h(a,d)}},{Rb:$i,Qb:aj,Fb:function(a,d){return b.i(a,d)}},{Rb:aj,Qb:$i,Fb:function(a,d){return b.i(a,d)}}]}
Yi.prototype.release=function(){this.s=null;this.j.clear();this.g=function(){};this.h=function(){};this.i=function(){}};Yi.prototype.l=function(a,b){for(var c=r(this.s.g),d=c.next();!d.done;d=c.next()){d=d.value;var e=this.j.get(d),f=a<d.startTime?$i:a>d.endTime?aj:Zi;this.j.set(d,f);for(var h=r(this.u),k=h.next();!k.done;k=h.next())k=k.value,k.Rb==e&&k.Qb==f&&k.Fb(d,b)}};function bj(a,b,c,d){a.g=b;a.h=c;a.i=d}var $i=1,Zi=2,aj=3;function cj(a,b){this.g=b;this.i=a;this.l=null;this.B=1;this.H=Promise.resolve();this.s=[];this.u=new Map;this.h=new Map;this.F=!1;this.O=null;this.M=this.j=this.C=!1;this.K=0}cj.prototype.destroy=function(){var a=this;return u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:d=[];for(var f=r(a.h.values()),k=f.next();!k.done;k=f.next())e=k.value,dj(e),d.push(ej(e));return v(c,Promise.all(d),2);case 2:a.h.clear(),a.u.clear(),a.g=null,a.i=null,a.H=null,a.s=null,a.l=null,a.j=!0,w(c)}})})};
cj.prototype.configure=function(a){this.l=a;this.O=new hc({maxAttempts:Math.max(a.retryParameters.maxAttempts,2),baseDelay:a.retryParameters.baseDelay,backoffFactor:a.retryParameters.backoffFactor,fuzzFactor:a.retryParameters.fuzzFactor,timeout:0},!0)};
cj.prototype.start=function(){var a=this;return u(function c(){var d,e,f;return y(c,function(c){switch(c.A){case 1:return d=a.g.Cb(),e=fj(a,d),f=a.g.ef(a.i.periods[e]),f.variant||f.text?v(c,gj(a,f.variant?f.variant.audio:null,f.variant?f.variant.video:null,f.text,d),2):(D.error("init: no Streams chosen"),c["return"](new F(2,5,5005)));case 2:if(a.j)return c["return"]();D.debug("init: completed initial Stream setup");a.g&&a.g.Wg&&(D.N("init: calling onInitialStreamsSetup()..."),a.g.Wg());w(c)}})})};
function hj(a){return ij(a,"audio")}function jj(a){return ij(a,"video")}function ij(a,b){var c=a.h.get(b);return c?c.sb||c.stream:null}
function kj(a,b){return u(function d(){var e,f,h,k,l,n,p,q,t,x;return y(d,function(d){switch(d.A){case 1:return e=Ub,v(d,Ie(a.g.Y,e.Pa),2);case 2:return a.K++,a.M=!1,f=a.K,h=a.g.Y,k=new Map,l=new Set,k.set(e.Pa,b),l.add(b),v(d,h.init(k,!1),3);case 3:return a.j?d["return"]():v(d,lj(a,l),4);case 4:if(a.j)return d["return"]();p=(n=a.g.Y.l.isTextVisible())||a.l.alwaysStreamText;a.K!=f||a.h.has(e.Pa)||a.M||!p||(q=a.g.Cb(),t=fj(a,q),x=mj(b,t,0),a.h.set(e.Pa,x),nj(a,x,0));w(d)}})})}
function oj(a){a.M=!0;var b=a.h.get("text");b&&(dj(b),ej(b)["catch"](function(){}),a.h["delete"]("text"))}function pj(a,b){var c=a.h.get("video");if(c){var d=c.stream;if(d)if(D.debug("setTrickPlay",b),b){var e=d.trickModeVideo;e&&!c.sb&&(D.debug("Engaging trick mode stream",e),qj(a,e,!1,0,!1),c.sb=d)}else if(d=c.sb)D.debug("Restoring non-trick-mode stream",d),c.sb=null,qj(a,d,!0,0,!1)}}
function rj(a,b,c,d){var e=!1;if(b.video){var f=qj(a,b.video,c,d,!1);e=e||f}b.audio&&(a=qj(a,b.audio,c,d,!1),e=e||a);return e}
function qj(a,b,c,d,e){var f=a.h.get(b.type);if(!f&&"text"==b.type&&a.l.ignoreTextStreamFailures)return kj(a,b),!0;if(!f)return!1;var h=sj(a,b),k=Array.from(a.h.values()).every(function(a){return a.Fa==f.Fa});if(c&&h!=f.Fa&&k)return D.debug("switch: switching to stream in another Period; clearing buffer and changing Periods"),a.h.forEach(function(b){tj(a,b)}),!0;f.sb&&(D.debug("switch during trick play mode",b),b.trickModeVideo?(f.sb=b,b=b.trickModeVideo,D.debug("switch found trick play stream",b)):
(f.sb=null,D.debug("switch found no special trick play stream")));k=a.s[h];if(!k||!k.lc)return!1;k=a.u.get(b.id);if(!k||!k.lc)return!1;if(f.stream==b&&!e)return D.debug("switch: Stream "+uj(f)+" already active"),!1;"text"==b.type&&ze(a.g.Y,Rc(b.mimeType,b.codecs));f.stream=b;f.Yc=!0;D.debug("switch: switching to Stream "+uj(f));vj(a,f,h)&&(D.info("Aborting current segment request to switch."),f.Kb.abort());c&&(f.zb?f.qd=!0:f.rb?(f.vb=!0,f.Mc=d,f.qd=!0):(dj(f),wj(a,f,!0,d)["catch"](function(b){if(a.g)a.g.onError(b)})));
return!0}function vj(a,b,c){if(!b.Kb)return!1;var d=a.g.Cb(),e=De(a.g.Y,b.type),f=xj(a,b,d,e,c);c=f?f.g?f.g-f.h:null:null;f&&!c&&(c=(f.endTime-f.Vc())*b.stream.bandwidth/8);if(isNaN(c))return!1;(f=b.stream.initSegmentReference)&&(c+=(f.g?f.g-f.h:null)||0);f=a.g.getBandwidthEstimate();return 8*c/f<e-d-Math.max(a.i.minBufferTime||0,a.l.rebufferingGoal)||b.Kb.h.g>c?!0:!1}
function yj(a){function b(b){var e=a.g.Y;"text"==b?(b=e.g,b=null==b.g||null==b.h?!1:c>=b.g&&c<b.h):(b=Ce(e,b),b=Td(b,c,d));return b}var c=a.g.Cb(),d=a.l.smallGapLimit,e=!1,f=fj(a,c);if(cb(a.h.values(),function(a){return a.Fa==f}))for(var h=r(a.h.keys()),k=h.next();!k.done;k=h.next())k=k.value,b(k)||(tj(a,a.h.get(k)),e=!0);else cb(a.h.keys(),b)||(D.debug("(all): seeked: unbuffered seek: clearing all buffers"),a.h.forEach(function(b){tj(a,b)}),e=!0);e||D.debug("(all): seeked: buffered seek: presentationTime="+
c)}function tj(a,b){var c=uj(b);b.zb?D.debug(c,"clear: already clearing the buffer"):b.vb?D.debug(c,"clear: already waiting"):b.rb?(D.debug(c,"clear: currently updating"),b.vb=!0,b.Mc=0):null==Be(a.g.Y,b.type)?(D.debug(c,"clear: nothing buffered"),null==b.mb&&nj(a,b,0)):(D.debug(c,"clear: handling right now"),dj(b),wj(a,b,!1,0)["catch"](function(b){if(a.g)a.g.onError(b)}))}
function gj(a,b,c,d,e){return u(function h(){var k,l,n,p,q,t,x;return y(h,function(h){switch(h.A){case 1:return k=a.g.Cb(),l=fj(a,k),n=Ub,p=new Map,q=new Set,b&&(p.set(n.nc,b),q.add(b)),c&&(p.set(n.wb,c),q.add(c)),d&&(p.set(n.Pa,d),q.add(d)),t=a.g.Y,x=a.l.forceTransmuxTS,v(h,t.init(p,x),2);case 2:if(a.j)return h["return"]();zj(a);return v(h,lj(a,q),3);case 3:if(a.j)return h["return"]();p.forEach(function(b,c){if(!a.h.has(c)){var d=mj(b,l,e);a.h.set(c,d);nj(a,d,0)}});w(h)}})})}
function mj(a,b,c){return{stream:a,type:a.type,bc:null,hb:null,sb:null,Yc:!0,Fa:b,endOfStream:!1,rb:!1,mb:null,vb:!1,Mc:0,qd:!1,zb:!1,ae:!1,xc:!1,ee:c||0,Kb:null}}
function Aj(a,b){var c=a.s[b];if(c)return D.debug("(all) Period "+b+" is being or has been set up"),c.promise;D.debug("(all) setting up Period "+b);c={promise:new G,lc:!1};a.s[b]=c;for(var d=new Set,e=r(a.i.periods[b].variants),f=e.next();!f.done;f=e.next())f=f.value,f.video&&d.add(f.video),f.video&&f.video.trickModeVideo&&d.add(f.video.trickModeVideo),f.audio&&d.add(f.audio);e=r(a.i.periods[b].textStreams);for(f=e.next();!f.done;f=e.next())d.add(f.value);a.H=a.H.then(function(){if(!this.j)return lj(this,
d)}.bind(a)).then(function(){this.j||(this.s[b].promise.resolve(),this.s[b].lc=!0,D.N("(all) setup Period "+b))}.bind(a))["catch"](function(a){this.j||(this.s[b].promise["catch"](function(){}),this.s[b].promise.reject(),delete this.s[b],D.D("(all) failed to setup Period "+b),this.g.onError(a))}.bind(a));return c.promise}
function lj(a,b){return u(function d(){var e,f,h,k,l,n,p;return y(d,function(d){switch(d.A){case 1:e=[];for(var q=r(b),x=q.next();!x.done;x=q.next())f=x.value,(h=a.u.get(f.id))?(D.debug("(all) Stream "+f.id+" is being or has been set up"),e.push(h.promise)):(D.N("(all) setting up Stream "+f.id),a.u.set(f.id,{promise:new G,lc:!1}),e.push(f.createSegmentIndex()));ya(d,2);return v(d,Promise.all(e),4);case 4:if(a.j)return d["return"]();Aa(d,3);break;case 2:k=Da(d);if(a.j)return d["return"]();d=r(b);for(x=
d.next();!x.done;x=d.next())l=x.value,a.u.get(l.id).promise["catch"](function(){}),a.u.get(l.id).promise.reject(),a.u["delete"](l.id);throw k;case 3:q=r(b);for(x=q.next();!x.done;x=q.next())n=x.value,p=a.u.get(n.id),p.lc||(p.promise.resolve(),p.lc=!0,D.N("(all) setup Stream "+n.id));w(d)}})})}function zj(a){var b=a.i.presentationTimeline.wa();Infinity>b?a.g.Y.Ya(b):a.g.Y.Ya(Math.pow(2,32))}
function Bj(a,b){if(!a.j){var c=uj(b);if(!b.rb&&null!=b.mb&&!b.zb)if(b.mb=null,b.vb)D.debug(c,"skipping update and clearing the buffer"),wj(a,b,b.qd,b.Mc);else{try{var d=Cj(a,b);null!=d&&(nj(a,b,d),b.xc=!1)}catch(e){Dj(a,e);return}d=Array.from(a.h.values());Ej(a,b);a.F&&d.every(function(a){return a.endOfStream})&&(D.N(c,"calling endOfStream()..."),a.g.Y.endOfStream().then(function(){if(!this.j){var a=this.g.Y.wa();0!=a&&a<this.i.presentationTimeline.wa()&&this.i.presentationTimeline.Ya(a)}}.bind(a)))}}}
function Cj(a,b){if(Fj(b))return He(a.g.Y,b.stream.originalId||""),null;var c=uj(b),d=a.g.Cb(),e=Gj(a,b,d);D.T(c,"timeNeeded="+e);var f=sj(a,b.stream),h=fj(a,e),k=Ee(a.g.Y,b.type,d);D.T(c,"update_:","presentationTime="+d,"bufferedAhead="+k);var l=Math.max(a.i.minBufferTime||0,a.l.rebufferingGoal,a.l.bufferingGoal)*a.B;if(e>=a.i.presentationTimeline.wa())return D.debug(c,"buffered to end of presentation"),b.endOfStream=!0,"video"==b.type&&(e=a.h.get("text"))&&"application/cea-608"==e.stream.mimeType&&
(e.endOfStream=!0),null;b.endOfStream=!1;b.Fa=h;if(h!=f)return D.debug(c,"need Period "+h,"presentationTime="+d,"timeNeeded="+e,"currentPeriodIndex="+f),null;if(k>=l)return D.T(c,"buffering goal met"),.5;c=De(a.g.Y,b.type);c=xj(a,b,d,c,f);if(!c)return 1;var n=Infinity;Array.from(a.h.values()).forEach(function(b){Fj(b)||(b=Gj(a,b,d),n=Math.min(n,b))});if(e>=n+a.i.presentationTimeline.g)return 1;b.ee=0;Hj(a,b,d,f,c);return null}
function Gj(a,b,c){if(!b.bc||!b.hb)return Math.max(c,b.ee);c=sj(a,b.bc);return a.i.periods[c].startTime+b.hb.endTime}
function xj(a,b,c,d,e){var f=uj(b);if(b.hb&&b.stream==b.bc)return d=b.hb.position+1,D.T(f,"next position known:","position="+d),Ij(a,b,e,d);b.hb?(D.N(f,"next position unknown: another Stream buffered"),f=sj(a,b.bc),f=Jj(a,b,a.i.periods[f].startTime+b.hb.endTime,e)):(D.N(f,"next position unknown: nothing buffered"),f=Jj(a,b,d||c,e));if(null==f)return null;c=null;null==d&&(c=Ij(a,b,e,Math.max(0,f-1)));return c||Ij(a,b,e,f)}
function Jj(a,b,c,d){var e=uj(b);a=a.i.periods[d];D.debug(e,"looking up segment:","presentationTime="+c,"currentPeriod.startTime="+a.startTime);c=Math.max(0,c-a.startTime);b=b.stream.findSegmentPosition(c);null==b&&D.D(e,"cannot find segment:","currentPeriod.startTime="+a.startTime,"lookupTime="+c);return b}
function Ij(a,b,c,d){var e=uj(b);c=a.i.periods[c];b=b.stream.getSegmentReference(d);if(!b)return D.N(e,"segment does not exist:","currentPeriod.startTime="+c.startTime,"position="+d),null;d=a.i.presentationTimeline;a=d.vc();d=d.Xb();return c.startTime+b.endTime<a||c.startTime+b.startTime>d?(D.T(e,"segment is not available:","currentPeriod.startTime="+c.startTime,"reference.startTime="+b.startTime,"reference.endTime="+b.endTime,"availabilityStart="+a,"availabilityEnd="+d),null):b}
function Hj(a,b,c,d,e){var f=uj(b),h=a.i.periods[d];D.N(f,"fetchAndAppend_:","presentationTime="+c,"currentPeriod.startTime="+h.startTime,"reference.position="+e.position,"reference.startTime="+e.startTime,"reference.endTime="+e.endTime);var k=b.stream,l=a.i.presentationTimeline.wa(),n=a.i.periods[d+1];d=Kj(a,b,d,Math.max(0,h.startTime-.1),n?n.startTime+.01:l);b.rb=!0;b.Yc=!1;D.T(f,"fetching segment");l=Lj(a,b,e);Promise.all([d,l]).then(function(a){if(!this.j&&!this.C)return Mj(this,b,c,h,k,e,a[1])}.bind(a)).then(function(){this.j||
this.C||(b.rb=!1,b.ae=!1,b.vb||this.g.Vd(),nj(this,b,0),Nj(this,b,k),D.N(f,"finished fetch and append"))}.bind(a))["catch"](function(a){this.j||this.C||(b.rb=!1,"text"==b.type&&this.l.ignoreTextStreamFailures?(1001==a.code?D.D(f,"Text stream failed to download. Proceeding without it."):D.D(f,"Text stream failed to parse. Proceeding without it."),this.h["delete"]("text")):7001==a.code?(b.rb=!1,b.mb=null,nj(this,b,0)):3017==a.code?Oj(this,b,a):(D.error(f,"failed fetch and append: code="+a.code),b.xc=
!0,a.severity=2,Dj(this,a)))}.bind(a))}
function Oj(a,b,c){var d=uj(b);if(Array.from(a.h.values()).some(function(a){return a!=b&&a.ae}))D.debug(d,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var e=Math.round(100*a.B);if(20<e)a.B-=.2;else if(4<e)a.B-=.04;else{D.error(d,"MediaSource threw QuotaExceededError too many times");b.xc=!0;a.C=!0;a.g.onError(c);return}D.D(d,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*a.B))+"%");b.ae=!0}nj(a,b,4)}
function Kj(a,b,c,d,e){if(!b.Yc)return Promise.resolve();var f=uj(b);c=a.i.periods[c].startTime-b.stream.presentationTimeOffset;D.N(f,"setting timestamp offset to "+c);D.N(f,"setting append window start to "+d);D.N(f,"setting append window end to "+e);d=Je(a.g.Y,b.type,c,d,e);if(!b.stream.initSegmentReference)return d;D.N(f,"fetching init segment");a=Lj(a,b,b.stream.initSegmentReference).then(function(a){if(!this.j)return D.N(f,"appending init segment"),Fe(this.g.Y,b.type,a,null,null,b.stream.closedCaptions&&
0<b.stream.closedCaptions.size)}.bind(a))["catch"](function(a){b.Yc=!0;return Promise.reject(a)});return Promise.all([d,a])}
function Mj(a,b,c,d,e,f,h){var k=uj(b),l=e.closedCaptions&&0<e.closedCaptions.size;null!=e.emsgSchemeIdUris&&0<e.emsgSchemeIdUris.length&&(new Q).Da("emsg",a.P.bind(a,d,f,e.emsgSchemeIdUris)).parse(h);return Pj(a,b,c).then(function(){if(!this.j)return D.N(k,"appending media segment"),Fe(this.g.Y,b.type,h,f.startTime+d.startTime,f.endTime+d.startTime,l)}.bind(a)).then(function(){if(!this.j)return D.T(k,"appended media segment"),b.bc=e,b.hb=f,Promise.resolve()}.bind(a))}
cj.prototype.P=function(a,b,c,d){var e=d.reader.$d(),f=d.reader.$d(),h=d.reader.S(),k=d.reader.S(),l=d.reader.S(),n=d.reader.S();d=d.reader.Lb(d.reader.X.byteLength-d.reader.za());a=a.startTime+b.startTime+k/h;if(c.includes(e))if("urn:mpeg:dash:event:2012"==e)this.g.Xg();else this.g.onEvent(new B("emsg",{detail:{startTime:a,endTime:a+l/h,schemeIdUri:e,value:f,timescale:h,presentationTimeDelta:k,eventDuration:l,id:n,messageData:d}}))};
function Pj(a,b,c){var d=uj(b);D.T(d,"checking buffer length");var e=Math.max(a.l.bufferBehind,a.i.presentationTimeline.g),f=Be(a.g.Y,b.type);if(null==f)return D.T(d,"buffer behind okay because nothing buffered:","presentationTime="+c,"bufferBehind="+e),Promise.resolve();var h=c-f,k=h-e;if(.01>=k)return D.T(d,"buffer behind okay:","presentationTime="+c,"bufferedBehind="+h,"bufferBehind="+e,"underflow="+Math.abs(k)),Promise.resolve();D.N(d,"buffer behind too large:","presentationTime="+c,"bufferedBehind="+
h,"bufferBehind="+e,"overflow="+k);return a.g.Y.remove(b.type,f,f+k).then(function(){this.j||D.N(d,"evicted "+k+" seconds")}.bind(a))}
function Nj(a,b,c){if(!a.F){var d=uj(b);b=Array.from(a.h.values());if(1!=b.length||"text"!=b[0].type)a.F=b.every(function(a){return"text"==a.type?!0:!a.vb&&!a.zb&&a.hb});if(a.F){D.debug(d,"startup complete");c=sj(a,c);a.s[c]||Aj(a,c).then(function(){this.j||(D.N(d,"calling onCanSwitch()..."),this.g.df())}.bind(a))["catch"](Rb.Zc);for(c=0;c<a.i.periods.length;++c)Aj(a,c)["catch"](Rb.Zc);a.g.fh&&(D.N(d,"calling onStartupComplete()..."),a.g.fh())}}}
function Ej(a,b){var c=uj(b),d=sj(a,b.stream);if(b.Fa!=d){var e=b.Fa,f=Array.from(a.h.values());f.every(function(a){return a.Fa==e||Fj(a)})?f.every(Qj)?(D.debug(c,"all need Period "+e),Aj(a,e).then(function(){if(!this.j)if(f.every(function(a){var b=Qj(a),c=sj(this,a.stream);return Fj(a)?!0:b&&a.Fa==e&&c!=e}.bind(this))){var a=this.i.periods[e];D.N(c,"calling onChooseStreams()...");var b=this.g.ef(a),d=new Map;b.variant&&b.variant.video&&d.set("video",b.variant.video);b.variant&&b.variant.audio&&d.set("audio",
b.variant.audio);b.text&&d.set("text",b.text);b=r(this.h.keys());for(var n=b.next();!n.done;n=b.next())if(n=n.value,!d.has(n)&&"text"!=n){D.error(c,"invalid Streams chosen: missing "+n+" Stream");this.g.onError(new F(2,5,5005));return}b=r(Array.from(d.keys()));for(n=b.next();!n.done;n=b.next())if(n=n.value,!this.h.has(n))if("text"==n)gj(this,null,null,d.get("text"),a.startTime),d["delete"](n);else{D.error(c,"invalid Streams chosen: unusable "+n+" Stream");this.g.onError(new F(2,5,5005));return}b=
r(Array.from(this.h.keys()));for(n=b.next();!n.done;n=b.next()){n=n.value;var p=this.h.get(n),q=d.get(n);if(q){var t=Fj(p);t&&(p.Fa=e,p.ee=a.startTime);qj(this,q,!1,0,!1);t&&Fj(p)||nj(this,this.h.get(n),0)}else this.h["delete"](n)}D.N(c,"calling onCanSwitch()...");this.g.df()}else D.debug(c,"ignoring transition to Period",e,"since another is happening")}.bind(a))["catch"](Rb.Zc)):D.debug(c,"all MediaStates need Period "+e+", but not all MediaStates are idle"):D.debug(c,"not all MediaStates need Period "+
e)}}function Fj(a){return a&&"text"==a.type&&"application/cea-608"==a.stream.mimeType}function Qj(a){return!a.rb&&null==a.mb&&!a.vb&&!a.zb}function fj(a,b){var c=Bi(a.i.periods,b+Vb);return c?a.i.periods.indexOf(c):0}
function sj(a,b){for(var c=a.i.periods,d=0;d<c.length;d++){for(var e=c[d],f=new Set,h=r(e.variants),k=h.next();!k.done;k=h.next())k=k.value,k.audio&&f.add(k.audio),k.video&&f.add(k.video),k.video&&k.video.trickModeVideo&&f.add(k.video.trickModeVideo);e=r(e.textStreams);for(h=e.next();!h.done;h=e.next())f.add(h.value);if(f.has(b))return d}return-1}
function Lj(a,b,c){var d=Kg(c.i(),c.h,c.g,a.l.retryParameters);D.T("fetching: reference=",c);a=a.g.cc.request(1,d);b.Kb=a;return a.promise.then(function(a){b.Kb=null;return a.data})}
function wj(a,b,c,d){return u(function f(){var h,k,l,n;return y(f,function(f){switch(f.A){case 1:return h=uj(b),b.vb=!1,b.qd=!1,b.Mc=0,b.zb=!0,b.bc=null,b.hb=null,D.debug(h,"clearing buffer"),d?(l=a.g.Cb(),n=a.g.Y.wa(),k=a.g.Y.remove(b.type,l+d,n)):k=Ie(a.g.Y,b.type).then(function(){if(!this.j&&c)return this.g.Y.flush(b.type)}.bind(a)),v(f,k,2);case 2:if(a.j)return f["return"]();D.debug(h,"cleared buffer");b.zb=!1;b.endOfStream=!1;nj(a,b,0);w(f)}})})}
function nj(a,b,c){var d=uj(b),e=b.type;"text"!=e||a.h.has(e)?(D.T(d,"updating in "+c+" seconds"),b.mb=(new gc(function(){return u(function h(){var c;return y(h,function(d){switch(d.A){case 1:return ya(d,2),v(d,Bj(a,b),4);case 4:Aa(d,0);break;case 2:c=Da(d);if(a.g)a.g.onError(c);w(d)}})})})).U(c)):D.N(d,"Text stream is unloaded. No update is needed.")}function dj(a){null!=a.mb&&(a.mb.stop(),a.mb=null)}
function ej(a){return u(function c(){return y(c,function(c){switch(c.A){case 1:if(a.Kb)return v(c,a.Kb.abort(),0);c.I(0)}})})}function Dj(a,b){jc(a.O).then(function(){this.j||(this.g.onError(b),b.handled||this.l.failureCallback(b))}.bind(a))}function uj(a){return"("+a.type+":"+a.stream.id+")"};function Rj(a,b,c,d,e,f){if(200<=c&&299>=c&&202!=c)return{uri:e||d,Xd:d,data:b,headers:a,fromCache:!!a["x-shaka-from-cache"]};e=null;try{e=Zb(b)}catch(h){}D.debug("HTTP error text:",e);throw new F(401==c||403==c?2:1,1,1001,d,c,e,a,f);};function Sj(a,b,c,d){var e=new Sj.h;Pc(b.headers).forEach(function(a,b){e.append(b,a)});var f=new Sj.g,h={Ge:!1,Cf:!1};a=Sj.B(a,c,{body:b.body||void 0,headers:e,method:b.method,signal:f.signal,credentials:b.allowCrossSiteCredentials?"include":void 0},h,d);a=new kc(a,function(){h.Ge=!0;f.abort();return Promise.resolve()});if(b=b.retryParameters.timeout){var k=new K(function(){h.Cf=!0;f.abort()});k.U(b/1E3);a["finally"](function(){k.stop()})}return a}A("shaka.net.HttpFetchPlugin",Sj);
Sj.B=function(a,b,c,d,e){return u(function h(){var k,l,n,p,q,t,x,C,z,H,J,T,Ba,ka;return y(h,function(h){switch(h.A){case 1:return k=Sj.l,l=Sj.i,t=q=0,x=Date.now(),ya(h,2),v(h,k(a,c),4);case 4:return n=h.G,C=n.clone().body.getReader(),H=(z=n.headers.get("Content-Length"))?parseInt(z,10):0,J=function(a){function b(){return u(function oa(){var c,d,h;return y(oa,function(k){switch(k.A){case 1:return ya(k,2),v(k,C.read(),4);case 4:c=k.G;Aa(k,3);break;case 2:return d=Da(k),D.N("error reading from stream",
d.message),k["return"]();case 3:c.done||(q+=c.value.byteLength);h=Date.now();if(100<h-x||c.done)e(h-x,q-t,H-q),t=q,x=h;c.done?a.close():(a.enqueue(c.value),b());w(k)}})})}b()},new l({start:J}),v(h,n.arrayBuffer(),5);case 5:p=h.G;Aa(h,3);break;case 2:T=Da(h);if(d.Ge)throw new F(1,1,7001,a,b);if(d.Cf)throw new F(1,1,1003,a,b);throw new F(1,1,1002,a,T,b);case 3:return Ba={},ka=n.headers,ka.forEach(function(a,b){Ba[b.trim()]=a}),h["return"](Rj(Ba,p,n.status,a,n.url,b))}})})};
Sj.isSupported=function(){if(window.ReadableStream)try{new ReadableStream({})}catch(a){return!1}else return!1;return!(!window.fetch||!window.AbortController)};Sj.isSupported=Sj.isSupported;Sj.l=window.fetch;Sj.g=window.AbortController;Sj.i=window.ReadableStream;Sj.h=window.Headers;Sj.isSupported()&&(Bc("http",Sj,2),Bc("https",Sj,2));function Tj(a,b,c,d){var e=new Tj.j,f=Date.now(),h=0,k=new Promise(function(k,n){e.open(b.method,a,!0);e.responseType="arraybuffer";e.timeout=b.retryParameters.timeout;e.withCredentials=b.allowCrossSiteCredentials;e.onabort=function(){n(new F(1,1,7001,a,c))};e.onload=function(b){b=b.target;var d=b.getAllResponseHeaders().trim().split("\r\n"),e={};d=r(d);for(var f=d.next();!f.done;f=d.next())f=f.value.split(": "),e[f[0].toLowerCase()]=f.slice(1).join(": ");try{var h=Rj(e,b.response,b.status,a,b.responseURL,
c);k(h)}catch(H){n(H)}};e.onerror=function(b){n(new F(1,1,1002,a,b,c))};e.ontimeout=function(){n(new F(1,1,1003,a,c))};e.onprogress=function(a){var b=Date.now();if(100<b-f||a.lengthComputable&&a.loaded==a.total)d(b-f,a.loaded-h,a.total-a.loaded),h=a.loaded,f=b};for(var l in b.headers)e.setRequestHeader(l.toLowerCase(),b.headers[l]);e.send(b.body)});return new kc(k,function(){e.abort();return Promise.resolve()})}A("shaka.net.HttpXHRPlugin",Tj);Tj.j=window.XMLHttpRequest;Bc("http",Tj,1);
Bc("https",Tj,1);function Uj(){this.g=this.j=this.h=0;this.i=new Map;this.l=0}function Vj(a,b){a.h+=b;var c=a.l;a.l++;a.i.set(c,b);return c}Uj.prototype.close=function(a,b){if(this.i.has(a)){var c=this.i.get(a);this.i["delete"](a);this.j+=c;this.g+=b}};function Wj(a,b,c){this.s=a;this.h=new Map;this.i=!1;this.l=b;this.j=c;this.g=new Uj}Wj.prototype.destroy=function(){this.i=!0;return Promise.all(this.h.values()).then(function(){},function(){})};
function Xj(a,b,c,d,e,f){var h=Vj(a.g,d);d=a.h.get(b)||Promise.resolve();a.h.set(b,d.then(function(){return u(function l(){var b,d,q,t,x,C;return y(l,function(l){switch(l.A){case 1:return v(l,Yj(a,c),2);case 2:b=l.G;if(a.i)throw new F(2,9,7001);if(e){d=new Uint8Array(b);q=new Tf(d);for(var n in q.data)t=Number(n),x=q.data[t],C=q.g[t],a.j(x,C)}a.g.close(h,b.byteLength);n=a.g;a.l(0==n.h?0:n.j/n.h,a.g.g);return l["return"](f(b))}})})}))}
function Zj(a){return u(function c(){return y(c,function(c){switch(c.A){case 1:return v(c,Promise.all(a.h.values()),2);case 2:return c["return"](a.g.g)}})})}function Yj(a,b){return u(function d(){var e,f;return y(d,function(d){switch(d.A){case 1:return e=a.s.request(1,b),v(d,e.promise,2);case 2:return f=d.G,d["return"](f.data)}})})};function ak(a,b){var c=this;this.i=a;this.h=a.objectStore(b);this.g=new G;a.onabort=function(a){a.preventDefault();c.g.reject()};a.onerror=function(a){a.preventDefault();c.g.reject()};a.oncomplete=function(){c.g.resolve()}}ak.prototype.abort=function(){try{this.i.abort()}catch(a){}return this.g["catch"](function(){})};
function bk(a,b){return new Promise(function(c,d){var e=a.h.openCursor();e.onerror=d;e.onsuccess=function(a){a=a.target.result;if(!a)return c();b(a.key,a.value,a);a["continue"]()}})}ak.prototype.store=function(){return this.h};ak.prototype.promise=function(){return this.g};function ck(a){this.h=a;this.g=[]}ck.prototype.destroy=function(){return Promise.all(this.g.map(function(a){return a.abort()}))};function dk(a,b){return ek(a,b,"readwrite")}function ek(a,b,c){c=a.h.transaction([b],c);var d=new ak(c,b);a.g.push(d);d.promise().then(function(){uc(a.g,d)},function(){uc(a.g,d)});return d};function fk(a,b,c){this.h=new ck(a);this.i=b;this.g=c}m=fk.prototype;m.destroy=function(){return this.h.destroy()};m.hasFixedKeySpace=function(){return!0};m.addSegments=function(){return gk(this.i)};m.removeSegments=function(a,b){return hk(this,this.i,a,b)};m.getSegments=function(a){var b=this;return u(function d(){var e;return y(d,function(d){switch(d.A){case 1:return v(d,ik(b,b.i,a),2);case 2:return e=d.G,d["return"](e.map(function(a){return b.Ke(a)}))}})})};m.addManifests=function(){return gk(this.g)};
m.updateManifestExpiration=function(a,b){var c=dk(this.h,this.g),d=c.store();d.get(a).onsuccess=function(c){if(c=c.target.result)c.expiration=b,d.put(c,a)};return c.promise()};m.removeManifests=function(a,b){return hk(this,this.g,a,b)};m.getManifests=function(a){var b=this;return u(function d(){var e;return y(d,function(d){switch(d.A){case 1:return v(d,ik(b,b.g,a),2);case 2:return e=d.G,d["return"](e.map(function(a){return b.Nc(a)}))}})})};
m.getAllManifests=function(){var a=this;return u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:return d=ek(a.h,a.g,"readonly"),e=new Map,v(c,bk(d,function(c,d){e.set(c,a.Nc(d))}),2);case 2:return v(c,d.promise(),3);case 3:return c["return"](e)}})})};m.Ke=function(a){return a};m.Nc=function(a){return a};function gk(a){return Promise.reject(new F(2,9,9011,"Cannot add new value to "+a))}
m.add=function(a,b){var c=this;return u(function e(){var f,h,k,l,n;return y(e,function(e){switch(e.A){case 1:f=dk(c.h,a);h=f.store();k=[];for(var p=r(b),t=p.next();!t.done;t=p.next())l=t.value,n=h.add(l),n.onsuccess=function(a){k.push(a.target.result)};return v(e,f.promise(),2);case 2:return e["return"](k)}})})};
function hk(a,b,c,d){a=dk(a.h,b);b=a.store();var e={};c=r(c);for(var f=c.next();!f.done;e={key:e.key},f=c.next())e.key=f.value,b["delete"](e.key).onsuccess=function(a){return function(){return d(a.key)}}(e);return a.promise()}
function ik(a,b,c){return u(function e(){var f,h,k,l,n,p,q;return y(e,function(e){switch(e.A){case 1:f=ek(a.h,b,"readonly");h=f.store();k={};l=[];n={};p=r(c);for(q=p.next();!q.done;n={request:n.request,key:n.key},q=p.next())n.key=q.value,n.request=h.get(n.key),n.request.onsuccess=function(a){return function(){void 0==a.request.result&&l.push(a.key);k[a.key]=a.request.result}}(n);return v(e,f.promise(),2);case 2:if(l.length)throw new F(2,9,9012,"Could not find values for "+l);return e["return"](c.map(function(a){return k[a]}))}})})}
;function jk(a){this.g=new ck(a)}jk.prototype.destroy=function(){return this.g.destroy()};jk.prototype.getAll=function(){var a=this;return u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:return d=ek(a.g,"session-ids","readonly"),e=[],v(c,bk(d,function(a,c){e.push(c)}),2);case 2:return v(c,d.promise(),3);case 3:return c["return"](e)}})})};jk.prototype.add=function(a){var b=dk(this.g,"session-ids"),c=b.store();a=r(a);for(var d=a.next();!d.done;d=a.next())c.add(d.value);return b.promise()};
jk.prototype.remove=function(a){var b=this;return u(function d(){var e;return y(d,function(d){switch(d.A){case 1:return e=dk(b.g,"session-ids"),v(d,bk(e,function(b,d,e){0<=a.indexOf(d.sessionId)&&e["delete"]()}),2);case 2:return v(d,e.promise(),0)}})})};function kk(){this.g=new Map}kk.prototype.destroy=function(){for(var a=[],b=r(this.g.values()),c=b.next();!c.done;c=b.next())a.push(c.value.destroy());this.g.clear();return Promise.all(a)};kk.prototype.init=function(){var a=this;lk.forEach(function(b,c){var d=b();d?a.g.set(c,d):D.info("Skipping "+c+" as it is not supported on this platform")});for(var b=[],c=r(this.g.values()),d=c.next();!d.done;d=c.next())b.push(d.value.init());return Promise.all(b)};
function mk(a){var b=null;a.g.forEach(function(a,d){a.getCells().forEach(function(a,c){a.hasFixedKeySpace()||b||(b={path:{Xa:d,ya:c},ya:a})})});if(b)return b;throw new F(2,9,9013,"Could not find a cell that supports add-operations");}function nk(a,b){a.g.forEach(function(a,d){a.getCells().forEach(function(a,c){b({Xa:d,ya:c},a)})})}
function ok(a,b,c){a=a.g.get(b);if(!a)throw new F(2,9,9013,"Could not find mechanism with name "+b);b=a.getCells().get(c);if(!b)throw new F(2,9,9013,"Could not find cell with name "+c);return b}function pk(a,b){a.g.forEach(function(a){b(a.getEmeSessionCell())})}function qk(a){var b=Array.from(a.g.keys());if(!b.length)throw new F(2,9,9E3,"No supported storage mechanisms found");return a.g.get(b[0]).getEmeSessionCell()}
kk.prototype.erase=function(){var a=this;return u(function c(){var d,e,f;return y(c,function(c){switch(c.A){case 1:return d=Array.from(a.g.values()),e=0<d.length,e||(f=lk,f.forEach(function(a){(a=a())&&d.push(a)})),v(c,Promise.all(d.map(function(a){return a.erase()})),2);case 2:if(e)c.I(0);else return v(c,Promise.all(d.map(function(a){return a.destroy()})),0)}})})};function rk(a,b){lk.set(a,b)}A("shaka.offline.StorageMuxer.register",rk);A("shaka.offline.StorageMuxer.unregister",function(a){lk["delete"](a)});
var lk=new Map;function sk(a){fk.apply(this,arguments)}ta(sk,fk);sk.prototype.updateManifestExpiration=function(a,b){var c=dk(this.h,this.g),d=c.store(),e=new G;d.get(a).onsuccess=function(c){(c=c.target.result)?(c.expiration=b,d.put(c),e.resolve()):e.reject(new F(2,9,9012,"Could not find values for "+a))};return c.promise().then(function(){return e})};
sk.prototype.Nc=function(a){return{originalManifestUri:a.originalManifestUri,duration:a.duration,size:a.size,expiration:null==a.expiration?Infinity:a.expiration,periods:a.periods.map(tk),sessionIds:a.sessionIds,drmInfo:a.drmInfo,appMetadata:a.appMetadata}};function tk(a){uk(a);a.streams.forEach(function(){});return{startTime:a.startTime,streams:a.streams.map(vk)}}
function vk(a){var b=a.initSegmentUri?wk(a.initSegmentUri):null;return{id:a.id,originalId:null,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset,contentType:a.contentType,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:void 0,kind:a.kind,language:a.language,label:a.label,width:a.width,height:a.height,initSegmentKey:b,encrypted:a.encrypted,keyId:a.keyId,segments:a.segments.map(xk),variantIds:a.variantIds}}
function xk(a){var b=wk(a.uri);return{startTime:a.startTime,endTime:a.endTime,dataKey:b}}sk.prototype.Ke=function(a){return{data:a.data}};function wk(a){var b;if((b=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a))||(b=/^offline:segment\/([0-9]+)$/.exec(a)))return Number(b[1]);throw new F(2,9,9004,"Could not parse uri "+a);}
function uk(a){var b=a.streams.filter(function(a){return"audio"==a.contentType}),c=a.streams.filter(function(a){return"video"==a.contentType});if(!b.every(function(a){return a.variantIds})||!c.every(function(a){return a.variantIds})){b.forEach(function(a){a.variantIds=[]});c.forEach(function(a){a.variantIds=[]});var d=0;if(c.length&&!b.length){D.debug("Found video-only content. Creating variants for video.");var e=d++;c.forEach(function(a){a.variantIds.push(e)})}if(!c.length&&b.length){D.debug("Found audio-only content. Creating variants for audio.");
var f=d++;b.forEach(function(a){a.variantIds.push(f)})}c.length&&b.length&&(D.debug("Found audio-video content. Creating variants."),b.forEach(function(a){c.forEach(function(b){var c=d++;a.variantIds.push(c);b.variantIds.push(c)})}))}};function yk(a,b,c,d){fk.call(this,a,b,c);this.j=d}ta(yk,fk);yk.prototype.hasFixedKeySpace=function(){return this.j};yk.prototype.addSegments=function(a){return this.j?gk(this.i):this.add(this.i,a)};yk.prototype.addManifests=function(a){return this.j?gk(this.g):this.add(this.g,a)};yk.prototype.Nc=function(a){null==a.expiration&&(a.expiration=Infinity);return a};function zk(){this.l=this.i=this.h=this.g=this.j=null}m=zk.prototype;
m.init=function(){var a=this,b=new G,c=window.indexedDB.open("shaka_offline_db",4);c.onsuccess=function(c){c=c.target.result;a.j=c;var d=c.objectStoreNames;d.contains("manifest")&&d.contains("segment")?(D.debug("Mounting v1 idb storage cell"),d=new sk(c,"segment","manifest")):d=null;a.g=d;d=c.objectStoreNames;d.contains("manifest-v2")&&d.contains("segment-v2")?(D.debug("Mounting v2 idb storage cell"),d=new yk(c,"segment-v2","manifest-v2",!0)):d=null;a.h=d;d=c.objectStoreNames;d.contains("manifest-v3")&&
d.contains("segment-v3")?(D.debug("Mounting v3 idb storage cell"),d=new yk(c,"segment-v3","manifest-v3",!1)):d=null;a.i=d;c.objectStoreNames.contains("session-ids")?(D.debug("Mounting session ID idb storage cell"),c=new jk(c)):c=null;a.l=c;b.resolve()};c.onupgradeneeded=function(a){a=a.target.result;for(var b=r(["segment-v3","manifest-v3","session-ids"]),c=b.next();!c.done;c=b.next())c=c.value,a.objectStoreNames.contains(c)||a.createObjectStore(c,{autoIncrement:!0})};c.onerror=function(a){b.reject(new F(2,
9,9001,c.error));a.preventDefault()};return b};m.destroy=function(){var a=this;return u(function c(){return y(c,function(c){switch(c.A){case 1:if(!a.g){c.I(2);break}return v(c,a.g.destroy(),2);case 2:if(!a.h){c.I(4);break}return v(c,a.h.destroy(),4);case 4:if(!a.i){c.I(6);break}return v(c,a.i.destroy(),6);case 6:if(!a.l){c.I(8);break}return v(c,a.l.destroy(),8);case 8:a.j&&a.j.close(),w(c)}})})};
m.getCells=function(){var a=new Map;this.g&&a.set("v1",this.g);this.h&&a.set("v2",this.h);this.i&&a.set("v3",this.i);return a};m.getEmeSessionCell=function(){return this.l};
m.erase=function(){var a=this;return u(function c(){return y(c,function(c){switch(c.A){case 1:if(!a.g){c.I(2);break}return v(c,a.g.destroy(),2);case 2:if(!a.h){c.I(4);break}return v(c,a.h.destroy(),4);case 4:if(!a.i){c.I(6);break}return v(c,a.i.destroy(),6);case 6:return a.j&&a.j.close(),v(c,Ak(),8);case 8:return a.j=null,a.g=null,a.h=null,a.i=null,v(c,a.init(),0)}})})};
function Ak(){var a=new G,b=window.indexedDB.deleteDatabase("shaka_offline_db");b.onblocked=function(){D.D("Deleting","shaka_offline_db","is being blocked")};b.onsuccess=function(){a.resolve()};b.onerror=function(c){a.reject(new F(2,9,9001,b.error));c.preventDefault()};return a}rk("idb",function(){return $c("CrKey")||!window.indexedDB?null:new zk});function Bk(a,b,c,d){this.g=a;this.l=b;this.j=c;this.i=d;this.h=["offline:",a,"/",b,"/",c,"/",d].join("")}Bk.prototype.Xa=function(){return this.l};Bk.prototype.ya=function(){return this.j};Bk.prototype.key=function(){return this.i};Bk.prototype.toString=function(){return this.h};
function Ck(a){a=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(a);if(null==a)return null;var b=a[1];if("manifest"!=b&&"segment"!=b)return null;var c=a[2];if(!c)return null;var d=a[3];return d&&null!=b?new Bk(b,c,d,Number(a[4])):null};function Dk(a,b){this.h=a;this.g=b}function Ek(a,b){var c=new V(null,0);c.Ya(b.duration);var d=b.periods.map(function(b){return Fk(a,b,c)}),e=b.drmInfo?[b.drmInfo]:[];b.drmInfo&&d.forEach(function(a){a.variants.forEach(function(a){a.drmInfos=e})});return{presentationTimeline:c,minBufferTime:2,offlineSessionIds:b.sessionIds,periods:d}}
function Fk(a,b,c){var d=b.streams.filter(function(a){return"audio"==a.contentType}),e=b.streams.filter(function(a){return"video"==a.contentType});d=Gk(a,d,e);e=b.streams.filter(function(a){return"text"==a.contentType}).map(function(b){return Hk(a,b)});b.streams.forEach(function(d){d=d.segments.map(function(b,c){return Ik(a,c,b)});c.dc(d,b.startTime)});return{startTime:b.startTime,variants:Array.from(d.values()),textStreams:e}}
function Gk(a,b,c){for(var d=new Set,e=r(b),f=e.next();!f.done;f=e.next()){var h=r(f.value.variantIds);for(f=h.next();!f.done;f=h.next())d.add(f.value)}e=r(c);for(f=e.next();!f.done;f=e.next())for(h=r(f.value.variantIds),f=h.next();!f.done;f=h.next())d.add(f.value);e=new Map;d=r(d);for(f=d.next();!f.done;f=d.next())f=f.value,e.set(f,{id:f,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});b=r(b);for(d=b.next();!d.done;d=b.next())for(d=
d.value,f=Hk(a,d),h=r(d.variantIds),d=h.next();!d.done;d=h.next())d=e.get(d.value),d.language=f.language,d.primary=d.primary||f.primary,d.audio=f;c=r(c);for(b=c.next();!b.done;b=c.next())for(d=b.value,b=Hk(a,d),f=r(d.variantIds),d=f.next();!d.done;d=f.next())d=e.get(d.value),d.primary=d.primary||b.primary,d.video=b;return e}
function Hk(a,b){var c=b.segments.map(function(b,c){return Ik(a,c,b)}),d=new mg(c);c={id:b.id,originalId:b.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(a){return d.find(a)},getSegmentReference:function(a){return d.get(a)},initSegmentReference:null,presentationTimeOffset:b.presentationTimeOffset,mimeType:b.mimeType,codecs:b.codecs,width:b.width||void 0,height:b.height||void 0,frameRate:b.frameRate||void 0,pixelAspectRatio:b.pixelAspectRatio||void 0,
kind:b.kind,encrypted:b.encrypted,keyId:b.keyId,language:b.language,label:b.label||null,type:b.contentType,primary:b.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null};null!=b.initSegmentKey&&(c.initSegmentReference=Jk(a,b.initSegmentKey));return c}function Ik(a,b,c){var d=new Bk("segment",a.h,a.g,c.dataKey);return new S(b,c.startTime,c.endTime,function(){return[d.toString()]},0,null)}
function Jk(a,b){var c=new Bk("segment",a.h,a.g,b);return new jg(function(){return[c.toString()]},0,null)};function Kk(){this.g=null}m=Kk.prototype;m.configure=function(){};
m.start=function(a){var b=this;return u(function d(){var e,f,h,k,l,n;return y(d,function(d){switch(d.A){case 1:e=Ck(a);b.g=e;if(null==e||"manifest"!=e.g)return d["return"](Promise.reject(new F(2,1,9004,e)));f=new kk;za(d,2);return v(d,f.init(),4);case 4:return v(d,ok(f,e.Xa(),e.ya()),5);case 5:return h=d.G,v(d,h.getManifests([e.key()]),6);case 6:return k=d.G,l=k[0],n=new Dk(e.Xa(),e.ya()),d["return"](Ek(n,l));case 2:return Ea(d),v(d,f.destroy(),7);case 7:Ga(d,0)}})})};m.stop=function(){return Promise.resolve()};
m.update=function(){};
m.onExpirationUpdated=function(a,b){var c=this;return u(function e(){var f,h,k,l,n,p,q,t;return y(e,function(e){switch(e.A){case 1:return f=c.g,h=new kk,ya(e,2,3),v(e,h.init(),5);case 5:return v(e,ok(h,f.Xa(),f.ya()),6);case 6:return k=e.G,v(e,k.getManifests([f.key()]),7);case 7:l=e.G;n=l[0];p=n.sessionIds.includes(a);q=void 0==n.expiration||n.expiration>b;if(!p||!q){e.I(3);break}D.debug("Updating expiration for stored content");return v(e,k.updateManifestExpiration(f.key(),b),3);case 3:return Ea(e),
v(e,h.destroy(),10);case 10:Ga(e,0);break;case 2:t=Da(e),D.error("There was an error updating",f,t),e.I(3)}})})};U.kc("application/x-offline-manifest",Kk);function Lk(a){var b=Ck(a);return b&&"manifest"==b.g?Lk.s(a):b&&"segment"==b.g?Lk.u(b.key(),b):lc(new F(2,1,9004,a))}A("shaka.offline.OfflineScheme",Lk);Lk.s=function(a){a={uri:a,Xd:a,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return nc(a)};
Lk.u=function(a,b){var c=new kk;return nc(void 0).ra(function(){return c.init()}).ra(function(){return ok(c,b.Xa(),b.ya())}).ra(function(a){return a.getSegments([b.key()])}).ra(function(a){return{uri:b,Xd:b,data:a[0].data,headers:{}}})["finally"](function(){return c.destroy()})};Bc("offline",Lk);function Mk(a,b,c){return u(function e(){var f,h,k,l,n,p;return y(e,function(e){switch(e.A){case 1:f=[];for(var q=[],x=r(c),C=x.next();!C.done;C=x.next()){C=C.value;for(var z=!1,H=r(q),J=H.next();!J.done;J=H.next())if(J=J.value,Nk(J.info,C)){J.sessionIds.push(C.sessionId);z=!0;break}z||q.push({info:C,sessionIds:[C.sessionId]})}h=r(q);k=h.next();case 2:if(k.done){e.I(4);break}l=k.value;n=Ok(a,b,l);return v(e,n,5);case 5:p=e.G;f=f.concat(p);k=h.next();e.I(2);break;case 4:return e["return"](f)}})})}
function Ok(a,b,c){return u(function e(){var f,h,k,l;return y(e,function(e){switch(e.A){case 1:return f=new ed({cc:b,onError:function(){},ad:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ya(e,2),f.configure(a),v(e,md(f,c.info.keySystem,c.info.licenseUri,c.info.serverCertificate,c.info.audioCapabilities,c.info.videoCapabilities),4);case 4:Aa(e,3);break;case 2:return h=Da(e),D.D("Error initializing EME",h),v(e,f.destroy(),5);case 5:return e["return"]([]);case 3:return ya(e,6),
v(e,td(f),8);case 8:Aa(e,7);break;case 6:return k=Da(e),D.D("Error setting server certificate",k),v(e,f.destroy(),9);case 9:return e["return"]([]);case 7:return l=[],v(e,Promise.all(c.sessionIds.map(function(a){return u(function t(){var b;return y(t,function(c){switch(c.A){case 1:return ya(c,2),v(c,wd(f,a),4);case 4:l.push(a);Aa(c,0);break;case 2:b=Da(c),D.D("Error deleting offline session",b),w(c)}})})})),10);case 10:return v(e,f.destroy(),11);case 11:return e["return"](l)}})})}
function Nk(a,b){function c(a,b){return a.robustness==b.robustness&&a.contentType==b.contentType}return a.keySystem==b.keySystem&&a.licenseUri==b.licenseUri&&wc(a.audioCapabilities,b.audioCapabilities,c)&&wc(a.videoCapabilities,b.videoCapabilities,c)};function Pk(a,b){var c=Qk(),d=this;this.s=b;this.i=a;this.j=c;this.u=null;this.l=[];this.h=this.g=null;this.B=!0;this.C=Promise.resolve().then(function(){return Rk(d)})}Pk.prototype.destroy=function(){var a=this;return u(function c(){var d;return y(c,function(c){switch(c.A){case 1:return a.B=!1,a.h&&a.h.abort(),Sk(a),v(c,a.C,2);case 2:a.g&&a.g.Wa.Jb();for(var e=r(a.l),h=e.next();!h.done;h=e.next())d=h.value,d.Wa.Jb();a.g=null;a.l=[];a.s=null;w(c)}})})};
function Tk(a,b){var c={ec:function(){},$c:function(){},Jb:function(){},onError:function(){},bd:function(){},Yh:function(){}};a.l.push({create:b,Wa:c});a.h&&a.h.abort();Sk(a);return c}
function Rk(a){return u(function c(){return y(c,function(c){switch(c.A){case 1:if(a.B){if(0==a.l.length||a.g&&!a.g.Eb)var d=!1;else{a.g&&(a.g.Wa.Jb(),a.g=null);d=a.l.shift();var f=d.create(a.j);f?(d.Wa.ec(),a.g={node:f.node,payload:f.payload,Eb:f.Eb,Wa:d.Wa}):d.Wa.bd();d=!0}d?d=Promise.resolve():a.g?d=Uk(a):(a.s.Vg(a.i),a.u=new G,d=a.u);return v(c,d,1)}c.I(0)}})})}
function Uk(a){return u(function c(){var d,e;return y(c,function(c){switch(c.A){case 1:return a.i=a.s.xg(a.i,a.j,a.g.node,a.g.payload),ya(c,2),a.h=a.s.Vf(a.i,a.j,a.g.payload),v(c,a.h.promise,4);case 4:a.h=null;a.i==a.g.node&&(a.g.Wa.$c(),a.g=null);Aa(c,0);break;case 2:d=Da(c);if(7001==d.code)a.g.Wa.Jb();else a.g.Wa.onError(d);a.g=null;a.h=null;e=a;return v(c,a.s.handleError(a.j,d),5);case 5:e.i=c.G,w(c)}})})}function Sk(a){a.u&&(a.u.resolve(),a.u=null)};function Vk(a){this.g=null;for(var b=0;b<a.textTracks.length;++b){var c=a.textTracks[b];c.mode="disabled";"Shaka Player TextTrack"==c.label&&(this.g=c)}this.g||(this.g=a.addTextTrack("subtitles","Shaka Player TextTrack"));this.g.mode="hidden"}A("shaka.text.SimpleTextDisplayer",Vk);Vk.prototype.remove=function(a,b){if(!this.g)return!1;Wk(this.g,function(c){return c.startTime<b&&c.endTime>a});return!0};Vk.prototype.remove=Vk.prototype.remove;
Vk.prototype.append=function(a){var b=Xk,c=a.map(function(a){if(a.nestedCues.length){var b=a.nestedCues.map(function(a){return a.spacer?"\n":a.payload+" "}).join("").replace(/ $/m,"");a=a.clone();a.nestedCues=[];a.payload=b}return a}),d=[];a=this.g.cues?Array.from(this.g.cues):[];var e={};c=r(c);for(var f=c.next();!f.done;e={Zb:e.Zb},f=c.next())e.Zb=f.value,a.some(function(a){return function(b){return b.startTime==a.Zb.startTime&&b.endTime==a.Zb.endTime&&b.text==a.Zb.payload?!0:!1}}(e))||(f=b(e.Zb))&&
d.push(f);d.slice().sort(function(a,b){return a.startTime!=b.startTime?a.startTime-b.startTime:a.endTime!=b.endTime?a.endTime-b.startTime:"line"in VTTCue.prototype?d.indexOf(b)-d.indexOf(a):d.indexOf(a)-d.indexOf(b)}).forEach(function(a){this.g.addCue(a)}.bind(this))};Vk.prototype.append=Vk.prototype.append;Vk.prototype.destroy=function(){this.g&&Wk(this.g,function(){return!0});this.g=null;return Promise.resolve()};Vk.prototype.destroy=Vk.prototype.destroy;
Vk.prototype.isTextVisible=function(){return"showing"==this.g.mode};Vk.prototype.isTextVisible=Vk.prototype.isTextVisible;Vk.prototype.setTextVisibility=function(a){this.g.mode=a?"showing":"hidden"};Vk.prototype.setTextVisibility=Vk.prototype.setTextVisibility;
function Xk(a){if(a.startTime>=a.endTime)return D.D("Invalid cue times: "+a.startTime+" - "+a.endTime),null;var b=new VTTCue(a.startTime,a.endTime,a.payload);b.lineAlign=a.lineAlign;b.positionAlign=a.positionAlign;a.size&&(b.size=a.size);try{b.align=a.textAlign}catch(c){}"center"==a.textAlign&&"center"!=b.align&&(b.align="middle");"vertical-lr"==a.writingMode?b.vertical="lr":"vertical-rl"==a.writingMode&&(b.vertical="rl");1==a.lineInterpretation&&(b.snapToLines=!1);null!=a.line&&(b.line=a.line);null!=
a.position&&(b.position=a.position);return b}function Wk(a,b){var c=a.mode;a.mode="showing"==c?"showing":"hidden";for(var d=a.cues,e=d.length-1;0<=e;e--){var f=d[e];f&&b(f)&&a.removeCue(f)}a.mode=c};function Yk(a,b,c,d,e){var f=e in d,h=!0,k;for(k in b){var l=e+"."+k,n=f?d[e]:c[k];f||k in c?void 0===b[k]?void 0===n||f?delete a[k]:a[k]=rc(n):n.constructor==Object&&b[k]&&b[k].constructor==Object?(a[k]||(a[k]=rc(n)),l=Yk(a[k],b[k],n,d,l),h=h&&l):typeof b[k]!=typeof n||null==b[k]||"function"!=typeof b[k]&&b[k].constructor!=n.constructor?(D.Ic("Invalid config, wrong type for "+l),h=!1):("function"==typeof c[k]&&c[k].length!=b[k].length&&D.ha("Unexpected number of arguments for "+l),a[k]=b[k]):(D.Ic("Invalid config, unrecognized key "+
l),h=!1)}return h}A("shaka.util.ConfigUtils.mergeConfigObjects",Yk);function Zk(a,b){for(var c={},d=c,e=0,f=0;;){e=a.indexOf(".",e);if(0>e)break;if(0==e||"\\"!=a[e-1])f=a.substring(f,e).replace(/\\\./g,"."),d[f]={},d=d[f],f=e+1;e+=1}d[a.substring(f).replace(/\\\./g,".")]=b;return c}A("shaka.util.ConfigUtils.convertToConfigObject",Zk);function $k(){}A("shaka.util.PlayerConfiguration",$k);
function al(){var a=5E5,b=Infinity;navigator.connection&&(navigator.connection.downlink&&(a=1E6*navigator.connection.downlink),navigator.connection.saveData&&(b=360));var c={retryParameters:ic(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Fd,fairPlayTransform:!0,updateExpirationTime:1},d={retryParameters:ic(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(a){if(a)return null},clockSyncUri:"",ignoreDrmInfo:!1,
xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},e={retryParameters:ic(),failureCallback:function(a){D.error("Unhandled streaming error",a);return[a]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,
forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};if($c("Web0S")||Zc()||$c("CrKey"))e.stallSkip=0;var f={trackSelectionCallback:function(a){return u(function n(){return y(n,function(b){switch(b.A){case 1:return b["return"](a)}})})},progressCallback:function(a,b){return[a,b]},usePersistentLicense:!0},h={drm:c,manifest:d,streaming:e,offline:f,abrFactory:Me,abr:{enabled:!0,defaultBandwidthEstimate:a,switchInterval:8,bandwidthUpgradeTarget:.85,
bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:b,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},
playRangeStart:0,playRangeEnd:Infinity,textDisplayFactory:function(){return null}};f.trackSelectionCallback=function(a){return u(function n(){return y(n,function(b){switch(b.A){case 1:return b["return"](bl(a,h.preferredAudioLanguage))}})})};return h}
function cl(a,b,c){var d={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Yk(a,b,c||al(),d,"")}$k.mergeConfigObjects=cl;
function bl(a,b){var c=a.filter(function(a){return"variant"==a.type}),d=[],e=nb(b,c.map(function(a){return a.language}));e&&(d=c.filter(function(a){return E(a.language)==e}));0==d.length&&(d=c.filter(function(a){return a.primary}));0==d.length&&(1<(new Set(c.map(function(a){return a.language}))).size&&D.D("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),d=c);var f=d.filter(function(a){return a.height&&480>=a.height});f.length&&
(f.sort(function(a,b){return b.height-a.height}),d=f.filter(function(a){return a.height==f[0].height}));c=[];if(d.length){var h=Math.floor(d.length/2);d.sort(function(a,b){return a.bandwidth-b.bandwidth});c.push(d[h])}d=r(a);for(h=d.next();!h.done;h=d.next())h=h.value,"text"==h.type&&c.push(h);return c};function dl(){this.g=null;this.h=[]}function el(a,b){if(null==a.g)a.g={timestamp:Date.now()/1E3,state:b,duration:0};else{var c=Date.now()/1E3;a.g.duration=c-a.g.timestamp;a.g.state!=b&&(a.h.push(a.g),a.g={timestamp:c,state:b,duration:0})}}function fl(a,b){var c=0;a.g&&a.g.state==b&&(c+=a.g.duration);for(var d=r(a.h),e=d.next();!e.done;e=d.next())e=e.value,c+=e.state==b?e.duration:0;return c}
function gl(a){function b(a){return{timestamp:a.timestamp,state:a.state,duration:a.duration}}for(var c=[],d=r(a.h),e=d.next();!e.done;e=d.next())c.push(b(e.value));a.g&&c.push(b(a.g));return c};function hl(){this.h=this.i=null;this.g=[]};function il(){this.j=this.F=this.s=this.h=this.u=this.B=this.C=this.l=this.H=NaN;this.g=new dl;this.i=new hl};function W(a,b){var c=this;ab.call(this);this.u=jl;this.g=null;this.Sa=!1;this.l=new M;this.Ed=this.B=this.yb=this.i=this.F=this.j=this.Wc=this.M=this.Gc=this.K=this.Ra=this.C=this.O=this.s=this.R=null;this.Hf=1E9;this.Kc=new Set;this.ob=!0;this.sa=null;this.Gf=!1;this.Df=0;this.qa=null;this.V=new bi;this.h=kl(this);this.Pc={width:Infinity,height:Infinity};this.H=null;this.Oa=new ki(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount);this.oa=this.h.preferredTextLanguage;
this.Ca=this.h.preferredTextRole;this.Hd=[];b&&b(this);this.R=ll(this);this.l.v(window,"online",function(){c.fe()});this.P={name:"detach"};this.ba={name:"attach"};this.Aa={name:"unload"};this.Zd={name:"manifest-parser"};this.Yd={name:"manifest"};this.Qa={name:"media-source"};this.Id={name:"drm-engine"};this.ea={name:"load"};this.ge={name:"src-equals-drm-engine"};this.$a={name:"src-equals"};var d=new Map;d.set(this.ba,function(a,b){return oc(ml(c,a,b))});d.set(this.P,function(a){a.J&&(c.l.Ba(a.J,"error"),
a.J=null);c.g=null;a=Promise.resolve();return oc(a)});d.set(this.Aa,function(a){return oc(nl(c,a))});d.set(this.Qa,function(a){a=ol(c,a);return oc(a)});d.set(this.Zd,function(a,b){var d=pl(c,a,b);return oc(d)});d.set(this.Yd,function(a){return ql(c,a)});d.set(this.Id,function(a){a=rl(c,a);return oc(a)});d.set(this.ea,function(a,b){return oc(sl(c,a,b))});d.set(this.ge,function(a,b){var d=tl(c,a,b);return oc(d)});d.set(this.$a,function(a,b){return ul(c,a,b)});this.Ka=new Pk(this.P,{xg:function(a,b,
d,k){var e=null;a==c.P&&(e=d==c.P?c.P:c.ba);a==c.ba&&(e=d==c.P||b.J!=k.J?c.P:d==c.ba?c.ba:d==c.Qa||d==c.ea?c.Qa:d==c.$a?c.ge:null);a==c.Qa&&(e=d==c.ea&&b.J==k.J?c.Zd:c.Aa);a==c.Zd&&(e=vl(c.ea,c.Yd,c.Aa,d,b,k));a==c.Yd&&(e=vl(c.ea,c.Id,c.Aa,d,b,k));a==c.Id&&(e=vl(c.ea,c.ea,c.Aa,d,b,k));a==c.ge&&(e=d==c.$a&&b.J==k.J?c.$a:c.Aa);if(a==c.ea||a==c.$a)e=c.Aa;a==c.Aa&&(e=k.J&&b.J==k.J?c.ba:c.P);return e},Vf:function(a,b,h){c.dispatchEvent(new B("onstatechange",{state:a.name}));return d.get(a)(b,h)},handleError:function(a,
b){return u(function k(){return y(k,function(d){switch(d.A){case 1:return D.D("The walker saw an error:"),b instanceof F?D.D("Error Code:",b.code):(D.D("Error Message:",b.message),D.D("Error Stack:",b.stack)),v(d,nl(c,a),2);case 2:return d["return"](a.J?c.ba:c.P)}})})},Vg:function(a){c.dispatchEvent(new B("onstateidle",{state:a.name}))}});a&&this.pc(a,!0)}Za(W,ab);A("shaka.Player",W);
W.prototype.destroy=function(){var a=this;return u(function c(){var d;return y(c,function(c){switch(c.A){case 1:if(a.u==wl)return c["return"]();a.u=wl;d=Tk(a.Ka,function(){return{node:a.P,payload:Qk(),Eb:!1}});return v(c,new Promise(function(c){d.ec=function(){D.info("Preparing to destroy walker...")};d.$c=function(){c();a.dispatchEvent(new B("loaded"))};d.Jb=function(){c()};d.onError=function(){c()};d.bd=function(){c()}}),2);case 2:return v(c,a.Ka.destroy(),3);case 3:a.l&&(a.l.release(),a.l=null);
a.Ed=null;a.B=null;a.h=null;if(!a.R){c.I(0);break}return v(c,a.R.destroy(),5);case 5:a.R=null,w(c)}})})};W.prototype.destroy=W.prototype.destroy;W.version="v2.5.23";var xl=["2","5"];Qe=new function(a){this.g=a;this.i=Re;this.h=Se}(new Oe(Number(xl[0]),Number(xl[1])));var yl=["output-restricted","internal-error"],zl={};W.registerSupportPlugin=function(a,b){zl[a]=b};
function Al(){if(!(window.Promise&&window.Uint8Array&&Array.prototype.forEach))return!1;var a=bd();return a&&12>a||!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)?!1:Wc()?!0:Xc("application/x-mpegurl")}W.isBrowserSupported=Al;
W.probeSupport=function(){return Ld().then(function(a){for(var b=U.mh(),c={},d=r('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),e=
d.next();!e.done;e=d.next()){e=e.value;c[e]=Wc()?qe(e)?!0:MediaSource.isTypeSupported(e)||dc(e):Xc(e);var f=e.split(";")[0];c[f]=c[f]||c[e]}a={manifest:b,media:c,drm:a};for(var h in zl)a[h]=zl[h]();return a})};W.prototype.pc=function(a,b){b=void 0===b?!0:b;if(this.u==wl)return Promise.reject(Bl());var c=Qk();c.J=a;Wc()||(b=!1);var d=b?this.Qa:this.ba,e=Tk(this.Ka,function(){return{node:d,payload:c,Eb:!1}});e.ec=function(){return D.info("Starting attach...")};return Cl(e)};W.prototype.attach=W.prototype.pc;
W.prototype.detach=function(){var a=this;if(this.u==wl)return Promise.reject(Bl());var b=Tk(this.Ka,function(){return{node:a.P,payload:Qk(),Eb:!1}});b.ec=function(){return D.info("Starting detach...")};return Cl(b)};W.prototype.detach=W.prototype.detach;
W.prototype.ze=function(a){var b=this;a=void 0===a?!0:a;if(this.u==wl)return Promise.reject(Bl());Wc()||(a=!1);var c=Qk(),d=Tk(this.Ka,function(d){var e=d.J&&a?b.Qa:d.J?b.ba:b.P;c.J=d.J;return{node:e,payload:c,Eb:!1}});d.ec=function(){return D.info("Starting unload...")};return Cl(d)};W.prototype.unload=W.prototype.ze;
W.prototype.load=function(a,b,c){if(this.u==wl)return Promise.reject(Bl());this.dispatchEvent(new B("loading"));var d=Qk();d.uri=a;d.ue=Date.now()/1E3;c&&"string"!=typeof c&&(Pe("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),d.bb=function(){return new c});c&&"string"==typeof c&&(d.mimeType=c);void 0!==b&&(d.startTime=b);var e=Dl(this,d)?this.$a:this.ea,f=Tk(this.Ka,function(a){if(null==a.J)return null;d.J=a.J;return{node:e,payload:d,Eb:!0}});f.ec=
function(){return D.info("Starting load of "+a+"...")};return new Promise(function(a,b){f.bd=function(){return b(new F(2,7,7002))};f.$c=function(){return a()};f.Jb=function(){return b(Bl())};f.onError=function(a){return b(a)}})};W.prototype.load=W.prototype.load;
function Dl(a,b){if(b.bb)return!1;if(!Wc())return!0;var c=b.mimeType,d=b.uri||"";c||(c={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[U.getExtension(d)]);return c?""==(b.J||Yc()).canPlayType(c)?!1:U.isSupported(d,c)?ad()&&a.h.streaming.useNativeHlsOnSafari:!0:!1}
function ml(a,b,c){null==b.J&&(b.J=c.J,a.l.v(b.J,"error",function(){var b=El(a);b&&a.ub(b)}));a.g=b.J;return Promise.resolve()}
function nl(a,b){return u(function d(){var e;return y(d,function(d){switch(d.A){case 1:return a.u!=wl&&(a.u=jl),e=a.Hd.map(function(a){return a()}),a.Hd=[],v(d,Promise.all(e),2);case 2:a.dispatchEvent(new B("unloading"));b.bb=null;b.mimeType=null;b.startTime=null;b.uri=null;b.J&&(a.l.Ba(b.J,"loadedmetadata"),a.l.Ba(b.J,"playing"),a.l.Ba(b.J,"pause"),a.l.Ba(b.J,"ended"),a.l.Ba(b.J,"ratechange"));a.Ra&&(a.Ra.release(),a.Ra=null);a.Gc&&(a.Gc.stop(),a.Gc=null);if(!a.F){d.I(3);break}return v(d,a.F.stop(),
4);case 4:a.F=null;case 3:if(!a.B){d.I(5);break}return v(d,a.B.stop(),5);case 5:if(!a.j){d.I(7);break}return v(d,a.j.destroy(),8);case 8:a.j=null;case 7:a.K&&(a.K.release(),a.K=null);a.C&&(a.C.release(),a.C=null);if(!a.O){d.I(9);break}return v(d,a.O.destroy(),10);case 10:a.O=null;case 9:if(!b.J||!b.J.src){d.I(11);break}return v(d,new Promise(function(a){return(new K(a)).U(.1)}),12);case 12:b.J.removeAttribute("src"),b.J.load();case 11:if(!a.s){d.I(13);break}return v(d,a.s.destroy(),14);case 14:a.s=
null;case 13:a.V.g.clear(),a.yb=null,a.M=null,a.Kc.clear(),a.i=null,a.H=null,a.Od=null,a.ob=!0,Fl(a),w(d)}})})}function ol(a,b){return u(function d(){var e,f,h,k;return y(d,function(d){switch(d.A){case 1:return e=window.muxjs?new Qd:new Rd,f=a.h.textDisplayFactory,h=new f,a.Od=f,k=new ve(b.J,e,h),v(d,k.F,2);case 2:a.O=k,w(d)}})})}
function pl(a,b,c){return u(function e(){var f,h,k,l;return y(e,function(e){switch(e.A){case 1:b.bb=c.bb;b.mimeType=c.mimeType;b.uri=c.uri;f=b.uri;h=a.R;a.yb=f;if(b.bb){a.F=b.bb();e.I(2);break}k=a;return v(e,U.create(f,h,a.h.manifest.retryParameters,b.mimeType),3);case 3:k.F=e.G;case 2:l=rc(a.h.manifest),c.J&&"AUDIO"===c.J.nodeName&&(l.disableVideo=!0),a.F.configure(l),w(e)}})})}
function ql(a,b){var c=b.uri,d=a.R;a.Wc=new Wi(function(){return a.Nb()});Xi(a.Wc,function(b){Gl(a,"timelineregionadded",b)});var e={networkingEngine:d,filterNewPeriod:function(b){return a.vd(b)},filterAllPeriods:function(b){return Hl(a,b)},onTimelineRegionAdded:function(b){var c=a.Wc;a:{var d=r(c.g);for(var e=d.next();!e.done;e=d.next())if(e=e.value,e.schemeIdUri==b.schemeIdUri&&e.id==b.id&&e.startTime==b.startTime&&e.endTime==b.endTime){d=e;break a}d=null}null==d&&(c.g.add(b),c.h(b))},onEvent:function(b){return a.dispatchEvent(b)},
onError:function(b){return a.ub(b)}};return new kc(Promise.resolve().then(function(){return u(function h(){var b;return y(h,function(d){switch(d.A){case 1:return b=a,v(d,a.F.start(c,e),2);case 2:b.i=d.G;a.dispatchEvent(new B("manifestparsed"));if(0==a.i.periods.length)throw new F(2,4,4014);Il(a.i.periods);w(d)}})})}),function(){D.info("Aborting parser step...");return a.F.stop()})}
function rl(a,b){return u(function d(){return y(d,function(d){switch(d.A){case 1:return a.s=Jl(a,{cc:a.R,onError:function(b){a.ub(b)},ad:function(b){Kl(a,b)},onExpirationUpdated:function(b,d){Ll(a,b,d)},onEvent:function(b){a.dispatchEvent(b)}}),a.s.configure(a.h.drm),v(d,ld(a.s,Ai(a.i.periods),a.i.offlineSessionIds),2);case 2:return v(d,a.s.pc(b.J),3);case 3:Hl(a,a.i.periods),w(d)}})})}
function sl(a,b,c){return u(function e(){var f,h,k,l,n,p,q,t,x,C;return y(e,function(e){switch(e.A){case 1:return b.startTime=c.startTime,f=b.J,h=b.uri,a.yb=h,a.K=new Ei({Uc:function(){return b.J.playbackRate},Tc:function(){return b.J.defaultPlaybackRate},oe:function(a){b.J.playbackRate=a},bf:function(a){b.J.currentTime+=a}}),a.H=new il,k=function(){return Ml(a)},l=function(){return Nl(a)},a.l.v(f,"playing",k),a.l.v(f,"pause",k),a.l.v(f,"ended",k),a.l.v(f,"ratechange",l),n=a.h.abrFactory,a.B&&a.Ed==
n||(a.Ed=n,a.B=new n,a.B.configure(a.h.abr)),Ol(a,a.i.periods),a.Oa=new ki(a.h.preferredAudioLanguage,a.h.preferredVariantRole,a.h.preferredAudioChannelCount),a.oa=a.h.preferredTextLanguage,a.Ca=a.h.preferredTextRole,Pl(a.i.presentationTimeline,a.h.playRangeStart,a.h.playRangeEnd),a.B.init(function(b,c,e){c=void 0===c?!1:c;e=void 0===e?0:e;D.debug("switch_");a:{var f=r(a.i.periods);for(var h=f.next();!h.done;h=f.next())if(h=h.value,h.variants.includes(b)){f=h;break a}f=null}Ql(a,f,b,!0);a.j&&rj(a.j,
b,c,e)&&Rl(a)}),a.C=Sl(a,b.startTime),a.Ra=Tl(a),p=Math.max(a.i.minBufferTime,a.h.streaming.rebufferingGoal),Ul(a,p),a.j=Vl(a),a.j.configure(a.h.streaming),N.Je(a.i,a.h.preferredAudioChannelCount),a.u=Wl,a.dispatchEvent(new B("streaming")),v(e,a.j.start(),2);case 2:a.h.streaming.startAtSegmentBoundary&&(q=a.C.l(),t=Xl(a,q),a.C.C(t)),a.i.periods.forEach(a.vd.bind(a)),Yl(a),Rl(a),x=Zl(a)||a.i.periods[0],C=x.variants.some(function(a){return a.primary}),a.h.preferredAudioLanguage||C||D.D("No preferred audio language set.  We will choose an arbitrary language initially"),
$l(a,x.variants),a.l.Ma(f,"loadedmetadata",function(){a.H.h=Date.now()/1E3-c.ue}),w(e)}})})}
function tl(a,b,c){return u(function e(){var f,h;return y(e,function(e){switch(e.A){case 1:return f=Ub,a.s=Jl(a,{cc:a.R,onError:function(b){a.ub(b)},ad:function(b){Kl(a,b)},onExpirationUpdated:function(b,c){Ll(a,b,c)},onEvent:function(b){a.dispatchEvent(b)}}),a.s.configure(a.h.drm),h={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,
presentationTimeOffset:0,mimeType:c.mimeType?c.mimeType.split(";")[0]:"video/mp4",codecs:c.mimeType?Uc(c.mimeType):"",encrypted:!0,keyId:null,language:"und",label:null,type:f.wb,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},v(e,ld(a.s,[h],[]),2);case 2:return v(e,a.s.pc(b.J),0)}})})}
function ul(a,b,c){function d(){return Ml(a)}b.uri=c.uri;b.startTime=c.startTime;a.yb=b.uri;a.H=new il;a.C=new Pi(b.J);null!=b.startTime&&a.C.C(b.startTime);a.K=new Ei({Uc:function(){return b.J.playbackRate},Tc:function(){return b.J.defaultPlaybackRate},oe:function(a){b.J.playbackRate=a},bf:function(a){b.J.currentTime+=a}});Ul(a,a.h.streaming.rebufferingGoal);a.l.v(b.J,"playing",d);a.l.v(b.J,"pause",d);a.l.v(b.J,"ended",d);a.l.v(b.J,"ratechange",function(){return Nl(a)});"none"!=a.g.preload&&a.l.Ma(b.J,
"loadedmetadata",function(){a.H.h=Date.now()/1E3-c.ue});a.g.audioTracks&&(a.l.v(a.g.audioTracks,"addtrack",function(){return Yl(a)}),a.l.v(a.g.audioTracks,"removetrack",function(){return Yl(a)}),a.l.v(a.g.audioTracks,"change",function(){return Yl(a)}));if(a.g.textTracks){var e=a.g.textTracks;a.l.v(e,"addtrack",function(){return Yl(a)});a.l.v(e,"removetrack",function(){return Yl(a)});a.l.v(e,"change",function(){return Yl(a)})}b.J.src=b.uri;(Zc()||$c("Web0S"))&&b.J.load();a.u=am;a.dispatchEvent(new B("streaming"));
var f=new G;Gi(a.g,HTMLMediaElement.HAVE_METADATA,a.l,function(){f.resolve()});var h=!1;a.Hd.push(function(){h=!0});Gi(a.g,HTMLMediaElement.HAVE_CURRENT_DATA,a.l,function(){return u(function l(){var b;return y(l,function(c){switch(c.A){case 1:if(h)return c["return"]();bm(a);b=cm(a);if(b.find(function(a){return"disabled"!=a.mode})){c.I(2);break}return v(c,new Promise(function(b){a.l.Ma(a.g.textTracks,"change",b);(new K(b)).U(1)}),2);case 2:if(h)return c["return"]();dm(a);w(c)}})})});a.g.error?f.reject(El(a)):
"none"==a.g.preload&&(D.ha('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),f.resolve());a.l.Ma(a.g,"error",function(){f.reject(El(a))});return new kc(f,function(){f.reject(new F(2,7,7001));return Promise.resolve()})}
function bm(a){var b=a.h.preferredAudioLanguage;if(""!=b){a.hd(b);var c=a.h.preferredVariantRole;""!=c&&a.hd(b,c)}}function dm(a){var b=a.h.preferredTextLanguage;if(""!=b){a.jd(b);var c=a.h.preferredTextRole;""!=c&&a.jd(b,c)}}
function Il(a){function b(a){return a.video&&a.audio||a.video&&a.video.codecs.includes(",")}a.some(function(a){return a.variants.some(b)})&&(D.debug("Found variant with audio and video content, so filtering out audio-only content in all periods."),a.forEach(function(a){a.variants=a.variants.filter(b)}))}function Jl(a,b){return new ed(b,a.h.drm.updateExpirationTime)}function ll(a){return new L(function(b,c){a.B&&a.B.segmentDownloaded(b,c)})}
function Sl(a,b){return new Qi(a.g,a.i,a.h.streaming,b,function(){a.Ra&&zi(a.Ra,!0);a.j&&yj(a.j);a.M&&em(a)},function(b){return a.dispatchEvent(b)})}function Tl(a){var b=new Ci(a.i);Di(b,function(){Yl(a)});var c=new Yi(a.Wc);bj(c,function(b){Gl(a,"timelineregionenter",b)},function(b){Gl(a,"timelineregionexit",b)},function(b,c){c||(Gl(a,"timelineregionenter",b),Gl(a,"timelineregionexit",b))});var d=new yi(a.g);d.g.add(b);d.g.add(c);return d}
function Ul(a,b){a.M=new oi;a.M.g=qi;ri(a.M,b,Math.min(.5,b/2));Fl(a);a.Gc=(new K(function(){em(a)})).Na(.25)}function em(a){switch(a.u){case am:var b=a.g.ended?!0:Sd(a.g.buffered)>=a.g.duration-1;break;case Wl:a:if(a.g.ended||Ae(a.O))b=!0;else{if(a.i.presentationTimeline.$()){var c=a.i.presentationTimeline.Xb();if(Sd(a.g.buffered)>=c){b=!0;break a}}b=!1}break;default:b=!1}var d=Ud(a.g.buffered,a.g.currentTime);c=a.M;var e=b,f=c.h.get(c.g);b=c.g;d=e||d>=f?pi:qi;c.g=d;b!=d&&Fl(a)}
function Vl(a){return new cj(a.i,{Cb:function(){return a.C.l()},getBandwidthEstimate:function(){return a.B.getBandwidthEstimate()},Y:a.O,cc:a.R,ef:a.Tg.bind(a),df:a.Rf.bind(a),onError:a.ub.bind(a),onEvent:function(b){return a.dispatchEvent(b)},Xg:a.Yg.bind(a),Vd:a.dh.bind(a)})}W.prototype.configure=function(a,b){2==arguments.length&&"string"==typeof a&&(a=Zk(a,b));var c=cl(this.h,a,kl(this));fm(this);return c};W.prototype.configure=W.prototype.configure;
function fm(a){if(a.F){var b=rc(a.h.manifest);a.g&&"AUDIO"===a.g.nodeName&&(b.disableVideo=!0);a.F.configure(b)}a.s&&a.s.configure(a.h.drm);if(a.j){a.j.configure(a.h.streaming);try{a.i.periods.forEach(a.vd.bind(a))}catch(f){a.ub(f)}var c=hj(a.j),d=jj(a.j);b=Zl(a);c=N.Te(c,d,b.variants);a.B&&c&&c.allowedByApplication&&c.allowedByKeySystem?$l(a,b.variants):(D.debug("Choosing new streams after changing configuration"),gm(a,b))}if(a.O&&(b=a.h.textDisplayFactory,a.Od!=b)){c=new b;d=a.O;var e=d.l;d.l=c;
e&&(c.setTextVisibility(e.isTextVisible()),e.destroy());d.g&&(d.g.i=c);a.Od=b;a.j&&(b=a.j,(c=b.h.get("text"))&&qj(b,c.stream,!0,0,!0))}a.B&&(a.B.configure(a.h.abr),a.h.abr.enabled&&!a.ob?a.B.enable():a.B.disable(),hm(a));a.M&&(b=a.h.streaming.rebufferingGoal,a.i&&(b=Math.max(b,a.i.minBufferTime)),ri(a.M,b,Math.min(.5,b/2)))}W.prototype.getConfiguration=function(){var a=kl(this);cl(a,this.h,kl(this));return a};W.prototype.getConfiguration=W.prototype.getConfiguration;
W.prototype.vh=function(){for(var a in this.h)delete this.h[a];cl(this.h,kl(this),kl(this));fm(this)};W.prototype.resetConfiguration=W.prototype.vh;W.prototype.mg=function(){return this.u};W.prototype.getLoadMode=W.prototype.mg;W.prototype.vg=function(){return this.g};W.prototype.getMediaElement=W.prototype.vg;W.prototype.tc=function(){return this.R};W.prototype.getNetworkingEngine=W.prototype.tc;W.prototype.Rc=function(){return this.yb};W.prototype.getAssetUri=W.prototype.Rc;
W.prototype.sg=function(){Pe("getManifestUri",'Please use "getAssetUri" instead.');return this.Rc()};W.prototype.getManifestUri=W.prototype.sg;W.prototype.$=function(){return this.i?this.i.presentationTimeline.$():this.g&&this.g.src?Infinity==this.g.duration:!1};W.prototype.isLive=W.prototype.$;W.prototype.Gb=function(){return this.i?this.i.presentationTimeline.Gb():!1};W.prototype.isInProgress=W.prototype.Gb;
W.prototype.Ye=function(){if(this.i){if(!this.i.periods.length)return!1;var a=this.i.periods[0].variants;return a.length?!a[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight:!1};W.prototype.isAudioOnly=W.prototype.Ye;W.prototype.Nb=function(){if(this.i){var a=this.i.presentationTimeline;return{start:a.Wb(),end:a.fb()}}return this.g&&this.g.src&&(a=this.g.seekable,a.length)?{start:a.start(0),end:a.end(a.length-1)}:{start:0,end:0}};
W.prototype.seekRange=W.prototype.Nb;W.prototype.keySystem=function(){return zd(this.drmInfo())};W.prototype.keySystem=W.prototype.keySystem;W.prototype.drmInfo=function(){return this.s?this.s.g:null};W.prototype.drmInfo=W.prototype.drmInfo;W.prototype.sc=function(){return this.s?this.s.sc():Infinity};W.prototype.getExpiration=W.prototype.sc;W.prototype.$b=function(){return this.M?this.M.g==qi:!1};W.prototype.isBuffering=W.prototype.$b;
W.prototype.Bd=function(){if(this.K){var a=this.K;a=a.j?0:a.i}else a=0;return a};W.prototype.getPlaybackRate=W.prototype.Bd;W.prototype.ye=function(a){0==a?D.ha("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.K&&this.K.set(a),this.u==Wl&&pj(this.j,1<Math.abs(a)))};W.prototype.trickPlay=W.prototype.ye;W.prototype.Fe=function(){var a=this.K.Tc();this.u==am&&this.K.set(a);this.u==Wl&&(this.K.set(a),pj(this.j,!1))};W.prototype.cancelTrickPlay=W.prototype.Fe;
W.prototype.Yb=function(){if(this.i&&this.C){for(var a=im(this),b=[],c=r(jm(this)),d=c.next();!d.done;d=c.next()){d=d.value;var e=N.od(d);e.active=d==a;b.push(e)}return b}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(a){return N.Ue(a)}):[]};W.prototype.getVariantTracks=W.prototype.Yb;
W.prototype.pb=function(){if(this.i&&this.C){for(var a=km(this),b=[],c=r(lm(this)),d=c.next();!d.done;d=c.next()){d=d.value;var e=N.ld(d);e.active=d==a;b.push(e)}return b}return this.g&&this.g.src&&this.g.textTracks?cm(this).map(function(a){return N.Jg(a)}):[]};W.prototype.getTextTracks=W.prototype.pb;
W.prototype.ie=function(a){if(this.i&&this.j){var b=Zl(this),c=b.textStreams.find(function(b){return b.id==a.id});c?(mm(this,b,c,!1),nm(this,c),this.oa=c.language):D.error("No stream with id",a.id)}else if(this.g&&this.g.src&&this.g.textTracks){b=cm(this);b=r(b);for(c=b.next();!c.done;c=b.next())c=c.value,N.Dd(c)==a.id?c.mode=this.Sa?"showing":"hidden":c.mode="disabled";om(this)}};W.prototype.selectTextTrack=W.prototype.ie;
W.prototype.yh=function(){Pe("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var a=this.pb().filter(function(a){return"application/cea-608"==a.mimeType});0<a.length?this.ie(a[0]):D.D("Unable to find the text track embedded in the video.")};W.prototype.selectEmbeddedTextTrack=W.prototype.yh;
W.prototype.Rh=function(){Pe("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var a=this.pb().filter(function(a){return a.active})[0];return a?"application/cea-608"==a.mimeType:!1};W.prototype.usingEmbeddedTextTrack=W.prototype.Rh;
W.prototype.je=function(a,b,c){c=void 0===c?0:c;if(this.i&&this.j){var d=Zl(this);this.h.abr.enabled&&D.ha("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var e=d.variants.find(function(b){return b.id==a.id});e?N.ac(e)?(Ql(this,d,e,!1),pm(this,e,b,c),this.Oa=new ji(e),$l(this,d.variants)):D.error("Unable to switch to restricted track",a.id):D.error("No variant with id",a.id)}else if(this.g&&
this.g.audioTracks){b=Array.from(this.g.audioTracks);b=r(b);for(c=b.next();!c.done;c=b.next())c=c.value,N.Dd(c)==a.id&&(c.enabled=!0);qm(this)}};W.prototype.selectVariantTrack=W.prototype.je;W.prototype.dg=function(){return rm(this.Yb())};W.prototype.getAudioLanguagesAndRoles=W.prototype.dg;W.prototype.Eg=function(){return rm(this.pb())};W.prototype.getTextLanguagesAndRoles=W.prototype.Eg;W.prototype.cg=function(){return Array.from(sm(this.Yb()))};W.prototype.getAudioLanguages=W.prototype.cg;
W.prototype.Dg=function(){return Array.from(sm(this.pb()))};W.prototype.getTextLanguages=W.prototype.Dg;
W.prototype.hd=function(a,b){if(this.i&&this.C){var c=Zl(this);this.Oa=new ki(a,b||"",0,"");if(!this.h.abr.enabled){var d=function(a,b){return a.video||b.video?a.video&&b.video?Math.abs((a.video.height||0)-(b.video.height||0))+Math.abs((a.video.width||0)-(b.video.width||0)):Infinity:0},e=Zl(this)||this.i.periods[0],f=di(this.V,e).variant,h=this.Oa.create(e.variants);e=null;h=r(h.values());for(var k=h.next();!k.done;k=h.next())if(k=k.value,!e||d(e,f)>d(k,f))e=k;if(e){c=N.od(e);this.je(c,!0);return}}tm(this,
c)}else if(this.g&&this.g.audioTracks){e=Array.from(this.g.audioTracks);c=E(a);f=d=null;e=r(e);for(h=e.next();!h.done;h=e.next())h=h.value,k=N.Ue(h),E(k.language)==c&&(d=h,b?k.roles.includes(b)&&(f=h):0==k.roles.length&&(f=h));f?(f.enabled=!0,qm(this)):d&&(d.enabled=!0,qm(this))}};W.prototype.selectAudioLanguage=W.prototype.hd;
W.prototype.jd=function(a,b){if(this.i&&this.C){var c=Zl(this);this.oa=a;this.Ca=b||"";var d=N.rc(c.textStreams,this.oa,this.Ca)[0]||null;d&&(mm(this,c,d,!1),(this.h.streaming.alwaysStreamText||this.gb())&&nm(this,d))}else{var e=E(a);(c=this.pb().filter(function(a){return E(a.language)==e&&(!b||a.roles.includes(b))})[0])&&this.ie(c)}};W.prototype.selectTextLanguage=W.prototype.jd;
W.prototype.Ah=function(a){if(this.i&&this.C){for(var b=Zl(this),c=null,d=r(jm(this)),e=d.next();!e.done;e=d.next())if(e=e.value,e.audio.label==a){c=e;break}null==c?D.D("No variants were found with label: "+a+". Ignoring the request to switch."):(this.Oa=new ki(c.language,"",0,a),tm(this,b))}};W.prototype.selectVariantsByLabel=W.prototype.Ah;
W.prototype.gb=function(){var a=this.Sa;return this.O?this.O.l.isTextVisible():this.g&&this.g.src&&this.g.textTracks?cm(this).some(function(a){return"showing"==a.mode}):a};W.prototype.isTextTrackVisible=W.prototype.gb;function cm(a){return Array.from(a.g.textTracks).filter(function(a){return"metadata"!=a.kind&&"chapters"!=a.kind&&"Shaka Player TextTrack"!=a.label})}
W.prototype.re=function(a){var b=this;return u(function d(){var e,f,h,k,l,n;return y(d,function(d){switch(d.A){case 1:e=b.Sa;f=!!a;if(e==f)return d["return"]();b.Sa=f;if(b.u!=Wl){if(b.g&&b.g.src&&b.g.textTracks){h=cm(b);for(var p=r(h),t=p.next();!t.done;t=p.next())k=t.value,"disabled"!=k.mode&&(k.mode=f?"showing":"hidden")}d.I(2);break}b.O.l.setTextVisibility(f);if(b.h.streaming.alwaysStreamText){d.I(2);break}if(!f){oj(b.j);d.I(2);break}if(ij(b.j,"text")){d.I(2);break}l=Zl(b);n=N.rc(l.textStreams,
b.oa,b.Ca);if(!(0<n.length)){d.I(2);break}return v(d,kj(b.j,n[0]),2);case 2:um(b),w(d)}})})};W.prototype.setTextTrackVisibility=W.prototype.re;
W.prototype.zg=function(){if(!this.$())return D.D("getPlayheadTimeAsDate is for live streams!"),null;var a=this.Ka.j,b=0;if(this.C)b=this.C.l();else if(a){if(null==a.startTime)return new Date;b=a.startTime}if(this.i)return new Date(1E3*(this.i.presentationTimeline.j+this.g.currentTime));if(this.g&&this.g.getStartDate)return a=this.g.getStartDate(),isNaN(a.getTime())?(D.D("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(a.getTime()+1E3*b);D.D("No way to get playhead time as Date!");
return null};W.prototype.getPlayheadTimeAsDate=W.prototype.zg;W.prototype.Bg=function(){if(!this.$())return D.D("getPresentationStartTimeAsDate is for live streams!"),null;if(this.i)return new Date(1E3*this.i.presentationTimeline.j);if(this.g&&this.g.getStartDate){var a=this.g.getStartDate();return isNaN(a.getTime())?(D.D("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):a}D.D("No way to get presentation start time as Date!");return null};
W.prototype.getPresentationStartTimeAsDate=W.prototype.Bg;W.prototype.zd=function(){var a={total:[],audio:[],video:[],text:[]};this.u==am&&(a.total=Vd(this.g.buffered));this.u==Wl&&this.O.zd(a);return a};W.prototype.getBufferedInfo=W.prototype.zd;
W.prototype.getStats=function(){if(this.u!=Wl&&this.u!=am)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};Ml(this);var a=this.g;if(a.getVideoPlaybackQuality){a=a.getVideoPlaybackQuality();var b=this.H,c=Number(a.totalVideoFrames);b.C=Number(a.droppedVideoFrames);b.B=c;this.H.u=Number(a.corruptedVideoFrames)}this.s?
(a=this.s,a=a.P?a.P:NaN):a=NaN;this.H.s=a;if(this.u==Wl){if(a=im(this))this.H.F=a.bandwidth;a&&a.video&&(b=this.H,c=a.video.height||NaN,b.H=a.video.width||NaN,b.l=c);a=this.B.getBandwidthEstimate();this.H.j=a}var d=this.H;a=d.H;b=d.l;c=d.F;var e=d.B,f=d.C,h=d.u,k=d.j,l=d.h,n=fl(d.g,"playing"),p=fl(d.g,"paused"),q=fl(d.g,"buffering"),t=d.s,x=gl(d.g),C=[];d=r(d.i.g);for(var z=d.next();!z.done;z=d.next())z=z.value,C.push({timestamp:z.timestamp,id:z.id,type:z.type,fromAdaptation:z.fromAdaptation,bandwidth:z.bandwidth});
return{width:a,height:b,streamBandwidth:c,decodedFrames:e,droppedFrames:f,corruptedFrames:h,estimatedBandwidth:k,loadLatency:l,playTime:n,pauseTime:p,bufferingTime:q,licenseTime:t,stateHistory:x,switchHistory:C}};W.prototype.getStats=W.prototype.getStats;
W.prototype.addTextTrack=function(a,b,c,d,e,f){var h=this;return u(function l(){var n,p,q,t,x,C,z,H,J;return y(l,function(l){switch(l.A){case 1:if(h.u==am)throw D.error("Cannot add text when loaded with src="),Error("State error!");if(h.u!=Wl)throw D.error("Must call load() and wait for it to resolve before adding text tracks."),Error("State error!");n=Zl(h);p=Ub;q=h.i.periods.indexOf(n);t=q+1;x=t>=h.i.periods.length?h.i.presentationTimeline.wa():h.i.periods[t].startTime;C=x-n.startTime;if(Infinity==
C)throw new F(1,4,4033);z=new S(1,0,C,function(){return[a]},0,null);H={id:h.Hf++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(a){return 1==a?z:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:d,codecs:e||"",kind:c,encrypted:!1,keyId:null,language:b,label:f||null,type:p.Pa,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,
audioSamplingRate:null,closedCaptions:null};h.Kc.add(H);n.textStreams.push(H);return v(l,kj(h.j,H),2);case 2:return(J=ij(h.j,"text"))&&ci(h.V,n,J),h.Kc["delete"](H),D.debug("Choosing new streams after adding a text stream"),gm(h,n),Yl(h),l["return"](N.ld(H))}})})};W.prototype.addTextTrack=W.prototype.addTextTrack;W.prototype.me=function(a,b){this.Pc.width=a;this.Pc.height=b};W.prototype.setMaxHardwareResolution=W.prototype.me;
W.prototype.fe=function(){if(this.u==Wl){var a=this.j;if(a.j)D.error("Unable to retry after StreamingEngine is destroyed!"),a=!1;else if(a.C)D.error("Unable to retry after StreamingEngine encountered a fatal error!"),a=!1;else{for(var b=r(a.h.values()),c=b.next();!c.done;c=b.next()){c=c.value;var d=uj(c);c.xc&&(D.info(d,"Retrying after failure..."),c.xc=!1,nj(a,c,.1))}a=!0}}else a=!1;return a};W.prototype.retryStreaming=W.prototype.fe;W.prototype.qg=function(){return this.i};
W.prototype.getManifest=W.prototype.qg;W.prototype.rg=function(){return this.F?this.F.constructor:null};W.prototype.getManifestParserFactory=W.prototype.rg;function Ql(a,b,c,d){di(a.V,b).variant=c;a=a.H.i;a.i!=c&&(a.i=c,a.g.push({timestamp:Date.now()/1E3,id:c.id,type:"variant",fromAdaptation:d,bandwidth:c.bandwidth}))}function mm(a,b,c,d){ci(a.V,b,c);a=a.H.i;a.h!=c&&(a.h=c,a.g.push({timestamp:Date.now()/1E3,id:c.id,type:"text",fromAdaptation:d,bandwidth:null}))}
function kl(a){var b=al();b.streaming.failureCallback=function(b){var c=[1001,1002,1003];a.$()&&c.includes(b.code)&&(b.severity=1,D.D("Live streaming error.  Retrying automatically..."),a.fe())};b.textDisplayFactory=function(){return new Vk(a.g)};return b}
function Ol(a,b){for(var c=0;c<b.length;c++){for(var d=b[c],e=new Map,f=r(d.variants),h=f.next();!h.done;h=f.next())if(h=h.value,h.video&&h.video.closedCaptions){h=h.video;for(var k=r(h.closedCaptions.keys()),l=k.next();!l.done;l=k.next())if(l=l.value,!e.has(l)){var n={id:a.Hf++,originalId:l,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",
codecs:"",kind:"caption",encrypted:!1,keyId:null,language:h.closedCaptions.get(l),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:h.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};e.set(l,n)}}e=r(e.values());for(f=e.next();!f.done;f=e.next())d.textStreams.push(f.value)}}
function Hl(a,b){var c=a.j?hj(a.j):null,d=a.j?jj(a.j):null;b.forEach(N.filterNewPeriod.bind(null,a.s,c,d));c=vc(b,function(a){return a.variants.some(N.ac)});if(0==c)throw new F(2,4,4032);if(c<b.length)throw new F(2,4,4011);b.forEach(function(a){N.Ce(a.variants,this.h.restrictions,this.Pc)&&this.j&&Zl(this)==a&&Yl(this);vm(this,a.variants)}.bind(a))}m=W.prototype;
m.vd=function(a){var b=this.j?hj(this.j):null,c=this.j?jj(this.j):null;N.filterNewPeriod(this.s,b,c,a);b=a.variants;if(!b.some(N.ac))throw new F(2,4,4011);vm(this,a.variants);N.Ce(b,this.h.restrictions,this.Pc)&&this.j&&Zl(this)==a&&Yl(this);if((a=this.s?this.s.g:null)&&this.s.u)for(b=r(b),c=b.next();!c.done;c=b.next()){c=r(c.value.drmInfos);for(var d=c.next();!d.done;d=c.next())if(d=d.value,d.keySystem==a.keySystem){d=r(d.initData||[]);for(var e=d.next();!e.done;e=d.next())e=e.value,vd(this.s,e.initDataType,
e.initData)}}};function pm(a,b,c,d){c=void 0===c?!1:c;d=void 0===d?0:d;if(a.ob)return a.sa=b,a.Gf=c,a.Df=d,!0;(b=rj(a.j,b,c,d))&&qm(a);return b}function nm(a,b){if(a.ob)return a.qa=b,!0;var c=qj(a.j,b,!0,0,!1);c&&om(a);return c}
function Xl(a,b){function c(a,b){if(!a)return null;var c=a.findSegmentPosition(b-f.startTime);return null==c?null:(c=a.getSegmentReference(c))?c.startTime+f.startTime:null}var d=hj(a.j),e=jj(a.j),f=Zl(a);d=c(d,b);e=c(e,b);return null!=e&&null!=d?Math.max(e,d):null!=e?e:null!=d?d:b}function Fl(a){var b=a.$b();if(a.H&&a.M&&a.C){var c=a.K;c.j=b;Fi(c);Ml(a)}a.dispatchEvent(new B("buffering",{buffering:b}))}function Nl(a){var b=a.g.playbackRate;0!=b&&a.K.set(b)}
function Ml(a){if(a.H&&a.M){var b=a.H.g;a.M.g==qi?el(b,"buffering"):a.g.paused?el(b,"paused"):a.g.ended?el(b,"ended"):el(b,"playing")}}function $l(a,b){try{vm(a,b)}catch(d){return a.ub(d),null}var c=b.filter(function(a){return N.ac(a)});c=a.Oa.create(c);a.B.setVariants(Array.from(c.values()));return a.B.chooseVariant()}function gm(a,b){var c=tm(a,b,!1),d=N.rc(b.textStreams,a.oa,a.Ca)[0]||null,e=!1;d&&(a.h.streaming.alwaysStreamText||a.gb())&&(mm(a,b,d,!0),e=nm(a,d));(c||e)&&Rl(a)}
function tm(a,b,c){c=void 0===c?!0:c;var d=$l(a,b.variants),e=!1;d&&(Ql(a,b,d,!0),e=pm(a,d,!0));c&&e&&Rl(a);return e}
m.Tg=function(a){D.debug("onChooseStreams_",a);try{D.T("onChooseStreams_, choosing variant from ",a.variants);D.T("onChooseStreams_, choosing text from ",a.textStreams);this.ob=!0;this.B.disable();hm(this);D.debug("Choosing new streams after period changed");var b=$l(this,a.variants),c=N.rc(a.textStreams,this.oa,this.Ca)[0]||null;this.sa&&(a.variants.includes(this.sa)&&(b=this.sa),this.sa=null);this.qa&&(a.textStreams.includes(this.qa)&&(c=this.qa),this.qa=null);b&&Ql(this,a,b,!0);c&&mm(this,a,c,
!0);var d=this.j,e=d.h.get("video");if(e)var f=d.i.periods[e.Fa];else{var h=d.h.get("audio");f=h?d.i.periods[h.Fa]:null}var k=b?b.audio:null;if(!f&&c){var l;if(l=k){a=c;var n=E(this.h.preferredTextLanguage),p=E(k.language),q=E(a.language);l=fb(q,n)&&!fb(p,q)}l&&(this.Sa=!0);this.Sa&&this.O.l.setTextVisibility(!0);um(this)}var t=this.h.streaming.alwaysStreamText||this.gb()?{variant:b,text:c}:{variant:b,text:null};D.T("onChooseStreams_, chose variant ",t.variant);D.T("onChooseStreams_, chose text ",
t.text);return t}catch(x){return this.ub(x),{variant:null,text:null}}};m.Rf=function(){D.debug("canSwitch_");this.ob=!1;this.h.abr.enabled&&(this.B.enable(),hm(this));this.sa&&(rj(this.j,this.sa,this.Gf,this.Df),qm(this),this.sa=null);this.qa&&(qj(this.j,this.qa,!0,0,!1),om(this),this.qa=null)};m.Yg=function(){this.F&&this.F.update&&this.F.update()};m.dh=function(){this.C&&this.C.F()};function Rl(a){wm(a,new B("adaptation"))}function Yl(a){wm(a,new B("trackschanged"))}
function qm(a){wm(a,new B("variantchanged"))}function om(a){wm(a,new B("textchanged"))}function um(a){wm(a,new B("texttrackvisibility"))}function hm(a){wm(a,new B("abrstatuschanged",{Rg:a.h.abr.enabled}))}m.ub=function(a){if(this.u!=wl){var b=new B("error",{detail:a});this.dispatchEvent(b);b.defaultPrevented&&(a.handled=!0)}};function Gl(a,b,c){a.dispatchEvent(new B(b,{detail:{schemeIdUri:c.schemeIdUri,value:c.value,startTime:c.startTime,endTime:c.endTime,id:c.id,eventElement:c.eventElement}}))}
function El(a){if(!a.g.error)return null;var b=a.g.error.code;if(1==b)return null;var c=a.g.error.msExtendedCode;c&&(0>c&&(c+=Math.pow(2,32)),c=c.toString(16));return new F(2,3,3016,b,c,a.g.error.message)}
function Kl(a,b){if(a.j){var c=Zl(a),d=!1,e=Object.keys(b);0==e.length&&D.D("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var f=1==e.length&&"00"==e[0];f&&D.D("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");e.length&&a.i.periods.forEach(function(a){a.variants.forEach(function(a){N.Fg(a).forEach(function(c){var e=
a.allowedByKeySystem;c.keyId&&(c=b[f?"00":c.keyId],a.allowedByKeySystem=!!c&&!yl.includes(c));e!=a.allowedByKeySystem&&(d=!0)})})});e=hj(a.j);var h=jj(a.j);(e=N.Te(e,h,c.variants))&&!e.allowedByKeySystem&&(D.debug("Choosing new variants after key status changed"),tm(a,c));d&&(Yl(a),$l(a,c.variants))}}function Ll(a,b,c){if(a.F&&a.F.onExpirationUpdated)a.F.onExpirationUpdated(b,c);a.dispatchEvent(new B("expirationupdated"))}
function Pl(a,b,c){0<b&&(a.$()?D.D("|playRangeStart| has been configured for live content. Ignoring the setting."):a.yf(b));c<a.wa()&&(a.$()?D.D("|playRangeEnd| has been configured for live content. Ignoring the setting."):a.Ya(c))}
function vm(a,b){var c=a.s?Qc(a.s.ba):{},d=Object.keys(c);d=d.length&&"00"==d[0];for(var e=!1,f=!1,h=[],k=[],l=r(b),n=l.next();!n.done;n=l.next()){n=n.value;var p=[];n.audio&&p.push(n.audio);n.video&&p.push(n.video);p=r(p);for(var q=p.next();!q.done;q=p.next())if(q=q.value,q.keyId){var t=c[d?"00":q.keyId];t?yl.includes(t)&&(k.includes(t)||k.push(t)):h.includes(q.keyId)||h.push(q.keyId)}n.allowedByApplication?n.allowedByKeySystem&&(e=!0):f=!0}if(!e)throw new F(2,4,4012,{hasAppRestrictions:f,missingKeys:h,
restrictedKeyStatuses:k});}function wm(a,b){u(function d(){return y(d,function(d){switch(d.A){case 1:return v(d,Promise.resolve(),2);case 2:a.u!=wl&&a.dispatchEvent(b),w(d)}})})}function sm(a){var b=new Set;a=r(a);for(var c=a.next();!c.done;c=a.next())c=c.value,c.language?b.add(E(c.language)):b.add("und");return b}
function rm(a){var b=new Map;a=r(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c="und";var e=[];d.language&&(c=E(d.language));"variant"==d.type?e=d.audioRoles:e=d.roles;e&&e.length||(e=[""]);b.has(c)||b.set(c,new Set);d=r(e);for(e=d.next();!e.done;e=d.next())e=e.value,b.get(c).add(e)}var f=[];b.forEach(function(a,b){for(var c=r(a),d=c.next();!d.done;d=c.next())f.push({language:b,role:d.value})});return f}
function jm(a){a=Zl(a);return null==a?[]:a.variants.filter(function(a){return N.ac(a)})}function lm(a){var b=Zl(a);return null==b?[]:b.textStreams.filter(function(b){return!a.Kc.has(b)})}function Zl(a){var b=a.C.l(),c=null;a=r(a.i.periods);for(var d=a.next();!d.done;d=a.next())d=d.value,d.startTime<=b&&(c=d);return c}function im(a){var b=Zl(a);return di(a.V,b).variant}
function km(a){var b=Zl(a);if(null==b)return null;if(!di(a.V,b).text){var c=N.rc(b.textStreams,a.oa,a.Ca);c.length&&ci(a.V,b,c[0])}return di(a.V,b).text}function Bl(){return new F(2,7,7E3)}function vl(a,b,c,d,e,f){return d==a&&e.J==f.J&&e.uri==f.uri&&e.mimeType==f.mimeType&&e.bb==f.bb?b:c}function Qk(){return{bb:null,J:null,mimeType:null,startTime:null,ue:null,uri:null}}
function Cl(a){return new Promise(function(b,c){a.Jb=function(){return c(Bl())};a.$c=function(){return b()};a.onError=function(a){return c(a)};a.bd=function(){return c(Bl())}})}var wl=0,jl=1,Wl=2,am=3;W.LoadMode={DESTROYED:wl,NOT_LOADED:jl,MEDIA_SOURCE:Wl,SRC_EQUALS:am};function xm(a,b,c){var d=void 0==b.expiration?Infinity:b.expiration,e=b.presentationTimeline.wa();b=ym(b.periods[0]);return{offlineUri:null,originalManifestUri:a,duration:e,size:0,expiration:d,tracks:b,appMetadata:c}}function zm(a,b){var c=Fk(new Dk(a.Xa(),a.ya()),b.periods[0],new V(null,0)),d=b.appMetadata||{};c=ym(c);return{offlineUri:a.toString(),originalManifestUri:b.originalManifestUri,duration:b.duration,size:b.size,expiration:b.expiration,tracks:c,appMetadata:d}}
function ym(a){var b=[],c=N.yg(a.variants);c=r(c);for(var d=c.next();!d.done;d=c.next())b.push(N.od(d.value));a=r(a.textStreams);for(c=a.next();!c.done;c=a.next())b.push(N.ld(c.value));return b};function Am(){this.g={}}function Bm(a,b){var c=b.audio,d=b.video;c&&!d&&(a.g[c.id]=c.bandwidth||b.bandwidth);!c&&d&&(a.g[d.id]=d.bandwidth||b.bandwidth);if(c&&d){var e=c.bandwidth||393216,f=d.bandwidth||b.bandwidth-e;0>=f&&(D.D("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),f=b.bandwidth);a.g[c.id]=e;a.g[d.id]=f}}function Cm(a,b,c){c=c.endTime-c.startTime;return Dm(a,b)*c}
function Dm(a,b){var c=a.g[b];null==c&&(c=0,D.error("Asking for bitrate of stream not given to the estimator"));0==c&&D.D("Using bitrate of 0, this stream won't affect progress");return c};function Em(a){this.g=!1;this.h=new G;this.i=a}Em.prototype.destroy=function(){var a=this;if(this.g)return this.h;this.g=!0;return this.i().then(function(){a.h.resolve()},function(){a.h.resolve()})};function Fm(a,b,c){a=r(a.periods);for(var d=a.next();!d.done;d=a.next())d=d.value,d.variants=d.variants.filter(function(a){return N.Ld(a,b,c)})}function Gm(a){a=r(a.periods);for(var b=a.next();!b.done;b=a.next())b=b.value,b.variants=b.variants.filter(function(a){var b=!0;a.audio&&(b=b&&ye(a.audio));a.video&&(b=b&&ye(a.video));return b})}function Hm(a,b){for(var c=r(a.periods),d=c.next();!d.done;d=c.next())d=d.value,d.variants=d.variants.filter(function(a){return Md(b,a)})}
function Im(a){var b=new Jm;a.periods.forEach(function(a,c){var d=Km(a.variants);if(0==c){d=r(d.g);for(var e=d.next();!e.done;e=d.next())b.add(e.value)}else Lm(b,d)});a=r(a.periods);for(var c=a.next();!c.done;c=a.next())c=c.value,c.variants=c.variants.filter(function(a){return b.contains(new Mm(a))})}
function Nm(a,b){return u(function d(){var e,f,h,k;return y(d,function(d){switch(d.A){case 1:e=null,f=r(a.periods),h=f.next();case 2:if(h.done){d.I(0);break}k=h.value;e&&(k.variants=k.variants.filter(function(a){return e.contains(new Mm(a))}));return v(d,b(k),5);case 5:e=Km(k.variants),h=f.next(),d.I(2)}})})}function Mm(a){var b=a.audio;a=a.video;this.h=b?b.mimeType:null;this.g=b?b.codecs.split(".")[0]:null;this.j=a?a.mimeType:null;this.i=a?a.codecs.split(".")[0]:null}function Jm(){this.g=[]}
Jm.prototype.add=function(a){this.contains(a)||this.g.push(a)};function Lm(a,b){a.g=a.g.filter(function(a){return b.contains(a)})}Jm.prototype.contains=function(a){return this.g.some(function(b){return a.h==b.h&&a.g==b.g&&a.j==b.j&&a.i==b.i})};function Km(a){var b=new Jm;a=r(a);for(var c=a.next();!c.done;c=a.next())b.add(new Mm(c.value));return b};function X(a){var b=this;if(a&&a.constructor!=W)throw new F(2,9,9008);this.h=this.g=null;a?(this.g=a.h,this.h=a.tc()):(this.g=al(),this.h=new L);this.j=!1;this.i=[];this.l=[];var c=!a;this.s=new Em(function(){return u(function e(){var a;return y(e,function(e){switch(e.A){case 1:return a=function(){},v(e,Promise.all(b.l.map(function(b){return b.then(a,a)})),2);case 2:if(!c){e.I(3);break}return v(e,b.h.destroy(),3);case 3:b.g=null,b.h=null,w(e)}})})})}A("shaka.offline.Storage",X);
function Om(){if(Wc())a:{var a=r(lk.values());for(var b=a.next();!b.done;b=a.next())if(b=b.value,b=b()){b.destroy();a=!0;break a}a=!1}else a=!1;return a}X.support=Om;X.prototype.destroy=function(){return this.s.destroy()};X.prototype.destroy=X.prototype.destroy;
X.prototype.configure=function(a,b){2==arguments.length&&"string"==typeof a&&(a=Zk(a,b));var c=a,d=!1;null!=c.trackSelectionCallback&&(d=!0,c.offline=c.offline||{},c.offline.trackSelectionCallback=c.trackSelectionCallback,delete c.trackSelectionCallback);null!=c.progressCallback&&(d=!0,c.offline=c.offline||{},c.offline.progressCallback=c.progressCallback,delete c.progressCallback);null!=c.usePersistentLicense&&(d=!0,c.offline=c.offline||{},c.offline.usePersistentLicense=c.usePersistentLicense,delete c.usePersistentLicense);
d&&Pe("Storage.configure with OfflineConfig","Please configure storage with a player configuration.");return cl(this.g,a)};X.prototype.configure=X.prototype.configure;X.prototype.getConfiguration=function(){var a=al();cl(a,this.g,al());return a};X.prototype.getConfiguration=X.prototype.getConfiguration;X.prototype.tc=function(){return this.h};X.prototype.getNetworkingEngine=X.prototype.tc;
X.prototype.store=function(a,b,c){var d=this;return Pm(this,Qm(this,a,b||{},function(){return u(function f(){var b,k;return y(f,function(f){switch(f.A){case 1:return c&&"string"!=typeof c?(Pe("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),b=c,f["return"](new b)):v(f,U.create(a,d.h,d.g.manifest.retryParameters,c),2);case 2:return k=f.G,f["return"](k)}})})}))};X.prototype.store=X.prototype.store;X.prototype.Cg=function(){return this.j};
X.prototype.getStoreInProgress=X.prototype.Cg;
function Qm(a,b,c,d){return u(function f(){var h,k,l,n,p,q,t,x,C,z;return y(f,function(f){switch(f.A){case 1:Rm();if(a.j)return f["return"](Promise.reject(new F(2,9,9006)));a.j=!0;return v(f,Sm(a,b,d),2);case 2:h=f.G;Tm(a);k=!h.presentationTimeline.$()&&!h.presentationTimeline.Gb();if(!k)throw new F(2,9,9005,b);l=null;n=new kk;q=p=null;ya(f,3,4);return v(f,Um(a,h,function(a){q=q||a}),6);case 6:l=f.G;Tm(a);if(q)throw q;return v(f,Vm(a,h,l),7);case 7:return v(f,n.init(),8);case 8:return Tm(a),v(f,mk(n),
9);case 9:return p=f.G,Tm(a),v(f,Wm(a,p.ya,l,h,b,c),10);case 10:t=f.G;Tm(a);if(q)throw q;return v(f,p.ya.addManifests([t]),11);case 11:return x=f.G,Tm(a),C=new Bk("manifest",p.path.Xa,p.path.ya,x[0]),f["return"](zm(C,t));case 4:return Ea(f),a.j=!1,a.i=[],v(f,n.destroy(),12);case 12:if(!l){f.I(13);break}return v(f,l.destroy(),13);case 13:Ga(f,0);break;case 3:z=Da(f);if(!p){f.I(15);break}return v(f,p.ya.removeSegments(a.i,function(){}),15);case 15:throw q||z;}})})}
function Vm(a,b,c){return u(function e(){var f,h;return y(e,function(e){switch(e.A){case 1:return f={width:Infinity,height:Infinity},Fm(b,a.g.restrictions,f),Gm(b),Hm(b,c),Im(b),h=a.g.preferredAudioChannelCount,N.Je(b,h),v(e,Nm(b,function(b){return u(function p(){var c,e,f,h,k,l,J,T;return y(p,function(p){switch(p.A){case 1:c=N;e=[];for(var q=r(b.variants),t=q.next();!t.done;t=q.next())f=t.value,e.push(c.od(f));q=r(b.textStreams);for(t=q.next();!t.done;t=q.next())h=t.value,e.push(c.ld(h));return v(p,
a.g.offline.trackSelectionCallback(e),2);case 2:k=p.G;l=new Set;J=new Set;q=r(k);for(t=q.next();!t.done;t=q.next())T=t.value,"variant"==T.type&&l.add(T.id),"text"==T.type&&J.add(T.id);b.variants=b.variants.filter(function(a){return l.has(a.id)});b.textStreams=b.textStreams.filter(function(a){return J.has(a.id)});w(p)}})})}),2);case 2:Xm(b),w(e)}})})}
function Wm(a,b,c,d,e,f){return u(function k(){var l,n,p,q,t,x,C,z,H,J;return y(k,function(k){switch(k.A){case 1:return l=xm(e,d,f),n=d.periods.some(function(a){return a.variants.some(function(a){return a.drmInfos&&a.drmInfos.length})}),p=d.periods.some(function(a){return a.variants.some(function(a){return a.drmInfos.some(function(a){return a.initData&&a.initData.length})})}),q=n&&!p,t=null,q&&(x=c.g,t=Ym.get(x.keySystem)),C=new Wj(a.h,function(b,c){l.size=c;a.g.offline.progressCallback(l,b)},function(b,
d){q&&a.g.offline.usePersistentLicense&&t==d&&vd(c,"cenc",b)}),za(k,2),H=z=Zm(a,C,b,c,d,e,f),v(k,Zj(C),4);case 4:H.size=k.G;z.expiration=c.sc();J=Bd(c);z.sessionIds=a.g.offline.usePersistentLicense?J:[];if(n&&a.g.offline.usePersistentLicense&&!J.length)throw new F(2,9,9007);return k["return"](z);case 2:return Ea(k),v(k,C.destroy(),5);case 5:Ga(k,0)}})})}X.prototype.remove=function(a){return Pm(this,$m(this,a))};X.prototype.remove=X.prototype.remove;
function $m(a,b){return u(function d(){var e,f,h,k,l,n;return y(d,function(d){switch(d.A){case 1:Rm();e=Ck(b);if(null==e||"manifest"!=e.g)return d["return"](Promise.reject(new F(2,9,9004,b)));f=e;h=new kk;za(d,2);return v(d,h.init(),4);case 4:return v(d,ok(h,f.Xa(),f.ya()),5);case 5:return k=d.G,v(d,k.getManifests([f.key()]),6);case 6:return l=d.G,n=l[0],v(d,Promise.all([an(a,n,h),bn(a,k,f,n)]),2);case 2:return Ea(d),v(d,h.destroy(),8);case 8:Ga(d,0)}})})}
function cn(a,b){for(var c=[],d=r(a.periods),e=d.next();!e.done;e=d.next()){e=r(e.value.streams);for(var f=e.next();!f.done;f=e.next())f=f.value,b&&"video"==f.contentType?c.push({contentType:Rc(f.mimeType,f.codecs),robustness:a.drmInfo.videoRobustness}):b||"audio"!=f.contentType||c.push({contentType:Rc(f.mimeType,f.codecs),robustness:a.drmInfo.audioRobustness})}return c}function an(a,b,c){return u(function e(){return y(e,function(e){switch(e.A){case 1:return v(e,dn(a.h,a.g.drm,c,b),0)}})})}
function bn(a,b,c,d){function e(){k+=1;a.g.offline.progressCallback(l,k/h)}var f=en(d),h=f.length+1,k=0,l=zm(c,d);return Promise.all([b.removeSegments(f,e),b.removeManifests([c.key()],e)])}X.prototype.rh=function(){return Pm(this,fn(this))};X.prototype.removeEmeSessions=X.prototype.rh;
function fn(a){return u(function c(){var d,e,f,h,k,l,n,p,q;return y(c,function(c){switch(c.A){case 1:return Rm(),d=a.h,e=a.g.drm,f=new kk,h=!1,za(c,2),v(c,f.init(),4);case 4:k=[];pk(f,function(a){return k.push(a)});l=Promise.resolve();n={};p=r(k);for(q=p.next();!q.done;n={kd:n.kd},q=p.next())n.kd=q.value,l=l.then(function(a){return function(){return u(function z(){var c,f;return y(z,function(k){switch(k.A){case 1:return v(k,a.kd.getAll(),2);case 2:return c=k.G,v(k,Mk(e,d,c),3);case 3:return f=k.G,
v(k,a.kd.remove(f),4);case 4:f.length!=c.length&&(h=!0),w(k)}})})}}(n));return v(c,l,2);case 2:return Ea(c),v(c,f.destroy(),6);case 6:Ga(c,3);break;case 3:return c["return"](!h)}})})}X.prototype.list=function(){return Pm(this,gn())};X.prototype.list=X.prototype.list;
function gn(){return u(function b(){var c,d,e;return y(b,function(b){switch(b.A){case 1:return Rm(),c=[],d=new kk,za(b,2),v(b,d.init(),4);case 4:return e=Promise.resolve(),nk(d,function(b,d){e=e.then(function(){return u(function n(){var e;return y(n,function(f){switch(f.A){case 1:return v(f,d.getAllManifests(),2);case 2:e=f.G,e.forEach(function(d,e){var f=zm(new Bk("manifest",b.Xa,b.ya,e),d);c.push(f)}),w(f)}})})})}),v(b,e,2);case 2:return Ea(b),v(b,d.destroy(),6);case 6:Ga(b,3);break;case 3:return b["return"](c)}})})}
function Sm(a,b,c){return u(function e(){var f,h,k,l,n,p;return y(e,function(e){switch(e.A){case 1:return f=null,h=a.h,k={networkingEngine:h,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(a){f=a}},v(e,c(),2);case 2:return l=e.G,l.configure(a.g.manifest),Tm(a),za(e,3),v(e,l.start(b,k),5);case 5:return n=e.G,Tm(a),p=hn(n),v(e,Promise.all(bb(p,function(a){return a.createSegmentIndex()})),6);case 6:Tm(a);if(f)throw f;
return e["return"](n);case 3:return Ea(e),v(e,l.stop(),7);case 7:Ga(e,0)}})})}function Um(a,b,c){return u(function e(){var f,h,k;return y(e,function(e){switch(e.A){case 1:return f=new ed({cc:a.h,onError:c,ad:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),h=Ai(b.periods),k=a.g,f.configure(k.drm),v(e,jd(f,h,k.offline.usePersistentLicense),2);case 2:return v(e,td(f),3);case 3:return v(e,ud(f),4);case 4:return e["return"](f)}})})}
function Zm(a,b,c,d,e,f,h){var k=new Am,l=e.periods.map(function(d){return jn(a,b,c,k,e,d)}),n=d.g,p=a.g.offline.usePersistentLicense;n&&p&&(n.initData=[]);return{originalManifestUri:f,duration:e.presentationTimeline.wa(),size:0,expiration:d.sc(),periods:l,sessionIds:p?Bd(d):[],drmInfo:n,appMetadata:h}}
function jn(a,b,c,d,e,f){for(var h=r(f.variants),k=h.next();!k.done;k=h.next())Bm(d,k.value);h=r(f.textStreams);for(k=h.next();!k.done;k=h.next())d.g[k.value.id]=52;h=kn(f);var l=new Map;h=r(h);for(k=h.next();!k.done;k=h.next()){k=k.value;var n=ln(a,b,c,d,e,k);l.set(k.id,n)}f.variants.forEach(function(a){a.audio&&l.get(a.audio.id).variantIds.push(a.id);a.video&&l.get(a.video.id).variantIds.push(a.id)});return{startTime:f.startTime,streams:Array.from(l.values())}}
function ln(a,b,c,d,e,f){var h={id:f.id,originalId:f.originalId,primary:f.primary,presentationTimeOffset:f.presentationTimeOffset||0,contentType:f.type,mimeType:f.mimeType,codecs:f.codecs,frameRate:f.frameRate,pixelAspectRatio:f.pixelAspectRatio,kind:f.kind,language:f.language,label:f.label,width:f.width||null,height:f.height||null,initSegmentKey:null,encrypted:f.encrypted,keyId:f.keyId,segments:[],variantIds:[]};e=e.presentationTimeline.vc();var k=f.id,l=f.initSegmentReference;l&&(l=Kg(l.i(),l.h,
l.g,a.g.streaming.retryParameters),Xj(b,k,l,.5*Dm(d,f.id),!0,function(b){return u(function q(){var d;return y(q,function(e){switch(e.A){case 1:return v(e,c.addSegments([{data:b}]),2);case 2:d=e.G,a.i.push(d[0]),h.initSegmentKey=d[0],w(e)}})})}));mn(f,e,function(e){var l=Kg(e.i(),e.h,e.g,a.g.streaming.retryParameters);Xj(b,k,l,Cm(d,f.id,e),!1,function(b){return u(function x(){var d;return y(x,function(f){switch(f.A){case 1:return v(f,c.addSegments([{data:b}]),2);case 2:d=f.G,a.i.push(d[0]),h.segments.push({startTime:e.startTime,
endTime:e.endTime,dataKey:d[0]}),w(f)}})})})});return h}function mn(a,b,c){b=a.findSegmentPosition(b);for(var d=null==b?null:a.getSegmentReference(b);d;)c(d),d=a.getSegmentReference(++b)}function Tm(a){if(a.s.g)throw new F(2,9,7001);}function Rm(){if(!Om())throw new F(2,9,9E3);}function Pm(a,b){return u(function d(){return y(d,function(d){switch(d.A){case 1:return a.l.push(b),za(d,2),v(d,b,4);case 4:return d["return"](d.G);case 2:Ea(d),uc(a.l,b),Ga(d,0)}})})}
function en(a){var b=[];a.periods.forEach(function(a){a.streams.forEach(function(a){null!=a.initSegmentKey&&b.push(a.initSegmentKey);a.segments.forEach(function(a){b.push(a.dataKey)})})});return b}X.deleteAll=function(){return u(function b(){var c;return y(b,function(b){switch(b.A){case 1:return c=new kk,za(b,2),v(b,c.erase(),2);case 2:return Ea(b),v(b,c.destroy(),5);case 5:Ga(b,0)}})})};
function dn(a,b,c,d){return u(function f(){var h,k,l;return y(f,function(f){switch(f.A){case 1:if(!d.drmInfo)return f["return"]();h=qk(c);k=d.sessionIds.map(function(a){return{sessionId:a,keySystem:d.drmInfo.keySystem,licenseUri:d.drmInfo.licenseServerUri,serverCertificate:d.drmInfo.serverCertificate,audioCapabilities:cn(d,!1),videoCapabilities:cn(d,!0)}});return v(f,Mk(b,a,k),2);case 2:return l=f.G,v(f,h.remove(l),3);case 3:return v(f,h.add(k.filter(function(a){return-1==l.indexOf(a.sessionId)})),
0)}})})}function hn(a){var b=new Set;a=r(a.periods);for(var c=a.next();!c.done;c=a.next()){c=c.value;for(var d=r(c.textStreams),e=d.next();!e.done;e=d.next())b.add(e.value);c=r(c.variants);for(d=c.next();!d.done;d=c.next())d=d.value,d.audio&&b.add(d.audio),d.video&&b.add(d.video)}return b}
function kn(a){for(var b=new Set,c=r(a.textStreams),d=c.next();!d.done;d=c.next())b.add(d.value);a=r(a.variants);for(c=a.next();!c.done;c=a.next())c=c.value,c.audio&&b.add(c.audio),c.video&&b.add(c.video);return b}function Xm(a){if(0==a.periods.length)throw new F(2,4,4014);a=r(a.periods);for(var b=a.next();!b.done;b=a.next())nn(b.value)}
function nn(a){var b=new Set(a.variants.map(function(a){return a.video})),c=new Set(a.variants.map(function(a){return a.audio}));a=a.textStreams;1<b.size&&D.D("Multiple video tracks selected to be stored");b=r(c);for(var d=b.next();!d.done;d=b.next()){d=d.value;for(var e=r(c),f=e.next();!f.done;f=e.next())f=f.value,d!=f&&d.language==f.language&&D.D("Similar audio tracks were selected to be stored",d.id,f.id)}c=r(a);for(b=c.next();!b.done;b=c.next())for(b=b.value,d=r(a),e=d.next();!e.done;e=d.next())e=
e.value,b!=e&&b.language==e.language&&D.D("Similar text tracks were selected to be stored",b.id,e.id)}var Ym=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");zl.offline=Om;function on(){for(var a=0;a<pn.length;++a)try{pn[a].Qf()}catch(b){D.ha("Error installing polyfill!",b)}}A("shaka.polyfill.installAll",on);var pn=[];function qn(a,b){b=b||0;for(var c={priority:b,Qf:a},d=0;d<pn.length;d++)if(pn[d].priority<b){pn.splice(d,0,c);return}pn.push(c)}A("shaka.polyfill.register",qn);qn(function(){rn()},-1);function sn(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"===typeof Event)var c=new Event(b,a);else c=document.createEvent("Event"),c.initEvent(b,a.bubbles,a.cancelable);a.target.dispatchEvent(c)}
qn(function(){if(window.Document){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitCancelFullScreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||
document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));document.addEventListener("webkitfullscreenchange",sn);document.addEventListener("webkitfullscreenerror",sn);document.addEventListener("mozfullscreenchange",sn);document.addEventListener("mozfullscreenerror",sn);document.addEventListener("MSFullscreenChange",sn);document.addEventListener("MSFullscreenError",
sn)}});function tn(a,b,c){if("input"==a)switch(this.type){case "range":a="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,a,b,c)}qn(function(){D.debug("InputEvent.install");$c("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(D.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=tn)});qn(function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})});qn(function(){D.debug("mathRound.install")});function un(){var a=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(b){for(var c=[],d=0;d<arguments.length;++d)c[d]=arguments[d];c=a.apply(this,c);c.abort=function(){};return c}}function vn(){var a=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(b,c){return a.call(this,b,c-.001)}}function wn(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){return"mp2t"==b.split(/ *; */)[0].split("/")[1].toLowerCase()?!1:a(b)}}
function xn(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){return"opus"!=Vc(b)[0]&&a(b)}}function yn(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){var c=b.split(/ *; */);c.shift();return c.some(function(a){return a.startsWith("codecs=")})?cast.__platform__.canDisplayType(b):a(b)}}
qn(function(){D.debug("MediaSource.install");var a=bd();window.MediaSource?window.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(D.info("Patching Chromecast MSE bugs."),yn()):a?(wn(),12>=a?(D.info("Patching Safari 11 & 12 MSE bugs."),un(),vn()):(D.info("Patching Safari 13 MSE bugs."),un())):$c("Tizen 2")||$c("Tizen 3")||$c("Tizen 4")?xn():D.info("Using native MSE as-is."):D.info("No MSE implementation available.")});function zn(a,b){D.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var c=new An(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}
function An(a,b){D.debug("PatchedMediaKeysApple.MediaKeySystemAccess");this.keySystem=a;if(a.startsWith("com.apple.fps"))for(var c=r(b),d=c.next();!d.done;d=c.next()){var e=d.value;if("required"==e.persistentState)d=null;else{d={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label};var f=!1,h=!1;if(e.audioCapabilities)for(var k=r(e.audioCapabilities),l=k.next();!l.done;l=k.next())if(l=
l.value,l.contentType){f=!0;var n=l.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,n)&&(d.audioCapabilities.push(l),h=!0)}if(e.videoCapabilities)for(e=r(e.videoCapabilities),l=e.next();!l.done;l=e.next())k=l.value,k.contentType&&(f=!0,l=k.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,l)&&(d.videoCapabilities.push(k),h=!0));f||(h=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));d=h?d:null}if(d){this.g=d;return}}c=Error("Unsupported keySystem");
c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}An.prototype.createMediaKeys=function(){D.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var a=new Bn(this.keySystem);return Promise.resolve(a)};An.prototype.getConfiguration=function(){D.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration");return this.g};
function Cn(a){D.debug("PatchedMediaKeysApple.setMediaKeys");var b=this.mediaKeys;b&&b!=a&&Dn(b,null);delete this.mediaKeys;return(this.mediaKeys=a)?Dn(a,this):Promise.resolve()}function Bn(a){D.debug("PatchedMediaKeysApple.MediaKeys");this.h=new WebKitMediaKeys(a);this.g=new M}
Bn.prototype.createSession=function(a){D.debug("PatchedMediaKeysApple.MediaKeys.createSession");a=a||"temporary";if("temporary"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");return new En(this.h,a)};Bn.prototype.setServerCertificate=function(a){D.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate");a&&new Uint8Array(a);return Promise.resolve(!0)};
function Dn(a,b){a.g.Mb();if(!b)return Promise.resolve();a.g.v(b,"webkitneedkey",Fn);try{return Gi(b,HTMLMediaElement.HAVE_METADATA,a.g,function(){b.webkitSetMediaKeys(a.h)}),Promise.resolve()}catch(c){return Promise.reject(c)}}function En(a){D.debug("PatchedMediaKeysApple.MediaKeySession");ab.call(this);this.h=null;this.l=a;this.i=this.g=null;this.j=new M;this.sessionId="";this.expiration=NaN;this.closed=new G;this.keyStatuses=new Gn}Za(En,ab);m=En.prototype;
m.generateRequest=function(a,b){D.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest");this.g=new G;try{this.h=this.l.createSession("video/mp4",new Uint8Array(b)),this.sessionId=this.h.sessionId||"",this.j.v(this.h,"webkitkeymessage",this.Ih.bind(this)),this.j.v(this.h,"webkitkeyadded",this.Gh.bind(this)),this.j.v(this.h,"webkitkeyerror",this.Hh.bind(this)),Hn(this,"status-pending")}catch(c){this.g.reject(c)}return this.g};
m.load=function(){D.debug("PatchedMediaKeysApple.MediaKeySession.load");return Promise.reject(Error("MediaKeySession.load not yet supported"))};m.update=function(a){D.debug("PatchedMediaKeysApple.MediaKeySession.update");this.i=new G;try{this.h.update(new Uint8Array(a))}catch(b){this.i.reject(b)}return this.i};m.close=function(){D.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.h.close(),this.closed.resolve(),this.j.Mb()}catch(a){this.closed.reject(a)}return this.closed};
m.remove=function(){D.debug("PatchedMediaKeysApple.MediaKeySession.remove");return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};
function Fn(a){D.debug("PatchedMediaKeysApple.onWebkitNeedKey_",a);a=new Uint8Array(a.initData);if((new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint32(0,!0)+4!=a.byteLength)throw new RangeError("Malformed FairPlay init data");a=Yb(a.subarray(4),!0);a=$b(a);var b=new Event("encrypted");b.initDataType="skd";b.initData=a;this.dispatchEvent(b)}
m.Ih=function(a){D.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",a);this.g&&(this.g.resolve(),this.g=null);this.dispatchEvent(new B("message",{messageType:void 0==this.keyStatuses.g?"license-request":"license-renewal",message:a.message.buffer}))};m.Gh=function(a){D.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",a);this.i&&(Hn(this,"usable"),this.i.resolve(),this.i=null)};
m.Hh=function(a){D.debug("PatchedMediaKeysApple.onWebkitKeyError_",a);a=Error("EME PatchedMediaKeysApple key error");a.errorCode=this.h.error;if(null!=this.g)this.g.reject(a),this.g=null;else if(null!=this.i)this.i.reject(a),this.i=null;else switch(this.h.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Hn(this,"output-not-allowed");break;default:Hn(this,"internal-error")}};
function Hn(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1;c.g=b;a.dispatchEvent(new B("keystatuseschange"))}function Gn(){this.size=0;this.g=void 0}var In;m=Gn.prototype;m.forEach=function(a){this.g&&a(this.g,In)};m.get=function(a){if(this.has(a))return this.g};m.has=function(a){var b=In;return this.g&&I.ab(new Uint8Array(a),new Uint8Array(b))?!0:!1};m.entries=function(){};m.keys=function(){};m.values=function(){};
qn(function(){window.HTMLVideoElement&&window.WebKitMediaKeys&&(D.info("Using Apple-prefixed EME"),In=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Cn,window.MediaKeys=Bn,window.MediaKeySystemAccess=An,navigator.requestMediaKeySystemAccess=zn)});function Jn(a,b){D.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");try{var c=new Kn(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}
function Kn(a,b){D.debug("PatchedMediaKeysMs.MediaKeySystemAccess");this.keySystem=a;for(var c=!1,d=0;d<b.length;++d){var e=b[d],f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},h=!1;if(e.audioCapabilities)for(var k=0;k<e.audioCapabilities.length;++k){var l=e.audioCapabilities[k];if(l.contentType){h=!0;var n=l.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,
n)&&(f.audioCapabilities.push(l),c=!0)}}if(e.videoCapabilities)for(k=0;k<e.videoCapabilities.length;++k)l=e.videoCapabilities[k],l.contentType&&(h=!0,n=l.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,n)&&(f.videoCapabilities.push(l),c=!0));h||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==e.persistentState&&(c=!1);if(c){this.g=f;return}}c=Error("Unsupported keySystem");c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}
Kn.prototype.createMediaKeys=function(){D.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var a=new Ln(this.keySystem);return Promise.resolve(a)};Kn.prototype.getConfiguration=function(){D.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration");return this.g};function Mn(a){D.debug("PatchedMediaKeysMs.setMediaKeys");var b=this.mediaKeys;b&&b!=a&&Nn(b,null);delete this.mediaKeys;return(this.mediaKeys=a)?Nn(a,this):Promise.resolve()}
function Ln(a){D.debug("PatchedMediaKeysMs.MediaKeys");this.h=new MSMediaKeys(a);this.g=new M}Ln.prototype.createSession=function(a){D.debug("PatchedMediaKeysMs.MediaKeys.createSession");a=a||"temporary";if("temporary"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");return new On(this.h,a)};Ln.prototype.setServerCertificate=function(){D.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate");return Promise.resolve(!1)};
function Nn(a,b){a.g.Mb();if(!b)return Promise.resolve();a.g.v(b,"msneedkey",Pn);try{return Gi(b,HTMLMediaElement.HAVE_METADATA,a.g,function(){b.msSetMediaKeys(a.h)}),Promise.resolve()}catch(c){return Promise.reject(c)}}function On(a){D.debug("PatchedMediaKeysMs.MediaKeySession");ab.call(this);this.i=null;this.l=a;this.h=this.g=null;this.j=new M;this.sessionId="";this.expiration=NaN;this.closed=new G;this.keyStatuses=new Qn}Za(On,ab);m=On.prototype;
m.generateRequest=function(a,b){D.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest");this.g=new G;try{this.i=this.l.createSession("video/mp4",new Uint8Array(b),null),this.j.v(this.i,"mskeymessage",this.bh.bind(this)),this.j.v(this.i,"mskeyadded",this.$g.bind(this)),this.j.v(this.i,"mskeyerror",this.ah.bind(this)),Rn(this,"status-pending")}catch(c){this.g.reject(c)}return this.g};m.load=function(){D.debug("PatchedMediaKeysMs.MediaKeySession.load");return Promise.reject(Error("MediaKeySession.load not yet supported"))};
m.update=function(a){D.debug("PatchedMediaKeysMs.MediaKeySession.update");this.h=new G;try{this.i.update(new Uint8Array(a))}catch(b){this.h.reject(b)}return this.h};m.close=function(){D.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.i.close(),this.closed.resolve(),this.j.Mb()}catch(a){this.closed.reject(a)}return this.closed};m.remove=function(){D.debug("PatchedMediaKeysMs.MediaKeySession.remove");return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};
function Pn(a){D.debug("PatchedMediaKeysMs.onMsNeedKey_",a);if(a.initData){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null);b.initDataType="cenc";b.initData=Uf(a.initData).buffer;this.dispatchEvent(b)}}m.bh=function(a){D.debug("PatchedMediaKeysMs.onMsKeyMessage_",a);this.g&&(this.g.resolve(),this.g=null);this.dispatchEvent(new B("message",{messageType:void 0==this.keyStatuses.g?"license-request":"license-renewal",message:a.message.buffer}))};
m.$g=function(a){D.debug("PatchedMediaKeysMs.onMsKeyAdded_",a);this.g?(D.debug("Simulating completion for a PR persistent license."),Rn(this,"usable"),this.g.resolve(),this.g=null):this.h&&(Rn(this,"usable"),this.h.resolve(),this.h=null)};
m.ah=function(a){D.debug("PatchedMediaKeysMs.onMsKeyError_",a);a=Error("EME PatchedMediaKeysMs key error");a.errorCode=this.i.error;if(null!=this.g)this.g.reject(a),this.g=null;else if(null!=this.h)this.h.reject(a),this.h=null;else switch(this.i.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Rn(this,"output-not-allowed");break;default:Rn(this,"internal-error")}};
function Rn(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1;c.g=b;a.dispatchEvent(new B("keystatuseschange"))}function Qn(){this.size=0;this.g=void 0}var Sn;m=Qn.prototype;m.forEach=function(a){this.g&&a(this.g,Sn)};m.get=function(a){if(this.has(a))return this.g};m.has=function(a){var b=Sn;return this.g&&I.ab(new Uint8Array(a),new Uint8Array(b))?!0:!1};m.entries=function(){};m.keys=function(){};m.values=function(){};
qn(function(){!window.HTMLVideoElement||!window.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(D.info("Using ms-prefixed EME v20140218"),Sn=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Mn,window.MediaKeys=Ln,window.MediaKeySystemAccess=Kn,navigator.requestMediaKeySystemAccess=Jn)});function Tn(){D.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess");return Promise.reject(Error("The key system specified is not supported."))}function Un(a){D.debug("PatchedMediaKeysNop.setMediaKeys");return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Vn(){throw new TypeError("Illegal constructor.");}Vn.prototype.createSession=function(){};Vn.prototype.setServerCertificate=function(){};function Wn(){throw new TypeError("Illegal constructor.");}
Wn.prototype.getConfiguration=function(){};Wn.prototype.createMediaKeys=function(){};qn(function(){!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(D.info("EME not available."),navigator.requestMediaKeySystemAccess=Tn,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Un,window.MediaKeys=Vn,window.MediaKeySystemAccess=Wn)},-10);var Xn="";function Yn(a){var b=Xn;return b?b+a.charAt(0).toUpperCase()+a.slice(1):a}function Zn(a,b){D.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var c=new $n(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function ao(a){D.debug("PatchedMediaKeysWebkit.setMediaKeys");var b=this.mediaKeys;b&&b!=a&&bo(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&bo(a,this);return Promise.resolve()}
function $n(a,b){D.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess");this.g=this.keySystem=a;var c=!1;"org.w3.clearkey"==a&&(this.g="webkit-org.w3.clearkey",c=!1);var d=!1;var e=document.getElementsByTagName("video");e=e.length?e[0]:document.createElement("video");for(var f=0;f<b.length;++f){var h=b[f],k={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:h.initDataTypes,sessionTypes:["temporary"],label:h.label},l=!1;if(h.audioCapabilities)for(var n=
0;n<h.audioCapabilities.length;++n){var p=h.audioCapabilities[n];if(p.contentType){l=!0;var q=p.contentType.split(";")[0];e.canPlayType(q,this.g)&&(k.audioCapabilities.push(p),d=!0)}}if(h.videoCapabilities)for(n=0;n<h.videoCapabilities.length;++n)p=h.videoCapabilities[n],p.contentType&&(l=!0,e.canPlayType(p.contentType,this.g)&&(k.videoCapabilities.push(p),d=!0));l||(d=e.canPlayType("video/mp4",this.g)||e.canPlayType("video/webm",this.g));"required"==h.persistentState&&(c?(k.persistentState="required",
k.sessionTypes=["persistent-license"]):d=!1);if(d){this.h=k;return}}c="Unsupported keySystem";if("org.w3.clearkey"==a||"com.widevine.alpha"==a)c="None of the requested configurations were supported.";c=Error(c);c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}$n.prototype.createMediaKeys=function(){D.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var a=new co(this.g);return Promise.resolve(a)};
$n.prototype.getConfiguration=function(){D.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration");return this.h};function co(a){D.debug("PatchedMediaKeysWebkit.MediaKeys");this.l=a;this.h=null;this.g=new M;this.i=[];this.j={}}function bo(a,b){a.h=b;a.g.Mb();var c=Xn;b&&(a.g.v(b,c+"needkey",a.gh.bind(a)),a.g.v(b,c+"keymessage",a.Lh.bind(a)),a.g.v(b,c+"keyadded",a.Jh.bind(a)),a.g.v(b,c+"keyerror",a.Kh.bind(a)))}m=co.prototype;
m.createSession=function(a){D.debug("PatchedMediaKeysWebkit.MediaKeys.createSession");a=a||"temporary";if("temporary"!=a&&"persistent-license"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");var b=this.h||document.createElement("video");b.src||(b.src="about:blank");a=new eo(b,this.l,a);this.i.push(a);return a};m.setServerCertificate=function(){D.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate");return Promise.resolve(!1)};
m.gh=function(a){D.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",a);var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null);b.initDataType="cenc";a.initData instanceof ArrayBuffer?b.initData=a.initData:b.initData=a.initData.buffer;this.h.dispatchEvent(b)};
m.Lh=function(a){D.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",a);var b=fo(this,a.sessionId);b?(a=new B("message",{messageType:void 0==b.keyStatuses.g?"licenserequest":"licenserenewal",message:a.message}),D.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),b.h&&(b.h.resolve(),b.h=null),b.dispatchEvent(a)):D.error("Session not found",a.sessionId)};
m.Jh=function(a){D.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",a);if(a=fo(this,a.sessionId))D.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),go(a,"usable"),a.g&&a.g.resolve(),a.g=null};m.Kh=function(a){D.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",a);var b=fo(this,a.sessionId);b&&b.handleError(a)};
function fo(a,b){var c=a.j[b];return c?(D.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",c),c):(c=a.i.shift())?(c.sessionId=b,a.j[b]=c,D.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",c),c):null}function eo(a,b,c){D.debug("PatchedMediaKeysWebkit.MediaKeySession");ab.call(this);this.j=a;this.s=!1;this.g=this.h=null;this.i=b;this.l=c;this.sessionId="";this.expiration=NaN;this.closed=new G;this.keyStatuses=new ho}Za(eo,ab);m=eo.prototype;
m.handleError=function(a){D.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",a);var b=Error("EME v0.1b key error"),c=a.errorCode;c.systemCode=a.systemCode;b.errorCode=c;!a.sessionId&&this.h?(45==a.systemCode&&(b.message="Unsupported session type."),this.h.reject(b),this.h=null):a.sessionId&&this.g?(this.g.reject(b),this.g=null):(b=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?go(this,"output-restricted"):1==b?go(this,"expired"):go(this,"internal-error"))};
function io(a,b,c){if(a.s)return Promise.reject(Error("The session is already initialized."));a.s=!0;try{if("persistent-license"==a.l)if(c)var d=new Uint8Array($b("LOAD_SESSION|"+c));else{var e=$b("PERSISTENT|"),f=new Uint8Array(e.byteLength+b.byteLength);f.set(new Uint8Array(e),0);f.set(new Uint8Array(b),e.byteLength);d=f}else d=new Uint8Array(b)}catch(k){return Promise.reject(k)}a.h=new G;var h=Yn("generateKeyRequest");try{a.j[h](a.i,d)}catch(k){if("InvalidStateError"!=k.name)return a.h=null,Promise.reject(k);
(new K(function(){try{a.j[h](a.i,d)}catch(l){a.h.reject(l),a.h=null}})).U(.01)}return a.h}
m.se=function(a,b){if(this.g)this.g.then(this.se.bind(this,a,b))["catch"](this.se.bind(this,a,b));else{this.g=a;if("webkit-org.w3.clearkey"==this.i){var c=Wb(b);var d=JSON.parse(c);"oct"!=d.keys[0].kty&&(this.g.reject(Error("Response is not a valid JSON Web Key Set.")),this.g=null);c=I.cb(d.keys[0].k);d=I.cb(d.keys[0].kid)}else c=new Uint8Array(b),d=null;var e=Yn("addKey");try{this.j[e](this.i,c,d,this.sessionId)}catch(f){this.g.reject(f),this.g=null}}};
function go(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1;c.g=b;a.dispatchEvent(new B("keystatuseschange"))}m.generateRequest=function(a,b){D.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest");return io(this,b,null)};m.load=function(a){D.debug("PatchedMediaKeysWebkit.MediaKeySession.load");return"persistent-license"==this.l?io(this,null,a):Promise.reject(Error("Not a persistent session."))};
m.update=function(a){D.debug("PatchedMediaKeysWebkit.MediaKeySession.update",a);var b=new G;this.se(b,a);return b};m.close=function(){D.debug("PatchedMediaKeysWebkit.MediaKeySession.close");if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var a=Yn("cancelKeyRequest");try{this.j[a](this.i,this.sessionId)}catch(b){}}this.closed.resolve();return this.closed};
m.remove=function(){D.debug("PatchedMediaKeysWebkit.MediaKeySession.remove");return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()};function ho(){this.size=0;this.g=void 0}var jo;m=ho.prototype;m.forEach=function(a){this.g&&a(this.g,jo)};m.get=function(a){if(this.has(a))return this.g};m.has=function(a){var b=jo;return this.g&&I.ab(new Uint8Array(a),new Uint8Array(b))?!0:!1};m.entries=function(){};m.keys=function(){};m.values=function(){};
qn(function(){if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)D.info("Using webkit-prefixed EME v0.1b"),Xn="webkit";else if(HTMLMediaElement.prototype.generateKeyRequest)D.info("Using nonprefixed EME v0.1b");else return;jo=(new Uint8Array([0])).buffer;navigator.requestMediaKeySystemAccess=Zn;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=
null;HTMLMediaElement.prototype.setMediaKeys=ao;window.MediaKeys=co;window.MediaKeySystemAccess=$n}});function ko(a){a=a.target;if("picture-in-picture"==a.webkitPresentationMode){document.pictureInPictureElement=a;var b=new Event("enterpictureinpicture");a.dispatchEvent(b)}else document.pictureInPictureElement==a&&(document.pictureInPictureElement=null),b=new Event("leavepictureinpicture"),a.dispatchEvent(b)}
function lo(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function mo(){var a=document.pictureInPictureElement;return a?(a.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}
function no(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function oo(a){a?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}
qn(function(){if(window.HTMLVideoElement){var a=HTMLVideoElement.prototype;a.requestPictureInPicture&&document.exitPictureInPicture||!a.webkitSupportsPresentationMode||(D.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,a.requestPictureInPicture=lo,Object.defineProperty(a,"disablePictureInPicture",{get:no,set:oo,enumerable:!0,configurable:!0}),document.exitPictureInPicture=mo,document.addEventListener("webkitpresentationmodechanged",ko,!0))}});qn(function(){D.debug("VideoPlayPromise.install");if(window.HTMLMediaElement){var a=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var b=a.apply(this);b&&b["catch"](function(){});return b}}});function po(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}qn(function(){if(window.HTMLVideoElement){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=po)}});function qo(a,b,c){return new window.TextTrackCue(a,b,c)}function ro(a,b,c){return new window.TextTrackCue(a+"-"+b+"-"+c,a,b,c)}
qn(function(){if(window.VTTCue)D.info("Using native VTTCue.");else if(window.TextTrackCue){var a=TextTrackCue.length;if(3==a)D.info("Using VTTCue polyfill from 3 argument TextTrackCue."),window.VTTCue=qo;else if(6==a)D.info("Using VTTCue polyfill from 6 argument TextTrackCue."),window.VTTCue=ro;else{try{var b=!!qo(1,2,"")}catch(c){b=!1}b&&(D.info("Using VTTCue polyfill from 3 argument TextTrackCue."),window.VTTCue=qo)}}else D.error("VTTCue not available.")});function so(){}A("shaka.text.TtmlTextParser",so);so.prototype.parseInit=function(){};so.prototype.parseInit=so.prototype.parseInit;
so.prototype.parseMedia=function(a,b){var c=Wb(a),d=[],e=new DOMParser,f=null;if(""==c)return d;try{f=e.parseFromString(c,"text/xml")}catch(Ba){throw new F(2,2,2005,"Failed to parse TTML.");}if(f){if(c=f.getElementsByTagName("parsererror")[0])throw new F(2,2,2005,c.textContent);if(e=f.getElementsByTagName("tt")[0]){var h=R.getAttributeNS(e,"http://www.w3.org/ns/ttml#parameter","frameRate");var k=R.getAttributeNS(e,"http://www.w3.org/ns/ttml#parameter","subFrameRate");var l=R.getAttributeNS(e,"http://www.w3.org/ns/ttml#parameter",
"frameRateMultiplier");var n=R.getAttributeNS(e,"http://www.w3.org/ns/ttml#parameter","tickRate");f=e.getAttribute("xml:space")||"default";c=R.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling","extent")}else throw new F(2,2,2005,"TTML does not contain <tt> tag.");if("default"!=f&&"preserve"!=f)throw new F(2,2,2005,"Invalid xml:space value: "+f);f="default"==f;h=new to(h,k,l,n);k=uo(e.getElementsByTagName("metadata")[0]);l=uo(e.getElementsByTagName("styling")[0]);n=uo(e.getElementsByTagName("layout")[0]);
for(var p=[],q=0;q<n.length;q++){var t=n[q],x=l,C=c;var z=new Yd;var H=t.getAttribute("xml:id");if(H){z.id=H;H=null;C&&(H=vo.exec(C)||wo.exec(C));C=H?Number(H[1]):null;H=H?Number(H[2]):null;var J,T;if(J=xo(t,x,"extent"))J=(T=vo.exec(J))||wo.exec(J),null!=J&&(z.width=null!=C?100*Number(J[1])/C:Number(J[1]),z.height=null!=H?100*Number(J[2])/H:Number(J[2]),z.widthUnits=T||null!=C?me:0,z.heightUnits=T||null!=H?me:0);if(t=xo(t,x,"origin"))J=(T=vo.exec(t))||wo.exec(t),null!=J&&(z.viewportAnchorX=null!=
C?100*Number(J[1])/C:Number(J[1]),z.viewportAnchorY=null!=H?100*Number(J[2])/H:Number(J[2]),z.viewportAnchorUnits=T||null!=C?me:0)}else D.D("TtmlTextParser parser encountered a region with no id. Region will be ignored."),z=null;z&&p.push(z)}c=yo(e.getElementsByTagName("body")[0]);c=r(c);for(e=c.next();!e.done;e=c.next())(e=zo(e.value,b.periodStart,h,k,l,n,p,f,!1))&&d.push(e)}return d};so.prototype.parseMedia=so.prototype.parseMedia;
var vo=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Ao=/^(\d+px|\d+em)$/,wo=/^(\d+)px (\d+)px$/,Bo=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Co=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Do=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Eo=/^(\d*(?:\.\d*)?)f$/,Fo=/^(\d*(?:\.\d*)?)t$/,Go=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Ho={left:ce,center:"center",right:"end",start:ce,end:"end"},Io={left:"line-left",center:"center",right:"line-right"};
function uo(a){var b=[];if(!a)return b;for(var c=r(a.childNodes),d=c.next();!d.done;d=c.next())d=d.value,d.nodeType==Node.ELEMENT_NODE&&"br"!==d.nodeName&&(d=uo(d),b=b.concat(d));b.length||b.push(a);return b}function yo(a){if(!a)return[];var b=[];a=r(a.childNodes);for(var c=a.next();!c.done;c=a.next())c=c.value,c instanceof Element&&(c.hasAttribute("begin")?b.push(c):b=b.concat(yo(c)));return b}
function Jo(a,b){for(var c="",d=r(a.childNodes),e=d.next();!e.done;e=d.next())e=e.value,"br"==e.nodeName&&a.childNodes[0]!==e?c+="\n":e.childNodes&&0<e.childNodes.length?c+=Jo(e,b):b?(e=e.textContent.trim(),e=e.replace(/\s+/g," "),c+=e):c+=e.textContent;return c}
function zo(a,b,c,d,e,f,h,k,l){if(l&&"br"==a.nodeName)return a=new Wd(0,0,""),a.spacer=!0,a;var n=/^[\s\n]*$/.test(a.textContent),p=a.nodeType==Node.ELEMENT_NODE&&!a.hasAttribute("begin")&&!a.hasAttribute("end");if(a.nodeType!=Node.ELEMENT_NODE||p&&n||p&&!l)return null;k="default"==(a.getAttribute("xml:space")||(k?"default":"preserve"));n=Ko(a.getAttribute("begin"),c);p=Ko(a.getAttribute("end"),c);var q=Ko(a.getAttribute("dur"),c);null==p&&null!=q&&(p=n+q);if(!l&&(null==n||null==p))throw new F(2,
2,2001);n=l&&null==n?0:n+b;p=l&&null==p?0:p+b;q="";l=[];if(Array.from(a.childNodes).find(function(a){return a.nodeType===Node.TEXT_NODE&&/\S+/.test(a.textContent)}))q=Jo(a,k);else for(var t=r(a.childNodes),x=t.next();!x.done;x=t.next())if(x=zo(x.value,b,c,d,e,f,h,k,!0))x.startTime=x.startTime||n,x.endTime=x.endTime||p,l.push(x);b=new Wd(n,p,q);b.nestedCues=l;if((f=Lo(a,"region",f,"")[0])&&f.getAttribute("xml:id")){var C=f.getAttribute("xml:id");b.region=h.filter(function(a){return a.id==C})[0]}d=
Lo(a,"backgroundImage",d,"#","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt")[0];Mo(b,a,f,d,e);return b}
function Mo(a,b,c,d,e){"rtl"==No(b,c,e,"direction")&&(a.direction="rtl");var f=No(b,c,e,"writingMode");"tb"==f||"tblr"==f?a.writingMode="vertical-lr":"tbrl"==f?a.writingMode="vertical-rl":"rltb"==f||"rl"==f?a.direction="rtl":f&&(a.direction=Xd);(f=No(b,c,e,"textAlign"))?(a.positionAlign=Io[f],a.lineAlign=Ho[f],a.textAlign=he[f.toUpperCase()]):a.textAlign="start";if(f=No(b,c,e,"displayAlign"))a.displayAlign=ie[f.toUpperCase()];if(f=No(b,c,e,"color"))a.color=f;if(f=No(b,c,e,"backgroundColor"))a.backgroundColor=
f;if(f=No(b,c,e,"fontFamily"))a.fontFamily=f;(f=No(b,c,e,"fontWeight"))&&"bold"==f&&(a.fontWeight=700);(f=No(b,c,e,"wrapOption"))&&"noWrap"==f&&(a.wrapLine=!1);(f=No(b,c,e,"lineHeight"))&&f.match(Ao)&&(a.lineHeight=f);(f=No(b,c,e,"fontSize"))&&f.match(Ao)&&(a.fontSize=f);if(f=No(b,c,e,"fontStyle"))a.fontStyle=ke[f.toUpperCase()];if(d){f=d.getAttribute("imageType")||d.getAttribute("imagetype");var h=d.getAttribute("encoding");d=d.textContent.trim();"PNG"==f&&"Base64"==h&&d&&(a.backgroundImage="data:image/png;base64,"+
d)}(c=xo(c,e,"textDecoration"))&&Oo(a,c);(b=Po(b,e,"textDecoration"))&&Oo(a,b)}
function Oo(a,b){for(var c=b.split(" "),d=0;d<c.length;d++)switch(c[d]){case "underline":a.textDecoration.includes("underline")||a.textDecoration.push("underline");break;case "noUnderline":a.textDecoration.includes("underline")&&uc(a.textDecoration,"underline");break;case "lineThrough":a.textDecoration.includes("lineThrough")||a.textDecoration.push("lineThrough");break;case "noLineThrough":a.textDecoration.includes("lineThrough")&&uc(a.textDecoration,"lineThrough");break;case "overline":a.textDecoration.includes("overline")||
a.textDecoration.push("overline");break;case "noOverline":a.textDecoration.includes("overline")&&uc(a.textDecoration,"overline")}}function No(a,b,c,d){return(a=Po(a,c,d))?a:xo(b,c,d)}function xo(a,b,c){if(!a)return null;for(var d=uo(a),e=0;e<d.length;e++){var f=R.getAttributeNS(d[e],"http://www.w3.org/ns/ttml#styling",c);if(f)return f}return Qo(a,b,c)}function Po(a,b,c){var d=R.getAttributeNS(a,"http://www.w3.org/ns/ttml#styling",c);return d?d:Qo(a,b,c)}
function Qo(a,b,c){a=Lo(a,"style",b,"");for(var d=null,e=0;e<a.length;e++){var f=R.getAttributeNS(a[e],"http://www.w3.org/ns/ttml#styling",c);f||(f=Po(a[e],b,c));f&&(d=f)}return d}
function Lo(a,b,c,d,e){var f=[];if(!a||1>c.length)return f;var h=a;for(a=null;h&&!(a=e?R.getAttributeNS(h,e,b):h.getAttribute(b))&&(h=h.parentNode,h instanceof Element););if(b=a)for(b=b.split(" "),b=r(b),e=b.next();!e.done;e=b.next())for(e=e.value,a=r(c),h=a.next();!h.done;h=a.next())if(h=h.value,d+h.getAttribute("xml:id")==e){f.push(h);break}return f}
function Ko(a,b){var c=null;if(Bo.test(a)){c=Bo.exec(a);var d=Number(c[1]),e=Number(c[2]),f=Number(c[3]),h=Number(c[4]);h+=(Number(c[5])||0)/b.h;f+=h/b.frameRate;c=f+60*e+3600*d}else Co.test(a)?c=Ro(Co,a):Do.test(a)?c=Ro(Do,a):Eo.test(a)?(c=Eo.exec(a),c=Number(c[1])/b.frameRate):Fo.test(a)?(c=Fo.exec(a),c=Number(c[1])/b.g):Go.test(a)&&(c=Ro(Go,a));return c}
function Ro(a,b){var c=a.exec(b);return null==c||""==c[0]?null:(Number(c[4])||0)/1E3+(Number(c[3])||0)+60*(Number(c[2])||0)+3600*(Number(c[1])||0)}function to(a,b,c,d){this.frameRate=Number(a)||30;this.h=Number(b)||1;this.g=Number(d);0==this.g&&(this.g=a?this.frameRate*this.h:1);c&&(a=/^(\d+) (\d+)$/g.exec(c))&&(this.frameRate*=Number(a[1])/Number(a[2]))}pe["application/ttml+xml"]=so;function So(){this.g=new so}A("shaka.text.Mp4TtmlParser",So);So.prototype.parseInit=function(a){var b=!1;(new Q).box("moov",Pf).box("trak",Pf).box("mdia",Pf).box("minf",Pf).box("stbl",Pf).Da("stsd",Rf).box("stpp",function(a){b=!0;a.parser.stop()}).parse(a);if(!b)throw new F(2,2,2007);};So.prototype.parseInit=So.prototype.parseInit;
So.prototype.parseMedia=function(a,b){var c=!1,d=[];(new Q).box("mdat",Sf(function(a){c=!0;d=d.concat(this.g.parseMedia(a,b))}.bind(this))).parse(a);if(!c)throw new F(2,2,2007);return d};So.prototype.parseMedia=So.prototype.parseMedia;pe['application/mp4; codecs="stpp"']=So;pe['application/mp4; codecs="stpp.ttml.im1t"']=So;pe['application/mp4; codecs="stpp.TTML.im1t"']=So;function To(){}A("shaka.text.VttTextParser",To);To.prototype.parseInit=function(){};To.prototype.parseInit=To.prototype.parseInit;
To.prototype.parseMedia=function(a,b){var c=Wb(a);c=c.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");c=c.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(c[0]))throw new F(2,2,2E3);var d=b.segmentStart;if(null==d&&(d=0,c[0].includes("X-TIMESTAMP-MAP"))){var e=c[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),f=c[0].match(/MPEGTS:(\d+)/m);if(e&&f){d=Uo(new fh(e[1]));if(null==d)throw new F(2,2,2E3);d=b.periodStart+(Number(f[1])/9E4-d)}}f=[];var h=c[0].split("\n");for(e=1;e<h.length;e++)if(/^Region:/.test(h[e])){var k=
new fh(h[e]),l=new Yd;ih(k);gh(k);for(var n=ih(k);n;){var p;a:{var q=l,t=n;if(p=/^id=(.*)$/.exec(t))q.id=p[1];else if(p=/^width=(\d{1,2}|100)%$/.exec(t))q.width=Number(p[1]);else if(p=/^lines=(\d+)$/.exec(t))q.height=Number(p[1]),q.heightUnits=2;else if(p=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))q.regionAnchorX=Number(p[1]),q.regionAnchorY=Number(p[2]);else if(p=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))q.viewportAnchorX=Number(p[1]),q.viewportAnchorY=Number(p[2]);else if(/^scroll=up$/.exec(t))q.scroll=
"up";else{p=!1;break a}p=!0}p||D.D("VTT parser encountered an invalid VTTRegion setting: ",n," The setting will be ignored.");gh(k);n=ih(k)}f.push(l)}e=[];for(k=1;k<c.length;k++){h=c[k].split("\n");p=h;q=d;h=f;if(1==p.length&&!p[0]||/^NOTE($|[ \t])/.test(p[0])||"STYLE"==p[0])h=null;else{l=null;p[0].includes("--\x3e")||(l=p[0],p.splice(0,1));n=new fh(p[0]);t=Uo(n);var x=hh(n,/[ \t]+--\x3e[ \t]+/g),C=Uo(n);if(null==t||null==x||null==C)throw new F(2,2,2001);p=new Wd(t+q,C+q,p.slice(1).join("\n").trim());
gh(n);for(q=ih(n);q;)Vo(p,q,h)||D.D("VTT parser encountered an invalid VTT setting: ",q," The setting will be ignored."),gh(n),q=ih(n);null!=l&&(p.id=l);h=p}h&&e.push(h)}return e};To.prototype.parseMedia=To.prototype.parseMedia;
function Vo(a,b,c){var d;if(d=/^align:(start|middle|center|end|left|right)$/.exec(b))b=d[1],"middle"==b?a.textAlign=$d:a.textAlign=he[b.toUpperCase()];else if(d=/^vertical:(lr|rl)$/.exec(b))a.writingMode="lr"==d[1]?"vertical-lr":"vertical-rl";else if(d=/^size:([\d.]+)%$/.exec(b))a.size=Number(d[1]);else if(d=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))a.position=Number(d[1]),d[2]&&(b=d[2],a.positionAlign="line-left"==b||"start"==b?"line-left":"line-right"==b||"end"==
b?"line-right":"center");else if(d=/^region:(.*)$/.exec(b)){if(b=Wo(c,d[1]))a.region=b}else{a:{if(c=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(b))a.lineInterpretation=1,a.line=Number(c[1]),c[2]&&(a.lineAlign=je[c[2].toUpperCase()]);else if(c=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(b))a.lineInterpretation=be,a.line=Number(c[1]),c[2]&&(a.lineAlign=je[c[2].toUpperCase()]);else{a=!1;break a}a=!0}return a}return!0}
function Wo(a,b){var c=a.filter(function(a){return a.id==b});return c.length?c[0]:(D.D("VTT parser could not find a region with id: ",b," The region will be ignored."),null)}function Uo(a){a=hh(a,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(null==a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1E3+c+60*b+3600*(Number(a[1])||0)}pe["text/vtt"]=To;pe['text/vtt; codecs="vtt"']=To;pe['text/vtt; codecs="wvtt"']=To;function Xo(){this.g=null}A("shaka.text.Mp4VttParser",Xo);Xo.prototype.parseInit=function(a){var b=!1;(new Q).box("moov",Pf).box("trak",Pf).box("mdia",Pf).Da("mdhd",function(a){0==a.version?(a.reader.Z(4),a.reader.Z(4),this.g=a.reader.S(),a.reader.Z(4)):(a.reader.Z(8),a.reader.Z(8),this.g=a.reader.S(),a.reader.Z(8));a.reader.Z(4)}.bind(this)).box("minf",Pf).box("stbl",Pf).Da("stsd",Rf).box("wvtt",function(){b=!0}).parse(a);if(!this.g)throw new F(2,2,2008);if(!b)throw new F(2,2,2008);};
Xo.prototype.parseInit=Xo.prototype.parseInit;
Xo.prototype.parseMedia=function(a,b){var c=this;if(!this.g)throw D.error("No init segment for MP4+VTT!"),new F(2,2,2008);var d=0,e=[],f,h=[],k=!1,l=!1,n=!1,p=null;(new Q).box("moof",Pf).box("traf",Pf).Da("tfdt",function(a){k=!0;d=0==a.version?a.reader.S():a.reader.jc()}).Da("tfhd",function(a){var b=a.flags;a=a.reader;a.Z(4);b&1&&a.Z(8);b&2&&a.Z(4);p=b&8?a.S():null}).Da("trun",function(a){l=!0;var b=a.version,c=a.flags;a=a.reader;var d=a.S();c&1&&a.Z(4);c&4&&a.Z(4);for(var f=[],h=0;h<d;h++){var k=
{duration:null,sampleSize:null,ve:null};c&256&&(k.duration=a.S());c&512&&(k.sampleSize=a.S());c&1024&&a.Z(4);c&2048&&(k.ve=0==b?a.S():a.qf());f.push(k)}e=f}).box("mdat",Sf(function(a){n=!0;f=a})).parse(a);if(!n&&!k&&!l)throw new F(2,2,2008);var q=d,t=new DataView(f.buffer,f.byteOffset,f.byteLength),x=new P(t,0);e.forEach(function(a){var e=a.duration||p,f=a.ve?d+a.ve:q;q=f+(e||0);var k=0;do{var l=x.S();k+=l;var n=x.S();n=Of(n);var t=null;"vttc"==n?8<l&&(t=x.Lb(l-8)):("vtte"!=n&&D.error("Unknown box "+
n+"! Skipping!"),x.Z(l-8));e?t&&h.push(Yo(t,b.periodStart+f/c.g,b.periodStart+q/c.g)):D.error("WVTT sample duration unknown, and no default found!")}while(a.sampleSize&&k<a.sampleSize)});return h.filter(Rb.qb)};Xo.prototype.parseMedia=Xo.prototype.parseMedia;function Yo(a,b,c){var d,e,f;(new Q).box("payl",Sf(function(a){d=Wb(a)})).box("iden",Sf(function(a){e=Wb(a)})).box("sttg",Sf(function(a){f=Wb(a)})).parse(a);return d?Zo(d,e,f,b,c):null}
function Zo(a,b,c,d,e){a=new Wd(d,e,a);b&&(a.id=b);if(c)for(b=new fh(c),c=ih(b);c;)Vo(a,c,[])||D.D("VTT parser encountered an invalid VTT setting: ",c," The setting will be ignored."),gh(b),c=ih(b);return a}pe['application/mp4; codecs="wvtt"']=Xo;function Y(a){return document.createElement(a)}A("shaka.util.Dom.createHTMLElement",Y);A("shaka.util.Dom.createVideoElement",function(){var a=document.createElement("video");a.muted=!0;a.width=600;a.height=400;return a});A("shaka.util.Dom.asHTMLElement",function(a){return a});A("shaka.util.Dom.asHTMLMediaElement",function(a){return a});function $o(a){for(;a.firstChild;)a.removeChild(a.firstChild)}A("shaka.util.Dom.removeAllChildren",$o);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function ap(){}var bp;A("EmeEncryptionSchemePolyfill",ap);function cp(){bp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(bp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=dp):console.debug("EmeEncryptionSchemePolyfill: EME not found")}ap.install=cp;
function dp(a,b){var c=this;return u(function e(){var f;return y(e,function(e){switch(e.A){case 1:return console.assert(c==navigator,'bad "this" for requestMediaKeySystemAccess'),v(e,bp.call(c,a,b),2);case 2:f=e.G;if(ep(f))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=bp,e["return"](f);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=
fp;return e["return"](fp.call(c,a,b))}})})}
function fp(a,b){var c=this;return u(function e(){var f,h,k,l,n,p,q,t;return y(e,function(e){switch(e.A){case 1:console.assert(c==navigator,'bad "this" for requestMediaKeySystemAccess');f=gp(a);h=[];for(var x=r(b),z=x.next();!z.done;z=x.next())k=z.value,l=hp(k.videoCapabilities,f),n=hp(k.audioCapabilities,f),k.videoCapabilities&&k.videoCapabilities.length&&!l.length||k.audioCapabilities&&k.audioCapabilities.length&&!n.length||(p=Object.assign({},k),p.videoCapabilities=l,p.audioCapabilities=n,h.push(p));
if(!h.length)throw q=Error("Unsupported keySystem or supportedConfigurations."),q.name="NotSupportedError",q.code=DOMException.NOT_SUPPORTED_ERR,q;return v(e,bp.call(c,a,h),2);case 2:return t=e.G,e["return"](new ip(t,f))}})})}function hp(a,b){return a?a.filter(function(a){return!a.encryptionScheme||a.encryptionScheme==b}):a}function jp(){}var kp;A("McEncryptionSchemePolyfill",jp);
function lp(){kp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(kp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=mp):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}jp.install=lp;
function mp(a){var b=this;return u(function d(){var e,f;return y(d,function(d){switch(d.A){case 1:return console.assert(b==navigator.mediaCapabilities,'bad "this" for decodingInfo'),v(d,kp.call(b,a),2);case 2:e=d.G;if(!a.keySystemConfiguration)return d["return"](e);if((f=e.keySystemAccess)&&ep(f))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=kp,d["return"](e);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");
navigator.mediaCapabilities.decodingInfo=np;return d["return"](np.call(b,a))}})})}
function np(a){var b=this;return u(function d(){var e,f,h,k,l,n,p,q,t;return y(d,function(d){switch(d.A){case 1:return console.assert(b==navigator.mediaCapabilities,'bad "this" for decodingInfo'),e=null,a.keySystemConfiguration&&(f=a.keySystemConfiguration,h=f.keySystem,k=f.audio&&f.audio.encryptionScheme,l=f.video&&f.video.encryptionScheme,e=gp(h),n={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:a},k&&k!=e||l&&l!=e)?d["return"](n):v(d,kp.call(b,a),2);case 2:p=d.G;if(p.keySystemAccess){p.keySystemAccess=
new ip(p.keySystemAccess,e);d.I(3);break}if(!a.keySystemConfiguration){d.I(3);break}var x=a.keySystemConfiguration,z=[],H=[];x.audio&&z.push({robustness:x.audio.robustness||"",contentType:a.audio.contentType});x.video&&H.push({robustness:x.video.robustness||"",contentType:a.video.contentType});x={initDataTypes:x.initDataType?[x.initDataType]:[],distinctiveIdentifier:x.distinctiveIdentifier,persistentState:x.persistentState,sessionTypes:x.sessionTypes};z.length&&(x.audioCapabilities=z);H.length&&(x.videoCapabilities=
H);q=x;t=p;return v(d,navigator.requestMediaKeySystemAccess(a.keySystemConfiguration.keySystem,[q]),5);case 5:t.keySystemAccess=d.G;case 3:return d["return"](p)}})})}function ip(a,b){this.h=a;this.g=b;this.keySystem=a.keySystem}
ip.prototype.getConfiguration=function(){var a=this.h.getConfiguration();if(a.videoCapabilities)for(var b=r(a.videoCapabilities),c=b.next();!c.done;c=b.next())c.value.encryptionScheme=this.g;if(a.audioCapabilities)for(b=r(a.audioCapabilities),c=b.next();!c.done;c=b.next())c.value.encryptionScheme=this.g;return a};ip.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};
function gp(a){if(a.startsWith("com.widevine")||a.startsWith("com.microsoft")||a.startsWith("com.adobe")||a.startsWith("org.w3"))return"cenc";if(a.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",a,"Please contribute!");return null}function ep(a){a=a.getConfiguration();var b=a.audioCapabilities&&a.audioCapabilities[0];return(a=a.videoCapabilities&&a.videoCapabilities[0]||b)&&void 0!==a.encryptionScheme?!0:!1}function op(){}
A("EncryptionSchemePolyfills",op);function rn(){cp();lp()}op.install=rn;"undefined"!==typeof module&&module.Xf&&(module.Xf=op);/*
 @license
 Copyright 2013 Ali Al Dallal

 Licensed under the MIT license.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.
*/
for(var pp={ach:{m:"Lwo",o:"Acholi"},ady:{m:"\u0410\u0434\u044b\u0433\u044d\u0431\u0437\u044d",o:"Adyghe"},af:{m:"Afrikaans",o:"Afrikaans"},"af-NA":{m:"Afrikaans (Namibia)",o:"Afrikaans (Namibia)"},"af-ZA":{m:"Afrikaans (South Africa)",o:"Afrikaans (South Africa)"},ak:{m:"T\u0255\u0265i",o:"Akan"},ar:{m:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",o:"Arabic"},"ar-AR":{m:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",o:"Arabic"},"ar-MA":{m:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",o:"Arabic (Morocco)"},
"ar-SA":{m:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629 (\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629)",o:"Arabic (Saudi Arabia)"},"ay-BO":{m:"Aymar aru",o:"Aymara"},az:{m:"Az\u0259rbaycan dili",o:"Azerbaijani"},"az-AZ":{m:"Az\u0259rbaycan dili",o:"Azerbaijani"},"be-BY":{m:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",o:"Belarusian"},bg:{m:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",o:"Bulgarian"},"bg-BG":{m:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",
o:"Bulgarian"},bn:{m:"\u09ac\u09be\u0982\u09b2\u09be",o:"Bengali"},"bn-IN":{m:"\u09ac\u09be\u0982\u09b2\u09be (\u09ad\u09be\u09b0\u09a4)",o:"Bengali (India)"},"bn-BD":{m:"\u09ac\u09be\u0982\u09b2\u09be(\u09ac\u09be\u0982\u09b2\u09be\u09a6\u09c7\u09b6)",o:"Bengali (Bangladesh)"},"bs-BA":{m:"Bosanski",o:"Bosnian"},ca:{m:"Catal\u00e0",o:"Catalan"},"ca-ES":{m:"Catal\u00e0",o:"Catalan"},cak:{m:"Maya Kaqchikel",o:"Kaqchikel"},"ck-US":{m:"\u13e3\u13b3\u13a9 (tsalagi)",o:"Cherokee"},cs:{m:"\u010ce\u0161tina",
o:"Czech"},"cs-CZ":{m:"\u010ce\u0161tina",o:"Czech"},cy:{m:"Cymraeg",o:"Welsh"},"cy-GB":{m:"Cymraeg",o:"Welsh"},da:{m:"Dansk",o:"Danish"},"da-DK":{m:"Dansk",o:"Danish"},de:{m:"Deutsch",o:"German"},"de-AT":{m:"Deutsch (\u00d6sterreich)",o:"German (Austria)"},"de-DE":{m:"Deutsch (Deutschland)",o:"German (Germany)"},"de-CH":{m:"Deutsch (Schweiz)",o:"German (Switzerland)"},dsb:{m:"Dolnoserb\u0161\u0107ina",o:"Lower Sorbian"},el:{m:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",o:"Greek"},"el-GR":{m:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",
o:"Greek (Greece)"},en:{m:"English",o:"English"},"en-GB":{m:"English (UK)",o:"English (UK)"},"en-AU":{m:"English (Australia)",o:"English (Australia)"},"en-CA":{m:"English (Canada)",o:"English (Canada)"},"en-IE":{m:"English (Ireland)",o:"English (Ireland)"},"en-IN":{m:"English (India)",o:"English (India)"},"en-PI":{m:"English (Pirate)",o:"English (Pirate)"},"en-UD":{m:"English (Upside Down)",o:"English (Upside Down)"},"en-US":{m:"English (US)",o:"English (US)"},"en-ZA":{m:"English (South Africa)",
o:"English (South Africa)"},"en@pirate":{m:"English (Pirate)",o:"English (Pirate)"},eo:{m:"Esperanto",o:"Esperanto"},"eo-EO":{m:"Esperanto",o:"Esperanto"},es:{m:"Espa\u00f1ol",o:"Spanish"},"es-AR":{m:"Espa\u00f1ol (Argentine)",o:"Spanish (Argentina)"},"es-419":{m:"Espa\u00f1ol (Latinoam\u00e9rica)",o:"Spanish (Latin America)"},"es-CL":{m:"Espa\u00f1ol (Chile)",o:"Spanish (Chile)"},"es-CO":{m:"Espa\u00f1ol (Colombia)",o:"Spanish (Colombia)"},"es-EC":{m:"Espa\u00f1ol (Ecuador)",o:"Spanish (Ecuador)"},
"es-ES":{m:"Espa\u00f1ol (Espa\u00f1a)",o:"Spanish (Spain)"},"es-LA":{m:"Espa\u00f1ol (Latinoam\u00e9rica)",o:"Spanish (Latin America)"},"es-NI":{m:"Espa\u00f1ol (Nicaragua)",o:"Spanish (Nicaragua)"},"es-MX":{m:"Espa\u00f1ol (M\u00e9xico)",o:"Spanish (Mexico)"},"es-US":{m:"Espa\u00f1ol (Estados Unidos)",o:"Spanish (United States)"},"es-VE":{m:"Espa\u00f1ol (Venezuela)",o:"Spanish (Venezuela)"},et:{m:"eesti keel",o:"Estonian"},"et-EE":{m:"Eesti (Estonia)",o:"Estonian (Estonia)"},eu:{m:"Euskara",o:"Basque"},
"eu-ES":{m:"Euskara",o:"Basque"},fa:{m:"\u0641\u0627\u0631\u0633\u06cc",o:"Persian"},"fa-IR":{m:"\u0641\u0627\u0631\u0633\u06cc",o:"Persian"},"fb-LT":{m:"Leet Speak",o:"Leet"},ff:{m:"Fulah",o:"Fulah"},fi:{m:"Suomi",o:"Finnish"},"fi-FI":{m:"Suomi",o:"Finnish"},"fo-FO":{m:"F\u00f8royskt",o:"Faroese"},fr:{m:"Fran\u00e7ais",o:"French"},"fr-CA":{m:"Fran\u00e7ais (Canada)",o:"French (Canada)"},"fr-FR":{m:"Fran\u00e7ais (France)",o:"French (France)"},"fr-BE":{m:"Fran\u00e7ais (Belgique)",o:"French (Belgium)"},
"fr-CH":{m:"Fran\u00e7ais (Suisse)",o:"French (Switzerland)"},"fy-NL":{m:"Frysk",o:"Frisian (West)"},ga:{m:"Gaeilge",o:"Irish"},"ga-IE":{m:"Gaeilge (Gaelic)",o:"Irish (Gaelic)"},gl:{m:"Galego",o:"Galician"},"gl-ES":{m:"Galego",o:"Galician"},"gn-PY":{m:"Ava\u00f1e'\u1ebd",o:"Guarani"},"gu-IN":{m:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",o:"Gujarati"},"gx-GR":{m:"\u1f19\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ae \u1f00\u03c1\u03c7\u03b1\u03af\u03b1",o:"Classical Greek"},he:{m:"\u05e2\u05d1\u05e8\u05d9\u05ea\u200f",
o:"Hebrew"},"he-IL":{m:"\u05e2\u05d1\u05e8\u05d9\u05ea\u200f",o:"Hebrew"},hi:{m:"\u0939\u093f\u0928\u094d\u0926\u0940",o:"Hindi"},"hi-IN":{m:"\u0939\u093f\u0928\u094d\u0926\u0940",o:"Hindi"},hr:{m:"Hrvatski",o:"Croatian"},"hr-HR":{m:"Hrvatski",o:"Croatian"},hsb:{m:"Hornjoserb\u0161\u0107ina",o:"Upper Sorbian"},ht:{m:"Krey\u00f2l",o:"Haitian Creole"},hu:{m:"Magyar",o:"Hungarian"},"hu-HU":{m:"Magyar",o:"Hungarian"},"hy-AM":{m:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",o:"Armenian"},id:{m:"Bahasa Indonesia",
o:"Indonesian"},"id-ID":{m:"Bahasa Indonesia",o:"Indonesian"},is:{m:"\u00cdslenska",o:"Icelandic"},"is-IS":{m:"\u00cdslenska (Iceland)",o:"Icelandic (Iceland)"},it:{m:"Italiano",o:"Italian"},"it-IT":{m:"Italiano",o:"Italian"},ja:{m:"\u65e5\u672c\u8a9e",o:"Japanese"},"ja-JP":{m:"\u65e5\u672c\u8a9e",o:"Japanese"},"jv-ID":{m:"Basa Jawa",o:"Javanese"},"ka-GE":{m:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",o:"Georgian"},"kk-KZ":{m:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",o:"Kazakh"},km:{m:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",
o:"Khmer"},"km-KH":{m:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",o:"Khmer"},kab:{m:"Taqbaylit",o:"Kabyle"},kn:{m:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",o:"Kannada"},"kn-IN":{m:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1 (India)",o:"Kannada (India)"},ko:{m:"\ud55c\uad6d\uc5b4",o:"Korean"},"ko-KR":{m:"\ud55c\uad6d\uc5b4 (\u97e9\u56fd)",o:"Korean (Korea)"},ku:{m:"Kurd\u00ee",o:"Kurdish"},"ku-TR":{m:"Kurd\u00ee",o:"Kurdish"},la:{m:"Latin",o:"Latin"},"la-VA":{m:"Latin",o:"Latin"},lb:{m:"L\u00ebtzebuergesch",
o:"Luxembourgish"},"li-NL":{m:"L\u00e8mb\u00f6rgs",o:"Limburgish"},lt:{m:"Lietuvi\u0173",o:"Lithuanian"},"lt-LT":{m:"Lietuvi\u0173",o:"Lithuanian"},lv:{m:"Latvie\u0161u",o:"Latvian"},"lv-LV":{m:"Latvie\u0161u",o:"Latvian"},mai:{m:"\u092e\u0948\u0925\u093f\u0932\u0940, \u09ae\u09c8\u09a5\u09bf\u09b2\u09c0",o:"Maithili"},"mg-MG":{m:"Malagasy",o:"Malagasy"},mk:{m:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",o:"Macedonian"},"mk-MK":{m:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 (\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438)",
o:"Macedonian (Macedonian)"},ml:{m:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",o:"Malayalam"},"ml-IN":{m:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",o:"Malayalam"},"mn-MN":{m:"\u041c\u043e\u043d\u0433\u043e\u043b",o:"Mongolian"},mr:{m:"\u092e\u0930\u093e\u0920\u0940",o:"Marathi"},"mr-IN":{m:"\u092e\u0930\u093e\u0920\u0940",o:"Marathi"},ms:{m:"Bahasa Melayu",o:"Malay"},"ms-MY":{m:"Bahasa Melayu",o:"Malay"},mt:{m:"Malti",o:"Maltese"},"mt-MT":{m:"Malti",o:"Maltese"},my:{m:"\u1017\u1019\u102c\u1005\u1000\u102c",
o:"Burmese"},nb:{m:"Norsk (bokm\u00e5l)",o:"Norwegian (bokmal)"},"nb-NO":{m:"Norsk (bokm\u00e5l)",o:"Norwegian (bokmal)"},ne:{m:"\u0928\u0947\u092a\u093e\u0932\u0940",o:"Nepali"},"ne-NP":{m:"\u0928\u0947\u092a\u093e\u0932\u0940",o:"Nepali"},nl:{m:"Nederlands",o:"Dutch"},"nl-BE":{m:"Nederlands (Belgi\u00eb)",o:"Dutch (Belgium)"},"nl-NL":{m:"Nederlands (Nederland)",o:"Dutch (Netherlands)"},"nn-NO":{m:"Norsk (nynorsk)",o:"Norwegian (nynorsk)"},no:{m:"Norsk",o:"Norwegian"},oc:{m:"Occitan",o:"Occitan"},
"or-IN":{m:"\u0b13\u0b21\u0b3c\u0b3f\u0b06",o:"Oriya"},pa:{m:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",o:"Punjabi"},"pa-IN":{m:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40 (\u0a2d\u0a3e\u0a30\u0a24 \u0a28\u0a42\u0a70)",o:"Punjabi (India)"},pl:{m:"Polski",o:"Polish"},"pl-PL":{m:"Polski",o:"Polish"},"ps-AF":{m:"\u067e\u069a\u062a\u0648",o:"Pashto"},pt:{m:"Portugu\u00eas",o:"Portuguese"},"pt-BR":{m:"Portugu\u00eas (Brasil)",o:"Portuguese (Brazil)"},"pt-PT":{m:"Portugu\u00eas (Portugal)",o:"Portuguese (Portugal)"},
"qu-PE":{m:"Qhichwa",o:"Quechua"},"rm-CH":{m:"Rumantsch",o:"Romansh"},ro:{m:"Rom\u00e2n\u0103",o:"Romanian"},"ro-RO":{m:"Rom\u00e2n\u0103",o:"Romanian"},ru:{m:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",o:"Russian"},"ru-RU":{m:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",o:"Russian"},"sa-IN":{m:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",o:"Sanskrit"},"se-NO":{m:"Davvis\u00e1megiella",o:"Northern S\u00e1mi"},"si-LK":{m:"\u0db4\u0dc5\u0dcf\u0dad",o:"Sinhala (Sri Lanka)"},sk:{m:"Sloven\u010dina",
o:"Slovak"},"sk-SK":{m:"Sloven\u010dina (Slovakia)",o:"Slovak (Slovakia)"},sl:{m:"Sloven\u0161\u010dina",o:"Slovenian"},"sl-SI":{m:"Sloven\u0161\u010dina",o:"Slovenian"},"so-SO":{m:"Soomaaliga",o:"Somali"},sq:{m:"Shqip",o:"Albanian"},"sq-AL":{m:"Shqip",o:"Albanian"},sr:{m:"\u0421\u0440\u043f\u0441\u043a\u0438",o:"Serbian"},"sr-RS":{m:"\u0421\u0440\u043f\u0441\u043a\u0438 (Serbia)",o:"Serbian (Serbia)"},su:{m:"Basa Sunda",o:"Sundanese"},sv:{m:"Svenska",o:"Swedish"},"sv-SE":{m:"Svenska",o:"Swedish"},
sw:{m:"Kiswahili",o:"Swahili"},"sw-KE":{m:"Kiswahili",o:"Swahili (Kenya)"},ta:{m:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",o:"Tamil"},"ta-IN":{m:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",o:"Tamil"},te:{m:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",o:"Telugu"},"te-IN":{m:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",o:"Telugu"},tg:{m:"\u0437\u0430\u0431\u043e\u0301\u043d\u0438 \u0442\u043e\u04b7\u0438\u043a\u04e3\u0301",o:"Tajik"},"tg-TJ":{m:"\u0442\u043e\u04b7\u0438\u043a\u04e3",o:"Tajik"},th:{m:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",
o:"Thai"},"th-TH":{m:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22 (\u0e1b\u0e23\u0e30\u0e40\u0e17\u0e28\u0e44\u0e17\u0e22)",o:"Thai (Thailand)"},tl:{m:"Filipino",o:"Filipino"},"tl-PH":{m:"Filipino",o:"Filipino"},tlh:{m:"tlhIngan-Hol",o:"Klingon"},tr:{m:"T\u00fcrk\u00e7e",o:"Turkish"},"tr-TR":{m:"T\u00fcrk\u00e7e",o:"Turkish"},"tt-RU":{m:"\u0442\u0430\u0442\u0430\u0440\u0447\u0430",o:"Tatar"},uk:{m:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",o:"Ukrainian"},"uk-UA":{m:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",
o:"Ukrainian"},ur:{m:"\u0627\u0631\u062f\u0648",o:"Urdu"},"ur-PK":{m:"\u0627\u0631\u062f\u0648",o:"Urdu"},uz:{m:"O'zbek",o:"Uzbek"},"uz-UZ":{m:"O'zbek",o:"Uzbek"},vi:{m:"Ti\u1ebfng Vi\u1ec7t",o:"Vietnamese"},"vi-VN":{m:"Ti\u1ebfng Vi\u1ec7t",o:"Vietnamese"},"xh-ZA":{m:"isiXhosa",o:"Xhosa"},yi:{m:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",o:"Yiddish"},"yi-DE":{m:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9 (German)",o:"Yiddish (German)"},zh:{m:"\u4e2d\u6587",o:"Chinese"},"zh-HANS":{m:"\u4e2d\u6587\u7b80\u4f53",
o:"Chinese Simplified"},"zh-HANT":{m:"\u4e2d\u6587\u7e41\u9ad4",o:"Chinese Traditional"},"zh-CN":{m:"\u4e2d\u6587\uff08\u4e2d\u56fd\uff09",o:"Chinese Simplified (China)"},"zh-HK":{m:"\u4e2d\u6587\uff08\u9999\u6e2f\uff09",o:"Chinese Traditional (Hong Kong)"},"zh-SG":{m:"\u4e2d\u6587\uff08\u65b0\u52a0\u5761\uff09",o:"Chinese Simplified (Singapore)"},"zh-TW":{m:"\u4e2d\u6587\uff08\u53f0\u7063\uff09",o:"Chinese Traditional (Taiwan)"},"zu-ZA":{m:"isiZulu",o:"Zulu"}},qp=r(Object.keys(pp)),rp=qp.next();!rp.done;rp=
qp.next()){var sp=rp.value;pp[sp.toLowerCase()]=pp[sp]};function tp(a,b){this.parent=a;this.controls=b;this.eventManager=new M;this.localization=this.controls.Qa;this.player=this.controls.eb();this.video=this.controls.wc()}A("shaka.ui.Element",tp);tp.prototype.destroy=function(){this.eventManager.release();this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null;return Promise.resolve()};tp.prototype.destroy=tp.prototype.destroy;function up(a,b,c,d){tp.call(this,a,b);var e=this;this.container=Y("div");this.container.classList.add("shaka-range-container");this.container.classList.add.apply(this.container.classList,Oa(c));this.g=!1;this.bar=document.createElement("input");this.i=new K(function(){e.onChangeEnd();e.g=!1});this.bar.classList.add("shaka-range-element");this.bar.classList.add.apply(this.bar.classList,Oa(d));this.bar.type="range";this.bar.step="any";this.bar.min="0";this.bar.max="1";this.bar.value="0";this.container.appendChild(this.bar);
this.parent.appendChild(this.container);this.eventManager.v(this.bar,"mousedown",function(){e.controls.Hb()&&(e.g=!0,e.onChangeStart())});this.eventManager.v(this.bar,"touchstart",function(a){e.controls.Hb()&&(e.g=!0,vp(e,a),e.onChangeStart())});this.eventManager.v(this.bar,"input",function(){e.onChange()});this.eventManager.v(this.bar,"touchmove",function(a){e.g&&(vp(e,a),e.onChange())});this.eventManager.v(this.bar,"touchend",function(a){e.g&&(e.g=!1,vp(e,a),e.onChangeEnd())});this.eventManager.v(this.bar,
"mouseup",function(){e.g&&(e.g=!1,e.onChangeEnd())})}ta(up,tp);A("shaka.ui.RangeElement",up);up.prototype.destroy=function(){this.i&&(this.i.stop(),this.i=null);return tp.prototype.destroy.call(this)};up.prototype.setRange=function(a,b){this.bar.min=a;this.bar.max=b};up.prototype.setRange=up.prototype.setRange;up.prototype.onChangeStart=function(){};up.prototype.onChangeStart=up.prototype.onChangeStart;up.prototype.onChange=function(){};up.prototype.onChange=up.prototype.onChange;
up.prototype.onChangeEnd=function(){};up.prototype.onChangeEnd=up.prototype.onChangeEnd;up.prototype.changeTo=function(a){this.g||(this.g=!0,this.onChangeStart());var b=parseFloat(this.bar.min),c=parseFloat(this.bar.max);this.bar.value=a>c?c:a<b?b:a;this.onChange();this.i.U(.5)};up.prototype.changeTo=up.prototype.changeTo;up.prototype.getValue=function(){return parseFloat(this.bar.value)};up.prototype.getValue=up.prototype.getValue;up.prototype.setValue=function(a){this.g||(this.bar.value=a)};
up.prototype.setValue=up.prototype.setValue;function vp(a,b){b.preventDefault();var c=b.changedTouches[0],d=a.bar.getBoundingClientRect(),e=parseFloat(a.bar.min),f=parseFloat(a.bar.max);c=e+(f-e)/d.width*(c.clientX-d.left);c<e?c=e:c>f&&(c=f);a.bar.value=c};A("shaka.ui.Utils.getFirstDescendantWithClassName",function(a,b){return wp(a,b)});function wp(a,b){var c=a.getElementsByClassName(b);return c.length?c[0]:null}function xp(a){a&&(a=wp(a,"shaka-chosen-item"))&&a.parentElement.focus()}function yp(){var a=Y("i");a.classList.add("material-icons-round");a.classList.add("shaka-chosen-item");a.textContent="done";a.setAttribute("aria-hidden","true");return a}
function zp(a,b){a&&(b?(a.classList.add("shaka-displayed"),a.classList.remove("shaka-hidden")):(a.classList.add("shaka-hidden"),a.classList.remove("shaka-displayed")))}A("shaka.ui.Utils.setDisplay",zp);function Ap(a){for(;a.firstChild;)a.removeChild(a.firstChild)}A("shaka.ui.Utils.removeAllChildren",Ap);function Bp(a,b){up.call(this,a,b,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var c=this;this.j=this.controls.l;this.h=new K(function(){c.video.currentTime=c.getValue()});this.l=!1;this.eventManager.v(this.localization,"locale-updated",function(){return Cp(c)});this.eventManager.v(this.localization,"locale-changed",function(){return Cp(c)});this.setValue(this.video.currentTime);Dp(this);Cp(this)}ta(Bp,up);A("shaka.ui.SeekBar",Bp);
Bp.prototype.destroy=function(){var a=this;return u(function c(){return y(c,function(c){switch(c.A){case 1:return a.h&&(a.h.stop(),a.h=null),v(c,up.prototype.destroy.call(a),0)}})})};Bp.prototype.onChangeStart=function(){this.l=!this.video.paused;this.controls.pe(!0);this.video.pause()};Bp.prototype.onChange=function(){this.video.duration&&(Dp(this),this.h.U(.125))};Bp.prototype.onChangeEnd=function(){this.h.kb();this.controls.pe(!1);this.l&&this.video.play()};
function Dp(a){var b=a.j.seekBarColors,c=a.getValue(),d=a.video.buffered.length,e=d?a.video.buffered.start(0):0,f=d?a.video.buffered.end(d-1):0,h=a.player.Nb(),k=h.end-h.start;a.setRange(h.start,h.end);a.player.$()&&5>k?zp(a.container,!1):(zp(a.container,!0),0==d?a.container.style.background=b.base:(d=(Math.max(e,h.start)-h.start)/k||0,f=(Math.min(f,h.end)-h.start)/k||0,c=(Math.min(Math.max(c,h.start),h.end)-h.start)/k||0,a.container.style.background="linear-gradient("+["to right",(a.j.showUnbufferedStart?
b.base:b.played)+" "+100*d+"%",b.played+" "+100*d+"%",b.played+" "+100*c+"%",b.buffered+" "+100*c+"%",b.buffered+" "+100*f+"%",b.base+" "+100*f+"%"].join()+")"))}function Cp(a){a.bar.setAttribute("aria-label",a.localization.resolve("SEEK"))};function Z(a,b,c,d){var e=this;ab.call(this);this.V=!0;this.l=d;this.u=new O(c,a,this.l.castReceiverAppId);this.Ka=!0;this.s=this.u.wc();this.H=c;this.B=this.u.eb();this.Aa=a;this.i=b;this.j=null;this.ea=!1;this.M=[];this.$a=[];this.Sa=!1;this.P=new K(function(){e.i.style.cursor="none";e.Sa=!1;Ep(e)});this.ba=new K(function(){e.g.removeAttribute("shown");e.C.U(2)});this.C=new K(function(){for(var a=r(e.M),b=a.next();!b.done;b=a.next())zp(b.value,!1)});this.Ca=new K(function(){e.Hb()&&Fp(e)});this.F=
null;this.Oa=[];this.Qa=Gp();this.h=new M;this.configure(this.l);Hp(this);this.qa=new Set;Ip(this);this.Ca.Na(.125)}Za(Z,ab);A("shaka.ui.Controls",Z);var Jp=new Map;
Z.prototype.destroy=function(){var a=this;return u(function c(){return y(c,function(c){switch(c.A){case 1:a.h&&(a.h.release(),a.h=null);a.P&&(a.P.stop(),a.P=null);a.ba&&(a.ba.stop(),a.ba=null);a.C&&(a.C.stop(),a.C=null);a.Ca&&(a.Ca.stop(),a.Ca=null);a.g&&(a.i.removeChild(a.g),a.g=null);if(!a.u){c.I(2);break}return v(c,a.u.destroy(),3);case 3:a.u=null;case 2:if(!a.Aa){c.I(4);break}return v(c,a.Aa.destroy(),5);case 5:a.Aa=null;case 4:return a.B=null,a.H=null,a.s=null,a.Qa=null,a.qa.clear(),v(c,Promise.all(a.Oa.map(function(a){return a.destroy()})),
6);case 6:a.Oa=[];if(a.j)return v(c,a.j.destroy(),0);c.I(0)}})})};Z.prototype.destroy=Z.prototype.destroy;function Kp(a,b){Jp.set(a,b)}Z.registerElement=Kp;Z.prototype.Pf=function(a){this.Ka=a;Ip(this)};Z.prototype.allowCast=Z.prototype.Pf;Z.prototype.Pg=function(){this.R()};Z.prototype.loadComplete=Z.prototype.Pg;
Z.prototype.configure=function(a){this.l=a;this.u.Ie(a.castReceiverAppId);this.j&&(this.j.destroy(),this.j=null);this.Ra&&(this.Ra.destroy(),this.Ra=null);this.g?($o(this.g),this.i.removeChild(this.K)):Lp(this);Mp(this);this.R();a=r(this.i.getElementsByClassName("shaka-no-propagation"));for(var b=a.next();!b.done;b=a.next()){b=b.value;var c=function(a){return a.stopPropagation()};this.h.v(b,"click",c);this.h.v(b,"dblclick",c)}};Z.prototype.configure=Z.prototype.configure;
Z.prototype.le=function(a){(this.V=a)?(zp(this.g,!0),zp(this.K,this.B.$b()),this.H.tabIndex=-1,this.H.controls=!1):(zp(this.g,!1),zp(this.K,!1));this.R()};Z.prototype.setEnabledShakaControls=Z.prototype.le;Z.prototype.pe=function(a){this.ea=a};Z.prototype.setSeeking=Z.prototype.pe;Z.prototype.wf=function(a){this.H.controls=a;this.H.tabIndex=a?0:-1;a&&this.le(!1)};Z.prototype.setEnabledNativeControls=Z.prototype.wf;Z.prototype.eg=function(){return this.u};Z.prototype.getCastProxy=Z.prototype.eg;
Z.prototype.pg=function(){return this.Qa};Z.prototype.getLocalization=Z.prototype.pg;
Z.prototype.we=function(){var a=this;return u(function c(){var d;return y(c,function(c){switch(c.A){case 1:if(document.fullscreenElement){document.exitFullscreen();c.I(0);break}ya(c,3);if(!document.pictureInPictureElement){c.I(5);break}return v(c,document.exitPictureInPicture(),5);case 5:Aa(c,4);break;case 3:d=Da(c),a.dispatchEvent(new B("error",{detail:d}));case 4:return v(c,a.i.requestFullscreen({navigationUI:"hide"}),0)}})})};Z.prototype.toggleFullScreen=Z.prototype.we;Z.prototype.Hg=function(){return this.i};
Z.prototype.getVideoContainer=Z.prototype.Hg;Z.prototype.wc=function(){return this.s};Z.prototype.getVideo=Z.prototype.wc;Z.prototype.og=function(){return this.H};Z.prototype.getLocalVideo=Z.prototype.og;Z.prototype.eb=function(){return this.B};Z.prototype.getPlayer=Z.prototype.eb;Z.prototype.ng=function(){return this.Aa};Z.prototype.getLocalPlayer=Z.prototype.ng;Z.prototype.hg=function(){return this.g};Z.prototype.getControlsContainer=Z.prototype.hg;Z.prototype.fg=function(){return this.l};
Z.prototype.getConfig=Z.prototype.fg;Z.prototype.Ng=function(){return this.ea};Z.prototype.isSeeking=Z.prototype.Ng;Z.prototype.Lg=function(){return this.Ka};Z.prototype.isCastAllowed=Z.prototype.Lg;Z.prototype.Re=function(){return this.j?this.j.getValue():this.s.currentTime};Z.prototype.getDisplayTime=Z.prototype.Re;Z.prototype.xf=function(a){this.F=a};Z.prototype.setLastTouchEventTime=Z.prototype.xf;Z.prototype.Jc=function(){return this.M.some(function(a){return a.classList.contains("shaka-displayed")})};
Z.prototype.anySettingsMenusAreOpen=Z.prototype.Jc;Z.prototype.yc=function(){this.C.kb()};Z.prototype.hideSettingsMenus=Z.prototype.yc;
function Mp(a){a.i.classList.add("shaka-video-container");a.H.classList.add("shaka-video");var b=Y("div");b.classList.add("shaka-skim-container");b.classList.add("shaka-fade-out-on-mouse-out");a.g.appendChild(b);a.l.addBigPlayButton&&(b=Y("div"),b.classList.add("shaka-play-button-container"),a.g.appendChild(b),a.Ra=new Np(b,a));a.K=Y("div");a.K.classList.add("shaka-spinner-container");a.i.appendChild(a.K);var c=Y("div");c.classList.add("shaka-spinner");a.K.appendChild(c);b=document.createElementNS("http://www.w3.org/2000/svg",
"svg");b.setAttribute("class","shaka-spinner-svg");b.setAttribute("viewBox","0 0 30 30");c.appendChild(b);c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("class","shaka-spinner-path");c.setAttribute("cx","15");c.setAttribute("cy","15");c.setAttribute("r","14.5");c.setAttribute("fill","none");c.setAttribute("stroke-width","1");c.setAttribute("stroke-miterlimit","10");b.appendChild(c);Op(a);a.M=Array.from(a.i.getElementsByClassName("shaka-settings-menu"));if(a.l.addSeekBar)a.j=
new Bp(a.sa,a);else for(b=r(a.M),c=b.next();!c.done;c=b.next())c.value.classList.add("shaka-low-position");a.$a=Array.from(a.i.getElementsByClassName("shaka-show-controls-on-mouse-over"))}
function Lp(a){a.g=Y("div");a.g.classList.add("shaka-controls-container");a.i.appendChild(a.g);a.h.v(a.g,"touchstart",function(b){a.s.duration&&(a.Hb()?a.F=Date.now():(a.oa(b),b.preventDefault()))},{passive:!1});a.h.v(a.g,"click",function(){a.V&&(a.Jc()?a.C.kb():Pp(a))});a.h.v(a.g,"dblclick",function(){a.l.doubleClickForFullscreen&&document.fullscreenEnabled&&a.we()})}
function Op(a){a.sa=Y("div");a.sa.classList.add("shaka-bottom-controls");a.g.appendChild(a.sa);a.O=Y("div");a.O.classList.add("shaka-controls-button-panel");a.O.classList.add("shaka-no-propagation");a.O.classList.add("shaka-show-controls-on-mouse-over");a.sa.appendChild(a.O);a.h.v(a.O,"click",function(){a.yc()});for(var b=0;b<a.l.controlPanelElements.length;b++){var c=a.l.controlPanelElements[b];Jp.get(c)?(c=Jp.get(c),a.Oa.push(c.create(a.O,a))):D.ha("Unrecognized control panel element requested:",
c)}}
function Hp(a){a.h.v(a.B,"buffering",function(){a.V&&zp(a.K,a.B.$b())});a.V&&zp(a.K,a.B.$b());a.h.v(window,"keydown",function(b){a.qa.add(b.key);var c=a.Jc();"Tab"==b.key&&(a.g.classList.add("shaka-keyboard-navigation"),Ep(a),a.h.v(window,"mousedown",a.ob.bind(a)));"Escape"==b.key&&a.C.kb();c&&a.qa.has("Tab")&&Qp(a,b)});a.h.v(window,"click",function(){return a.yc()});a.h.v(a.s,"play",a.R.bind(a));a.h.v(a.s,"pause",a.R.bind(a));a.h.v(a.s,"ended",a.R.bind(a));a.h.v(a.i,"mousemove",a.oa.bind(a));a.h.v(a.i,
"touchmove",a.oa.bind(a),{passive:!0});a.h.v(a.i,"touchend",a.oa.bind(a),{passive:!0});a.h.v(a.i,"mouseleave",a.yb.bind(a));a.h.v(a.u,"caststatuschanged",function(){Ip(a)});a.h.v(a.i,"keydown",function(b){var c=document.activeElement,d=c&&c.classList?c.classList.contains("shaka-volume-bar"):!1,e=c&&c.classList&&c.classList.contains("shaka-seek-bar");a.g.contains(c)&&a.oa(b);if(a.l.enableKeyboardPlaybackControls)switch(b.key){case "ArrowLeft":a.j&&!d&&(b.preventDefault(),Rp(a,a.j.getValue()-5));break;
case "ArrowRight":a.j&&!d&&(b.preventDefault(),Rp(a,a.j.getValue()+5));break;case "Home":a.j&&Rp(a,a.B.Nb().start);break;case "End":a.j&&Rp(a,a.B.Nb().end);break;case " ":e&&Pp(a)}});a.h.v(a.i,"keyup",function(b){a.qa["delete"](b.key)});screen.orientation&&a.h.v(screen.orientation,"change",function(){a.s&&0!=a.s.readyState&&!a.u.na()&&a.l.enableFullscreenOnRotation&&(screen.orientation.type.includes("landscape")&&!document.fullscreenElement?a.i.requestFullscreen({navigationUI:"hide"}):screen.orientation.type.includes("portrait")&&
document.fullscreenElement&&document.exitFullscreen())})}Z.prototype.oa=function(a){"mousemove"==a.type&&(this.g.classList.remove("shaka-keyboard-navigation"),Ep(this));"touchstart"==a.type||"touchmove"==a.type||"touchend"==a.type||"keyup"==a.type?this.F=Date.now():this.F+1E3<Date.now()&&(this.F=null);this.F&&"mousemove"==a.type||(this.i.style.cursor="",this.Sa=!0,this.C.stop(),this.Hb()||(Fp(this),Ep(this)),this.P.stop(),"touchend"!=a.type&&"keyup"!=a.type&&this.F||this.P.U(3))};
Z.prototype.yb=function(){this.F||this.P.kb()};function Sp(a){return window.matchMedia("hover: hover").matches?a.$a.some(function(a){return a.matches(":hover")}):!1}function Ep(a){var b=a.s.paused&&!a.ea,c=a.g.classList.contains("shaka-keyboard-navigation");b||a.Sa||c||Sp(a)?(Fp(a),a.g.setAttribute("shown","true"),a.ba.stop()):a.ba.U(a.l.fadeDelay)}function Pp(a){a.V&&a.s.duration&&(a.B.Fe(),a.s.paused?a.s.play():a.s.pause())}
function Ip(a){var b=a.u.na();a.dispatchEvent(new B("caststatuschanged",{Rg:b}));b?a.g.setAttribute("casting","true"):a.g.removeAttribute("casting")}Z.prototype.R=function(){this.s.ended&&!this.s.paused&&this.s.pause();Ep(this)};Z.prototype.Hb=function(){return this.V?null!=this.g.getAttribute("shown")||null!=this.g.getAttribute("casting"):!1};Z.prototype.isOpaque=Z.prototype.Hb;function Rp(a,b){a.j.changeTo(b);a.Hb()&&Fp(a)}
function Fp(a){if(a.j)if(a.j.setValue(a.s.currentTime),Dp(a.j),a.j.container.classList.contains("shaka-hidden")){var b=r(a.M);for(c=b.next();!c.done;c=b.next())c.value.classList.add("shaka-low-position")}else{b=r(a.M);for(var c=b.next();!c.done;c=b.next())c.value.classList.remove("shaka-low-position")}a.dispatchEvent(new B("timeandseekrangeupdated"))}
function Qp(a,b){var c=a.M.filter(function(a){return a.classList.contains("shaka-displayed")});if(c.length){var d=c[0];if(d.childNodes.length){for(c=d.firstElementChild;c&&c.classList.contains("shaka-hidden");)c=c.nextElementSibling;for(d=d.lastElementChild;d&&d.classList.contains("shaka-hidden");)d=d.previousElementSibling;var e=document.activeElement;a.qa.has("Shift")?e==c&&(b.preventDefault(),d.focus()):e==d&&(b.preventDefault(),c.focus())}}}Z.prototype.ob=function(){this.h.Ba(window,"mousedown")};
function Gp(){var a=new ob("en");a.ka("ar",new Map([["AUTO_QUALITY","\u062a\u0644\u0642\u0627\u0626\u064a"],["BACK","\u0631\u062c\u0648\u0639"],["CAPTIONS","\u0627\u0644\u062a\u0631\u062c\u0645\u0629 \u0648\u0627\u0644\u0634\u0631\u062d"],["CAST","\u0625\u0631\u0633\u0627\u0644..."],["ENTER_PICTURE_IN_PICTURE",'\u0627\u0644\u062f\u062e\u0648\u0644 \u0641\u064a \u0648\u0636\u0639 "\u0646\u0627\u0641\u0630\u0629 \u0636\u0645\u0646 \u0646\u0627\u0641\u0630\u0629"'],["EXIT_FULL_SCREEN","\u0625\u0646\u0647\u0627\u0621 \u0648\u0636\u0639 \u0645\u0644\u0621 \u0627\u0644\u0634\u0627\u0634\u0629"],
["EXIT_PICTURE_IN_PICTURE",'\u0627\u0644\u062e\u0631\u0648\u062c \u0645\u0646 \u0648\u0636\u0639 "\u0646\u0627\u0641\u0630\u0629 \u0636\u0645\u0646 \u0646\u0627\u0641\u0630\u0629"'],["FAST_FORWARD","\u062a\u0642\u062f\u064a\u0645 \u0633\u0631\u064a\u0639"],["FULL_SCREEN","\u0645\u0644\u0621 \u0627\u0644\u0634\u0627\u0634\u0629"],["LANGUAGE","\u0627\u0644\u0644\u063a\u0629"],["LIVE","\u0645\u0628\u0627\u0634\u0631"],["MORE_SETTINGS","\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a"],
["MULTIPLE_LANGUAGES","\u0644\u063a\u0627\u062a \u0645\u062a\u0639\u062f\u062f\u0629"],["MUTE","\u0643\u062a\u0645 \u0627\u0644\u0635\u0648\u062a"],["NOT_APPLICABLE","\u063a\u064a\u0631 \u0633\u0627\u0631\u064d"],["OFF","\u0625\u064a\u0642\u0627\u0641"],["ON","\u062a\u0634\u063a\u064a\u0644"],["PAUSE","\u0625\u064a\u0642\u0627\u0641 \u0645\u0624\u0642\u062a"],["PICTURE_IN_PICTURE","\u0646\u0627\u0641\u0630\u0629 \u0636\u0645\u0646 \u0627\u0644\u0646\u0627\u0641\u0630\u0629"],["PLAY","\u0627\u0644\u062a\u0634\u063a\u064a\u0644"],
["RESOLUTION","\u062f\u0631\u062c\u0629 \u0627\u0644\u062f\u0642\u0629"],["REWIND","\u0625\u0631\u062c\u0627\u0639"],["SEEK","\u0627\u0644\u0628\u062d\u062b \u0628\u0627\u0644\u062a\u0645\u0631\u064a\u0631"],["SKIP_TO_LIVE","\u0627\u0644\u0627\u0646\u062a\u0642\u0627\u0644 \u0625\u0644\u0649 \u0628\u062b \u0645\u0628\u0627\u0634\u0631"],["UNDETERMINED_LANGUAGE","\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"],["UNMUTE","\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0635\u0648\u062a"],["UNRECOGNIZED_LANGUAGE",
"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"],["VOLUME","\u0645\u0633\u062a\u0648\u0649 \u0627\u0644\u0635\u0648\u062a"]]));a.ka("de",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Zur\u00fcck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE",
"Live"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["RESOLUTION","Aufl\u00f6sung"],["REWIND","Zur\u00fcckspulen"],["SEEK","Suche"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],
["VOLUME","Lautst\u00e4rke"]]));a.ka("en",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],
["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]]));a.ka("en-GB",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN",
"Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],
["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]]));a.ka("es",new Map([["AUTO_QUALITY","Autom\u00e1tico"],["BACK","Atr\u00e1s"],["CAPTIONS","Subt\u00edtulos"],["CAST","Enviar..."],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar r\u00e1pidamente"],["FULL_SCREEN","Pantalla completa"],
["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","M\u00e1s opciones"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","No"],["ON","S\u00ed"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["RESOLUTION","Resoluci\u00f3n"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_TO_LIVE","Ir al v\u00eddeo en directo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE",
"No reconocida"],["VOLUME","Volumen"]]));a.ka("es-419",new Map([["AUTO_QUALITY","Autom\u00e1tico"],["BACK","Atr\u00e1s"],["CAPTIONS","Subt\u00edtulos"],["CAST","Transmitir..."],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","M\u00e1s opciones de configuraci\u00f3n"],
["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["RESOLUTION","Resoluci\u00f3n"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_TO_LIVE","Adelantar hasta la transmisi\u00f3n en vivo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]]));
a.ka("fr",new Map([["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster\u2026"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein \u00e9cran"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode\u00a0PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein \u00e9cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["MORE_SETTINGS","Plus de param\u00e8tres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],
["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","D\u00e9sactiv\u00e9e"],["ON","Activ\u00e9e"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["RESOLUTION","R\u00e9solution"],["REWIND","Retour arri\u00e8re"],["SEEK","Chercher"],["SKIP_TO_LIVE","Acc\u00e9der \u00e0 la partie la plus r\u00e9cente du direct"],["UNDETERMINED_LANGUAGE","Langue ind\u00e9termin\u00e9e"],["UNMUTE","R\u00e9activer le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME",
"Volume"]]));a.ka("it",new Map([["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi\u00f9 lingue"],["MUTE","Disattiva audio"],
["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]]));a.ka("ja",new Map([["AUTO_QUALITY","\u81ea\u52d5"],["BACK","\u623b\u308b"],["CAPTIONS",
"\u5b57\u5e55"],["CAST","\u30ad\u30e3\u30b9\u30c8..."],["ENTER_PICTURE_IN_PICTURE","\u30d4\u30af\u30c1\u30e3\u30fc \u30a4\u30f3 \u30d4\u30af\u30c1\u30e3\u30fc\u3092\u958b\u59cb"],["EXIT_FULL_SCREEN","\u5168\u753b\u9762\u8868\u793a\u3092\u7d42\u4e86"],["EXIT_PICTURE_IN_PICTURE","\u30d4\u30af\u30c1\u30e3\u30fc \u30a4\u30f3 \u30d4\u30af\u30c1\u30e3\u30fc\u3092\u7d42\u4e86"],["FAST_FORWARD","\u65e9\u9001\u308a"],["FULL_SCREEN","\u5168\u753b\u9762\u8868\u793a"],["LANGUAGE","\u8a00\u8a9e"],["LIVE","\u30e9\u30a4\u30d6"],
["MORE_SETTINGS","\u8a73\u7d30\u8a2d\u5b9a"],["MULTIPLE_LANGUAGES","\u591a\u8a00\u8a9e"],["MUTE","\u30df\u30e5\u30fc\u30c8"],["NOT_APPLICABLE","\u8a72\u5f53\u306a\u3057"],["OFF","\u30aa\u30d5"],["ON","\u30aa\u30f3"],["PAUSE","\u4e00\u6642\u505c\u6b62"],["PICTURE_IN_PICTURE","\u30d4\u30af\u30c1\u30e3\u30fc \u30a4\u30f3 \u30d4\u30af\u30c1\u30e3\u30fc"],["PLAY","\u518d\u751f"],["RESOLUTION","\u89e3\u50cf\u5ea6"],["REWIND","\u5dfb\u304d\u623b\u3057"],["SEEK","\u30b7\u30fc\u30af\u518d\u751f"],["SKIP_TO_LIVE",
"\u30e9\u30a4\u30d6\u914d\u4fe1\u307e\u3067\u30b9\u30ad\u30c3\u30d7"],["UNDETERMINED_LANGUAGE","\u4e0d\u660e"],["UNMUTE","\u30df\u30e5\u30fc\u30c8\u3092\u89e3\u9664"],["UNRECOGNIZED_LANGUAGE","\u4e0d\u660e"],["VOLUME","\u97f3\u91cf"]]));a.ka("ko",new Map([["AUTO_QUALITY","\uc790\ub3d9"],["BACK","\ub4a4\ub85c"],["CAPTIONS","\uc790\ub9c9"],["CAST","\uc804\uc1a1..."],["ENTER_PICTURE_IN_PICTURE","PIP \ubaa8\ub4dc \uc2dc\uc791"],["EXIT_FULL_SCREEN","\uc804\uccb4\ud654\uba74 \ub2eb\uae30"],["EXIT_PICTURE_IN_PICTURE",
"PIP \ubaa8\ub4dc \uc885\ub8cc"],["FAST_FORWARD","\ube68\ub9ac \uac10\uae30"],["FULL_SCREEN","\uc804\uccb4\ud654\uba74"],["LANGUAGE","\uc5b8\uc5b4"],["LIVE","\uc2e4\uc2dc\uac04"],["MORE_SETTINGS","\uc124\uc815 \ub354\ubcf4\uae30"],["MULTIPLE_LANGUAGES","\uc5ec\ub7ec \uc5b8\uc5b4"],["MUTE","\uc74c\uc18c\uac70"],["NOT_APPLICABLE","\ud574\ub2f9 \uc0ac\ud56d \uc5c6\uc74c"],["OFF","\uc0ac\uc6a9 \uc548\ud568"],["ON","\uc0ac\uc6a9"],["PAUSE","\uc77c\uc2dc\uc911\uc9c0"],["PICTURE_IN_PICTURE","PIP \ubaa8\ub4dc"],
["PLAY","\uc7ac\uc0dd"],["RESOLUTION","\ud574\uc0c1\ub3c4"],["REWIND","\ub418\uac10\uae30"],["SEEK","\ucc3e\uae30"],["SKIP_TO_LIVE","\ub77c\uc774\ube0c \ub3d9\uc601\uc0c1\uc73c\ub85c \uac74\ub108\ub6f0\uae30"],["UNDETERMINED_LANGUAGE","\ubbf8\uc815"],["UNMUTE","\uc74c\uc18c\uac70 \ud574\uc81c"],["UNRECOGNIZED_LANGUAGE","\uc54c \uc218 \uc5c6\uc74c"],["VOLUME","\ubcfc\ub968"]]));a.ka("nl",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_PICTURE_IN_PICTURE",
"Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["RESOLUTION","Resolutie"],
["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]]));a.ka("pl",new Map([["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesy\u0142aj..."],["ENTER_PICTURE_IN_PICTURE","W\u0142\u0105cz tryb obrazu w\u00a0obrazie"],["EXIT_FULL_SCREEN","Zamknij pe\u0142ny ekran"],["EXIT_PICTURE_IN_PICTURE","Wy\u0142\u0105cz tryb obrazu w\u00a0obrazie"],
["FAST_FORWARD","Przewi\u0144 do przodu"],["FULL_SCREEN","Pe\u0142ny ekran"],["LANGUAGE","J\u0119zyk"],["LIVE","Na \u017cywo"],["MORE_SETTINGS","Wi\u0119cej ustawie\u0144"],["MULTIPLE_LANGUAGES","Wiele j\u0119zyk\u00f3w"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wy\u0142\u0105czone"],["ON","W\u0142\u0105czone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w\u00a0obrazie"],["PLAY","Odtw\u00f3rz"],["RESOLUTION","Rozdzielczo\u015b\u0107"],["REWIND","Przewi\u0144 do ty\u0142u"],
["SEEK","Szukaj"],["SKIP_TO_LIVE","Przejd\u017a do transmisji na \u017cywo"],["UNDETERMINED_LANGUAGE","Nie okre\u015blono"],["UNMUTE","Wy\u0142\u0105cz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","G\u0142o\u015bno\u015b\u0107"]]));a.ka("pt-BR",new Map([["CAPTIONS","Legendas"],["CAST","Transmitir..."],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["MORE_SETTINGS",
"Mais defini\u00e7\u00f5es"],["MUTE","Desativar som"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["REWIND","Retroceder"],["SEEK","Procurar"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","N\u00e3o reconhecido"],["VOLUME","Volume"]]));a.ka("pt-PT",new Map([["AUTO_QUALITY","Autom\u00e1tico"],["BACK","Anterior"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_PICTURE_IN_PICTURE","Entrar no modo ecr\u00e3 no ecr\u00e3"],
["EXIT_FULL_SCREEN","Sair do modo de ecr\u00e3 inteiro"],["EXIT_PICTURE_IN_PICTURE","Sair do modo ecr\u00e3 no ecr\u00e3"],["FAST_FORWARD","Avan\u00e7ar"],["FULL_SCREEN","Ecr\u00e3 inteiro"],["LANGUAGE","Idioma"],["LIVE","Em direto"],["MORE_SETTINGS","Mais defini\u00e7\u00f5es"],["MULTIPLE_LANGUAGES","V\u00e1rios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","N\u00e3o aplic\u00e1vel"],["OFF","Desligado"],["ON","Ligado"],["PAUSE","Colocar em pausa"],["PICTURE_IN_PICTURE","Ecr\u00e3 no ecr\u00e3"],
["PLAY","Reproduzir"],["RESOLUTION","Resolu\u00e7\u00e3o"],["REWIND","Rebobinar"],["SEEK","Procurar"],["SKIP_TO_LIVE","Avan\u00e7ar para o direto"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Reativar o som"],["UNRECOGNIZED_LANGUAGE","N\u00e3o reconhecido"],["VOLUME","Volume"]]));a.ka("ru",new Map([["AUTO_QUALITY","\u0410\u0432\u0442\u043e"],["BACK","\u041d\u0430\u0437\u0430\u0434"],["CAPTIONS","\u0422\u0438\u0442\u0440\u044b"],["CAST","\u0422\u0440\u0430\u043d\u0441\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c..."],
["ENTER_PICTURE_IN_PICTURE",'\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0440\u0435\u0436\u0438\u043c "\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0432 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0435"'],["EXIT_FULL_SCREEN","\u041e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c"],["EXIT_PICTURE_IN_PICTURE",'\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0440\u0435\u0436\u0438\u043c\u0430 "\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0432 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0435"'],
["FAST_FORWARD","\u041f\u0435\u0440\u0435\u043c\u043e\u0442\u043a\u0430 \u0432\u043f\u0435\u0440\u0435\u0434"],["FULL_SCREEN","\u041f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c"],["LANGUAGE","\u042f\u0437\u044b\u043a"],["LIVE","\u041f\u0440\u044f\u043c\u043e\u0439 \u044d\u0444\u0438\u0440"],["MORE_SETTINGS","\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"],
["MULTIPLE_LANGUAGES","\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u044f\u0437\u044b\u043a\u043e\u0432"],["MUTE","\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a"],["NOT_APPLICABLE","\u041d\u0435\u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u043e"],["OFF","\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c"],["ON","\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c"],["PAUSE","\u041f\u0430\u0443\u0437\u0430"],["PICTURE_IN_PICTURE","\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0432 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0435"],
["PLAY","\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438"],["RESOLUTION","\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435"],["REWIND","\u041f\u0435\u0440\u0435\u043c\u043e\u0442\u0430\u0442\u044c \u043d\u0430\u0437\u0430\u0434"],["SEEK","\u041f\u0435\u0440\u0435\u043c\u043e\u0442\u043a\u0430"],["SKIP_TO_LIVE","\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0438 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u0440\u044f\u043c\u043e\u0439 \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0438\u0438"],
["UNDETERMINED_LANGUAGE","\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"],["UNMUTE","\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a"],["UNRECOGNIZED_LANGUAGE","\u041d\u0435 \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u043d\u043e"],["VOLUME","\u0413\u0440\u043e\u043c\u043a\u043e\u0441\u0442\u044c"]]));a.ka("th",new Map([["AUTO_QUALITY","\u0e2d\u0e31\u0e15\u0e42\u0e19\u0e21\u0e31\u0e15\u0e34"],["BACK","\u0e01\u0e25\u0e31\u0e1a"],["CAPTIONS","\u0e04\u0e33\u0e1a\u0e23\u0e23\u0e22\u0e32\u0e22"],
["CAST","\u0e41\u0e04\u0e2a\u0e15\u0e4c..."],["ENTER_PICTURE_IN_PICTURE","\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e01\u0e32\u0e23\u0e41\u0e2a\u0e14\u0e07\u0e20\u0e32\u0e1e\u0e0b\u0e49\u0e2d\u0e19\u0e20\u0e32\u0e1e"],["EXIT_FULL_SCREEN","\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e01\u0e32\u0e23\u0e41\u0e2a\u0e14\u0e07\u0e41\u0e1a\u0e1a\u0e40\u0e15\u0e47\u0e21\u0e2b\u0e19\u0e49\u0e32\u0e08\u0e2d"],["EXIT_PICTURE_IN_PICTURE","\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e01\u0e32\u0e23\u0e41\u0e2a\u0e14\u0e07\u0e20\u0e32\u0e1e\u0e0b\u0e49\u0e2d\u0e19\u0e20\u0e32\u0e1e"],
["FAST_FORWARD","\u0e01\u0e23\u0e2d\u0e44\u0e1b\u0e02\u0e49\u0e32\u0e07\u0e2b\u0e19\u0e49\u0e32"],["FULL_SCREEN","\u0e40\u0e15\u0e47\u0e21\u0e2b\u0e19\u0e49\u0e32\u0e08\u0e2d"],["LANGUAGE","\u0e20\u0e32\u0e29\u0e32"],["LIVE","\u0e2a\u0e14"],["MORE_SETTINGS","\u0e01\u0e32\u0e23\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e15\u0e34\u0e21"],["MULTIPLE_LANGUAGES","\u0e2b\u0e25\u0e32\u0e22\u0e20\u0e32\u0e29\u0e32"],["MUTE","\u0e1b\u0e34\u0e14\u0e40\u0e2a\u0e35\u0e22\u0e07"],
["NOT_APPLICABLE","\u0e44\u0e21\u0e48\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e02\u0e49\u0e2d\u0e07"],["OFF","\u0e1b\u0e34\u0e14"],["ON","\u0e40\u0e1b\u0e34\u0e14"],["PAUSE","\u0e2b\u0e22\u0e38\u0e14\u0e0a\u0e31\u0e48\u0e27\u0e04\u0e23\u0e32\u0e27"],["PICTURE_IN_PICTURE","\u0e01\u0e32\u0e23\u0e41\u0e2a\u0e14\u0e07\u0e20\u0e32\u0e1e\u0e0b\u0e49\u0e2d\u0e19\u0e20\u0e32\u0e1e"],["PLAY","\u0e40\u0e25\u0e48\u0e19"],["RESOLUTION","\u0e04\u0e27\u0e32\u0e21\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14"],["REWIND",
"\u0e01\u0e23\u0e2d\u0e01\u0e25\u0e31\u0e1a"],["SEEK","\u0e04\u0e49\u0e19\u0e2b\u0e32"],["SKIP_TO_LIVE","\u0e02\u0e49\u0e32\u0e21\u0e44\u0e1b\u0e17\u0e35\u0e48\u0e01\u0e32\u0e23\u0e16\u0e48\u0e32\u0e22\u0e17\u0e2d\u0e14\u0e2a\u0e14"],["UNDETERMINED_LANGUAGE","\u0e44\u0e21\u0e48\u0e01\u0e33\u0e2b\u0e19\u0e14"],["UNMUTE","\u0e40\u0e1b\u0e34\u0e14\u0e40\u0e2a\u0e35\u0e22\u0e07"],["UNRECOGNIZED_LANGUAGE","\u0e17\u0e35\u0e48\u0e44\u0e21\u0e48\u0e23\u0e39\u0e49\u0e08\u0e31\u0e01"],["VOLUME","\u0e23\u0e30\u0e14\u0e31\u0e1a\u0e40\u0e2a\u0e35\u0e22\u0e07"]]));
a.ka("tr",new Map([["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyaz\u0131lar"],["CAST","Yay\u0131nla..."],["ENTER_PICTURE_IN_PICTURE","Pencere i\u00e7inde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan \u00e7\u0131k"],["EXIT_PICTURE_IN_PICTURE","Pencere \u0130\u00e7inde Pencereden \u00c7\u0131k"],["FAST_FORWARD","\u0130leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl\u0131"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden \u00e7ok dil"],
["MUTE","Sesi kapat"],["NOT_APPLICABLE","Ge\u00e7erli de\u011fil"],["OFF","Kapal\u0131"],["ON","A\u00e7\u0131k"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere \u0130\u00e7inde Pencere"],["PLAY","Oynat"],["RESOLUTION","\u00c7\u00f6z\u00fcn\u00fcrl\u00fck"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_TO_LIVE","Canl\u0131 yay\u0131na atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a\u00e7"],["UNRECOGNIZED_LANGUAGE","Tan\u0131nmayan"],["VOLUME","Ses"]]));a.ka("zh",new Map([["AUTO_QUALITY",
"\u81ea\u52a8"],["BACK","\u8fd4\u56de"],["CAPTIONS","\u5b57\u5e55"],["CAST","\u6295\u5c04\u2026"],["ENTER_PICTURE_IN_PICTURE","\u8fdb\u5165\u201c\u753b\u4e2d\u753b\u201d\u6a21\u5f0f"],["EXIT_FULL_SCREEN","\u9000\u51fa\u5168\u5c4f\u6a21\u5f0f"],["EXIT_PICTURE_IN_PICTURE","\u9000\u51fa\u201c\u753b\u4e2d\u753b\u201d\u6a21\u5f0f"],["FAST_FORWARD","\u5feb\u8fdb"],["FULL_SCREEN","\u5168\u5c4f"],["LANGUAGE","\u8bed\u8a00"],["LIVE","\u76f4\u64ad"],["MORE_SETTINGS","\u66f4\u591a\u8bbe\u7f6e"],["MULTIPLE_LANGUAGES",
"\u591a\u79cd\u8bed\u8a00"],["MUTE","\u9759\u97f3"],["NOT_APPLICABLE","\u4e0d\u9002\u7528"],["OFF","\u5173\u95ed"],["ON","\u5f00\u542f"],["PAUSE","\u6682\u505c"],["PICTURE_IN_PICTURE","\u753b\u4e2d\u753b"],["PLAY","\u64ad\u653e"],["RESOLUTION","\u5206\u8fa8\u7387"],["REWIND","\u5feb\u9000"],["SEEK","\u8fdb\u5ea6"],["SKIP_TO_LIVE","\u8df3\u81f3\u5f53\u524d\u76f4\u64ad"],["UNDETERMINED_LANGUAGE","\u672a\u786e\u5b9a"],["UNMUTE","\u53d6\u6d88\u9759\u97f3"],["UNRECOGNIZED_LANGUAGE","\u65e0\u6cd5\u8bc6\u522b"],
["VOLUME","\u97f3\u91cf"]]));a.ka("zh-TW",new Map([["AUTO_QUALITY","\u81ea\u52d5"],["BACK","\u8fd4\u56de"],["CAPTIONS","\u5b57\u5e55"],["CAST","\u6295\u653e..."],["ENTER_PICTURE_IN_PICTURE","\u9032\u5165\u5b50\u6bcd\u756b\u9762"],["EXIT_FULL_SCREEN","\u9000\u51fa\u5168\u87a2\u5e55\u6a21\u5f0f"],["EXIT_PICTURE_IN_PICTURE","\u96e2\u958b\u5b50\u6bcd\u756b\u9762"],["FAST_FORWARD","\u5feb\u8f49"],["FULL_SCREEN","\u5168\u87a2\u5e55"],["LANGUAGE","\u8a9e\u8a00"],["LIVE","\u76f4\u64ad"],["MORE_SETTINGS",
"\u986f\u793a\u66f4\u591a\u8a2d\u5b9a"],["MULTIPLE_LANGUAGES","\u591a\u7a2e\u8a9e\u8a00"],["MUTE","\u975c\u97f3"],["NOT_APPLICABLE","\u4e0d\u9069\u7528"],["OFF","\u95dc\u9589"],["ON","\u958b\u555f"],["PAUSE","\u66ab\u505c"],["PICTURE_IN_PICTURE","\u5b50\u6bcd\u756b\u9762"],["PLAY","\u64ad\u653e"],["RESOLUTION","\u89e3\u6790\u5ea6"],["REWIND","\u5012\u8f49"],["SEEK","\u641c\u5c0b"],["SKIP_TO_LIVE","\u8df3\u81f3\u5f53\u524d\u76f4\u64ad"],["UNDETERMINED_LANGUAGE","\u4e0d\u660e"],["UNMUTE","\u53d6\u6d88\u975c\u97f3"],
["UNRECOGNIZED_LANGUAGE","\u7121\u6cd5\u8fa8\u8b58"],["VOLUME","\u97f3\u91cf"]]));a.He(navigator.languages||[]);return a};function Tp(a,b){var c=this;this.s=!1;this.i=[];this.C=a;this.B=b;this.g=Y("div");this.g.classList.add("shaka-text-container");this.g.style.textAlign="center";this.g.style.display="flex";this.g.style.flexDirection="column";this.g.style.alignItems="center";this.g.style.justifyContent="flex-end";this.B.appendChild(this.g);this.u=(new K(function(){Up(c)})).Na(.25);this.h=new Map;this.l=new M;this.l.v(document,"fullscreenchange",function(){Up(c,!0)});this.j=null;"ResizeObserver"in window&&(this.j=new ResizeObserver(function(){Up(c,
!0)}),this.j.observe(this.g))}A("shaka.ui.TextDisplayer",Tp);Tp.prototype.append=function(a){var b=[].concat(Oa(this.i)),c={};a=r(a);for(var d=a.next();!d.done;c={cue:c.cue},d=a.next())c.cue=d.value,b.some(function(a){return function(b){return ge(b,a.cue)}}(c))||this.i.push(c.cue)};Tp.prototype.append=Tp.prototype.append;
Tp.prototype.destroy=function(){this.B.removeChild(this.g);this.g=null;this.s=!1;this.i=[];this.u&&this.u.stop();this.h.clear();this.l&&(this.l.release(),this.l=null);this.j&&(this.j.disconnect(),this.j=null)};Tp.prototype.destroy=Tp.prototype.destroy;Tp.prototype.remove=function(a,b){if(!this.g)return!1;this.i=this.i.filter(function(c){return c.startTime<a||c.endTime>=b});Up(this);return!0};Tp.prototype.remove=Tp.prototype.remove;Tp.prototype.isTextVisible=function(){return this.s};
Tp.prototype.isTextVisible=Tp.prototype.isTextVisible;Tp.prototype.setTextVisibility=function(a){this.s=a};Tp.prototype.setTextVisibility=Tp.prototype.setTextVisibility;
function Up(a,b){function c(b){return a.i.includes(b)&&a.s&&b.startTime<=d&&b.endTime>d}b=void 0===b?!1:b;for(var d=a.C.currentTime,e=r(a.h.keys()),f=e.next();!f.done;f=e.next())if(f=f.value,!c(f)||b){var h=a.h.get(f);a.g.removeChild(h);a.h["delete"](f)}e=new Set(a.h.values());f=r(Array.from(a.g.childNodes));for(h=f.next();!h.done;h=f.next())h=h.value,e.has(h)||a.g.removeChild(h);e=a.i.filter(function(b){return c(b)&&!a.h.has(b)}).sort(function(a,b){return a.startTime!=b.startTime?a.startTime-b.startTime:
a.endTime-b.endTime});e=r(e);for(f=e.next();!f.done;f=e.next())Vp(a,a.g,f.value)}function Wp(a,b,c){var d=Y("span");c&&d.classList.add("shaka-nested-cue");b.spacer?d.style.display="block":Xp(d,b,!0);a.appendChild(d);return d}function Vp(a,b,c){if(c.nestedCues.length){var d=Y("p");d.style.width="100%";Xp(d,c,!1);for(var e=0;e<c.nestedCues.length;e++)Wp(d,c.nestedCues[e],!0);b.appendChild(d);a.h.set(c,d)}else a.h.set(c,Wp(b,c,!1))}
function Xp(a,b,c){var d=a.style;d.whiteSpace="pre-line";a.textContent=b.payload;c&&(d.backgroundColor=b.backgroundColor);d.color=b.color;d.direction=b.direction;b.backgroundImage&&(d.backgroundImage="url('"+b.backgroundImage+"')",d.backgroundRepeat="no-repeat",d.backgroundSize="contain",d.backgroundPosition="center",""==b.backgroundColor&&(d.backgroundColor="transparent"));if(b.backgroundImage&&b.region){a=me;var e=b.region.widthUnits==a?"%":"px";d.height=b.region.height+(b.region.heightUnits==a?
"%":"px");d.width=b.region.width+e}d.justifyContent="before"==b.displayAlign?"flex-start":"center"==b.displayAlign?"center":"flex-end";b.nestedCues.length&&(d.display="flex",d.flexDirection="row",d.margin="0",d.alignItems=d.justifyContent,d.justifyContent="center");c&&(d.maxWidth="100%");d.fontFamily=b.fontFamily;d.fontWeight=b.fontWeight.toString();d.fontSize=b.fontSize;d.fontStyle=b.fontStyle;b.line?1==b.lineInterpretation&&(d.position="absolute",b.writingMode==ae?b.lineAlign==ce?d.top=b.line+"%":
"end"==b.lineAlign&&(d.bottom=b.line+"%"):"vertical-lr"==b.writingMode?b.lineAlign==ce?d.left=b.line+"%":"end"==b.lineAlign&&(d.right=b.line+"%"):b.lineAlign==ce?d.right=b.line+"%":"end"==b.lineAlign&&(d.left=b.line+"%")):b.region&&b.region.id&&!c&&(c=me,a=b.region.widthUnits==c?"%":"px",e=b.region.viewportAnchorUnits==c?"%":"px",d.height=b.region.height+(b.region.heightUnits==c?"%":"px"),d.width=b.region.width+a,d.position="absolute",d.top=b.region.viewportAnchorY+e,d.left=b.region.viewportAnchorX+
e);d.lineHeight=b.lineHeight;b.position&&(b.writingMode==ae?d.paddingLeft=b.position:d.paddingTop=b.position);"line-left"==b.positionAlign?d.cssFloat="left":"line-right"==b.positionAlign&&(d.cssFloat="right");d.textAlign=b.textAlign;d.textDecoration=b.textDecoration.join(" ");d.writingMode=b.writingMode;"writingMode"in document.documentElement.style&&d.writingMode==b.writingMode||(d.webkitWritingMode=b.writingMode);b.size&&(b.writingMode==ae?d.width=b.size+"%":d.height=b.size+"%")};function Yp(a,b,c){this.i=a;this.h=Zp();b.dataset.shakaPlayerContainer="";b.ui=this;this.$e()&&b.classList.add("shaka-mobile");this.g=new Z(a,b,c,this.h);this.configure({});c.controls||a.configure("textDisplayFactory",function(){return new Tp(c,b)});b.ui=this;c.ui=this}A("shaka.ui.Overlay",Yp);
Yp.prototype.destroy=function(){var a=this;return u(function c(){return y(c,function(c){switch(c.A){case 1:if(!a.g){c.I(2);break}return v(c,a.g.destroy(),3);case 3:a.g=null;case 2:if(!a.i){c.I(0);break}return v(c,a.i.destroy(),5);case 5:a.i=null,w(c)}})})};Yp.prototype.destroy=Yp.prototype.destroy;Yp.prototype.$e=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:ad()&&1<navigator.maxTouchPoints};Yp.prototype.isMobile=Yp.prototype.$e;
Yp.prototype.getConfiguration=function(){var a=Zp();Yk(a,this.h,Zp(),{},"");return a};Yp.prototype.getConfiguration=Yp.prototype.getConfiguration;Yp.prototype.configure=function(a,b){2==arguments.length&&"string"==typeof a&&(a=Zk(a,b));Yk(this.h,a,Zp(),{},"");this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast");this.g.configure(this.h);this.g.dispatchEvent(new B("uiupdated"))};Yp.prototype.configure=Yp.prototype.configure;
Yp.prototype.eb=function(){Pe("ui.Overlay.getPlayer()","Please use getControls().getPlayer() instead.");return this.g.eb()};Yp.prototype.getPlayer=Yp.prototype.eb;Yp.prototype.gg=function(){return this.g};Yp.prototype.getControls=Yp.prototype.gg;Yp.prototype.Dh=function(a){this.g.le(a)};Yp.prototype.setEnabled=Yp.prototype.Dh;
function Zp(){return{controlPanelElements:"time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:["captions","quality","language","picture_in_picture","cast"],addSeekBar:!0,addBigPlayButton:!0,castReceiverAppId:"",clearBufferOnQualityChange:!0,showUnbufferedStart:!0,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:$p,
fadeDelay:0,doubleClickForFullscreen:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0}}
function aq(){return u(function b(){var c,d,e,f,h,k,l,n;return y(b,function(b){switch(b.A){case 1:on();if(!Al())return D.error("Shaka Player does not support this browser. Please see https://tinyurl.com/y7s4j9tr for the list of supported browsers."),bq("shaka-ui-load-failed"),b["return"]();c=document.querySelectorAll("[data-shaka-player-container]");d=document.querySelectorAll("[data-shaka-player]");if(!d.length&&!c.length){b.I(2);break}if(d.length&&!c.length){for(var p=0;p<d.length;p++)e=d[p],e.ui||
(f=document.createElement("div"),h=e.parentElement,h.replaceChild(f,e),f.appendChild(e),cq(f,e));b.I(2);break}k=0;case 4:if(!(k<c.length)){b.I(2);break}l=c[k];if(l.ui){b.I(5);break}n=null;for(p=0;p<d.length;p++)if(d[p].parentElement==l){n=d[p];break}n||(n=document.createElement("video"),n.setAttribute("playsinline",""),l.appendChild(n));return v(b,cq(l,n),5);case 5:k++;b.I(4);break;case 2:bq("shaka-ui-loaded"),w(b)}})})}
function bq(a){var b=document.createEvent("CustomEvent");b.initCustomEvent(a,!1,!1,null);document.dispatchEvent(b)}
function cq(a,b){return u(function d(){var e,f,h,k,l,n,p,q,t;return y(d,function(d){switch(d.A){case 1:e=new W(b);f=new Yp(e,a,b);h="";a.dataset&&a.dataset.shakaPlayerCastReceiverId?h=a.dataset.shakaPlayerCastReceiverId:b.dataset&&b.dataset.shakaPlayerCastReceiverId&&(h=b.dataset.shakaPlayerCastReceiverId);h.length&&f.configure({castReceiverAppId:h});b.controls&&f.g.wf(!0);if(k=b.getAttribute("src"))l=document.createElement("source"),l.setAttribute("src",k),b.appendChild(l),b.removeAttribute("src");
n=r(b.querySelectorAll("source"));p=n.next();case 2:if(p.done){d.I(0);break}q=p.value;ya(d,5);return v(d,f.g.eb().load(q.getAttribute("src")),7);case 7:d.I(0);break;case 5:t=Da(d),D.error("Error auto-loading asset",t);case 3:p=n.next(),d.I(2)}})})}var $p=0;Yp.TrackLabelFormat={LANGUAGE:$p,ROLE:1,LANGUAGE_ROLE:2};"complete"==document.readyState?Promise.resolve().then(aq):window.addEventListener("load",aq);function dq(a,b,c,d,e,f,h){function k(a){return"variant"==a.type?a.audioRoles?a.audioRoles.join(", "):void 0:a.roles.join(", ")}var l=a.filter(function(a){return 1==a.active})[0],n=wp(b,"shaka-back-to-overflow-button");Ap(b);b.appendChild(n);n=new Map;for(var p=r(a),q=p.next();!q.done;q=p.next())q=q.value,n.has(q.language)||n.set(q.language,new Set),n.get(q.language).add(k(q));n=new Set;l=l?l.language+": "+k(l):"";p={};a=r(a);for(q=a.next();!q.done;p={mc:p.mc},q=a.next()){p.mc=q.value;q=p.mc.language;
var t=k(p.mc),x=q+": "+t;if(!n.has(x)){n.add(x);var C=Y("button");C.addEventListener("click",function(a){return function(){c(a.mc)}}(p));var z=Y("span");C.appendChild(z);z.textContent=eq(q,f);switch(h){case 1:t?z.textContent=t:(D.ha("Track #"+p.mc.id+" does not have a role, but the UI is configured to only show role."),z.textContent="?");break;case 2:t&&(z.textContent+=": "+t)}d&&x==l&&(C.appendChild(yp()),z.classList.add("shaka-chosen-item"),C.setAttribute("aria-selected","true"),e.textContent=z.textContent);
b.appendChild(C)}}}function eq(a,b){if(!a&&!b)return"";switch(a){case "mul":return b.resolve("MULTIPLE_LANGUAGES");case "und":return b.resolve("UNDETERMINED_LANGUAGE");case "zxx":return b.resolve("NOT_APPLICABLE")}var c=lb(a);return a in pp?pp[a].m:c in pp?pp[c].m+" ("+a+")":b.resolve("UNRECOGNIZED_LANGUAGE")+" ("+a+")"};function fq(a,b){tp.call(this,a,b);var c=this;this.j=this.controls.l;this.l=this.controls.g;this.i=[];this.h=Y("button");this.h.classList.add("shaka-overflow-menu-button");this.h.classList.add("shaka-no-propagation");this.h.classList.add("material-icons-round");this.h.textContent="more_vert";this.parent.appendChild(this.h);this.g=Y("div");this.g.classList.add("shaka-overflow-menu");this.g.classList.add("shaka-no-propagation");this.g.classList.add("shaka-show-controls-on-mouse-over");this.g.classList.add("shaka-settings-menu");
this.l.appendChild(this.g);gq(this);for(var d=this.controls.i.getElementsByClassName("shaka-back-to-overflow-button"),e=0;e<d.length;e++)this.eventManager.v(d[e],"click",function(){c.controls.yc();zp(c.g,!0);c.g.childNodes.length&&c.g.childNodes[0].focus();Ep(c.controls)});this.eventManager.v(this.localization,"locale-updated",function(){hq(c)});this.eventManager.v(this.localization,"locale-changed",function(){hq(c)});this.eventManager.v(this.controls,"submenuopen",function(){zp(c.g,!1)});this.eventManager.v(this.g,
"touchstart",function(a){c.controls.xf(Date.now());a.stopPropagation()});this.eventManager.v(this.h,"click",function(){iq(c)});hq(this)}ta(fq,tp);A("shaka.ui.OverflowMenu",fq);fq.prototype.destroy=function(){var a=this;return u(function c(){return y(c,function(c){switch(c.A){case 1:return a.l=null,v(c,Promise.all(a.i.map(function(a){return a.destroy()})),2);case 2:return a.i=[],v(c,tp.prototype.destroy.call(a),0)}})})};function jq(a,b){kq.set(a,b)}fq.registerElement=jq;
function gq(a){for(var b=0;b<a.j.overflowMenuButtons.length;b++){var c=a.j.overflowMenuButtons[b];kq.get(c)?(c=kq.get(c),a.i.push(c.create(a.g,a.controls))):D.ha("Unrecognized overflow menu element requested:",c)}}function iq(a){if(a.controls.Jc())a.controls.yc();else{zp(a.g,!0);Ep(a.controls);var b=function(a){return 0==a.classList.contains("shaka-hidden")};db(a.g.childNodes,b)&&eb(a.g.childNodes,b)[0].focus()}}
function hq(a){a.h.setAttribute("aria-label",a.localization.resolve("MORE_SETTINGS"))}function lq(){}lq.prototype.create=function(a,b){return new fq(a,b)};Kp("overflow_menu",new lq);var kq=new Map;function mq(a,b,c){tp.call(this,a,b);var d=this;nq(this,c);oq(this);this.eventManager.v(this.button,"click",function(){d.controls.dispatchEvent(new B("submenuopen"));zp(d.menu,!0);xp(d.menu)})}ta(mq,tp);A("shaka.ui.SettingsMenu",mq);
function nq(a,b){a.button=Y("button");a.icon=Y("i");a.icon.classList.add("material-icons-round");a.icon.textContent=b;a.button.appendChild(a.icon);var c=Y("label");c.classList.add("shaka-overflow-button-label");a.nameSpan=Y("span");c.appendChild(a.nameSpan);a.currentSelection=Y("span");a.currentSelection.classList.add("shaka-current-selection-span");c.appendChild(a.currentSelection);a.button.appendChild(c);a.parent.appendChild(a.button)}
function oq(a){a.menu=Y("div");a.menu.classList.add("shaka-no-propagation");a.menu.classList.add("shaka-show-controls-on-mouse-over");a.menu.classList.add("shaka-settings-menu");a.backButton=Y("button");a.backButton.classList.add("shaka-back-to-overflow-button");a.menu.appendChild(a.backButton);var b=Y("i");b.classList.add("material-icons-round");b.textContent="arrow_back";a.backButton.appendChild(b);a.backSpan=Y("span");a.backButton.appendChild(a.backSpan);a.controls.g.appendChild(a.menu)};function pq(a,b){mq.call(this,a,b,"language");var c=this;this.button.classList.add("shaka-language-button");this.menu.classList.add("shaka-audio-languages");this.eventManager.v(this.localization,"locale-updated",function(){qq(c)});this.eventManager.v(this.localization,"locale-changed",function(){qq(c)});this.eventManager.v(this.player,"trackschanged",function(){var a=0<c.player.Yb().length;zp(c.button,a);rq(c)});this.eventManager.v(this.player,"variantchanged",function(){rq(c)});qq(this);rq(this)}
ta(pq,mq);A("shaka.ui.AudioLanguageSelection",pq);function rq(a){var b=a.player.Yb();dq(b,a.menu,function(b){a.player.hd(b.language,b.roles[0])},!0,a.currentSelection,a.localization,a.controls.l.trackLabelFormat);xp(a.menu);a.controls.dispatchEvent(new B("languageselectionupdated"))}
function qq(a){a.backButton.setAttribute("aria-label",a.localization.resolve("BACK"));a.button.setAttribute("aria-label",a.localization.resolve("LANGUAGE"));a.nameSpan.textContent=a.localization.resolve("LANGUAGE");a.backSpan.textContent=a.localization.resolve("LANGUAGE")}function sq(){}sq.prototype.create=function(a,b){return new pq(a,b)};jq("language",new sq);function tq(a,b){tp.call(this,a,b);var c=this;this.button=Y("button");this.parent.appendChild(this.button);this.eventManager.v(this.localization,"locale-updated",function(){uq(c)});this.eventManager.v(this.localization,"locale-changed",function(){uq(c)});this.eventManager.v(this.video,"play",function(){uq(c)});this.eventManager.v(this.video,"pause",function(){uq(c)});this.eventManager.v(this.button,"click",function(){vq(c)?c.video.play():c.video.pause()})}ta(tq,tp);A("shaka.ui.PlayButton",tq);
function vq(a){return a.video.paused&&!a.controls.ea}function uq(a){a.button.setAttribute("aria-label",a.localization.resolve(vq(a)?"PLAY":"PAUSE"))};function Np(a,b){tq.call(this,a,b);var c=this;this.button.classList.add("shaka-play-button");this.button.classList.add("shaka-no-propagation");wq(this);uq(this);this.eventManager.v(this.video,"play",function(){wq(c)});this.eventManager.v(this.video,"pause",function(){wq(c)})}ta(Np,tq);A("shaka.ui.BigPlayButton",Np);function wq(a){vq(a)?a.button.setAttribute("icon","play"):a.button.setAttribute("icon","pause")};function xq(a,b){tp.call(this,a,b);var c=this;this.h=this.controls.u;this.g=Y("button");this.g.classList.add("shaka-cast-button");this.g.setAttribute("aria-pressed","false");this.i=Y("i");this.i.classList.add("material-icons-round");this.i.textContent="cast";this.g.appendChild(this.i);var d=Y("label");d.classList.add("shaka-overflow-button-label");this.l=Y("span");d.appendChild(this.l);this.j=Y("span");this.j.classList.add("shaka-current-selection-span");d.appendChild(this.j);this.g.appendChild(d);
this.parent.appendChild(this.g);yq(this);zq(this);this.eventManager.v(this.localization,"locale-updated",function(){yq(c)});this.eventManager.v(this.localization,"locale-changed",function(){yq(c)});this.eventManager.v(this.g,"click",function(){Aq(c)});this.eventManager.v(this.controls,"caststatuschanged",function(){zq(c)})}ta(xq,tp);A("shaka.ui.CastButton",xq);
function Aq(a){u(function c(){var d;return y(c,function(c){switch(c.A){case 1:if(a.h.na()){a.h.Bf();c.I(0);break}ya(c,3);a.g.disabled=!0;return v(c,a.h.cast(),5);case 5:a.g.disabled=!1;Aa(c,0);break;case 3:d=Da(c),a.g.disabled=!1,8004!=d.code&&a.controls.dispatchEvent(new B("error",{detail:d})),w(c)}})})}
function zq(a){var b=a.h.Ee()&&a.controls.Ka,c=a.h.na();zp(a.g,b);a.i.textContent=c?"cast_connected":"cast";b&&(c?a.g.setAttribute("aria-pressed","true"):a.g.setAttribute("aria-pressed","false"));Bq(a)}function Bq(a){a.j.textContent=a.h.na()?a.h.gd():a.localization.resolve("OFF")}function yq(a){a.g.setAttribute("aria-label",a.localization.resolve("CAST"));a.l.textContent=a.localization.resolve("CAST");Bq(a)}function Cq(){}Cq.prototype.create=function(a,b){return new xq(a,b)};jq("cast",new Cq);function Dq(a,b){tp.call(this,a,b);var c=this;this.g=Y("button");this.g.classList.add("material-icons-round");this.g.classList.add("shaka-fast-forward-button");this.g.textContent="fast_forward";this.parent.appendChild(this.g);Eq(this);this.eventManager.v(this.localization,"locale-updated",function(){Eq(c)});this.eventManager.v(this.localization,"locale-changed",function(){Eq(c)});this.eventManager.v(this.g,"click",function(){if(c.video.duration){var a=c.player.Bd();c.player.ye(0>a||4<a?1:2*a)}})}
ta(Dq,tp);A("shaka.ui.FastForwardButton",Dq);function Eq(a){a.g.setAttribute("aria-label",a.localization.resolve("FAST_FORWARD"))}function Fq(){}Fq.prototype.create=function(a,b){return new Dq(a,b)};Kp("fast_forward",new Fq);function Gq(a,b){tp.call(this,a,b);var c=this;this.g=Y("button");this.g.classList.add("shaka-fullscreen-button");this.g.classList.add("material-icons-round");document.fullscreenEnabled||this.g.classList.add("shaka-hidden");this.g.textContent="fullscreen";this.parent.appendChild(this.g);Hq(this);this.eventManager.v(this.localization,"locale-updated",function(){Hq(c)});this.eventManager.v(this.localization,"locale-changed",function(){Hq(c)});this.eventManager.v(this.g,"click",function(){c.controls.we()});
this.eventManager.v(document,"fullscreenchange",function(){c.g.textContent=document.fullscreenElement?"fullscreen_exit":"fullscreen";Hq(c)})}ta(Gq,tp);A("shaka.ui.FullscreenButton",Gq);function Hq(a){a.g.setAttribute("aria-label",a.localization.resolve(document.fullscreenElement?"EXIT_FULL_SCREEN":"FULL_SCREEN"))}function Iq(){}Iq.prototype.create=function(a,b){return new Gq(a,b)};Kp("fullscreen",new Iq);function Jq(a,b){tp.call(this,a,b);var c=this;this.g=Y("button");this.g.classList.add("shaka-mute-button");this.g.classList.add("material-icons-round");this.parent.appendChild(this.g);Kq(this);Lq(this);this.eventManager.v(this.localization,"locale-updated",function(){Kq(c)});this.eventManager.v(this.localization,"locale-changed",function(){Kq(c)});this.eventManager.v(this.g,"click",function(){c.video.muted=!c.video.muted});this.eventManager.v(this.video,"volumechange",function(){Kq(c);Lq(c)})}
ta(Jq,tp);A("shaka.ui.MuteButton",Jq);function Kq(a){a.g.setAttribute("aria-label",a.localization.resolve(a.video.muted?"UNMUTE":"MUTE"))}function Lq(a){a.g.textContent=a.video.muted?"volume_off":"volume_up"}function Mq(){}Mq.prototype.create=function(a,b){return new Jq(a,b)};Kp("mute",new Mq);function Nq(a,b){tp.call(this,a,b);var c=this;this.l=this.controls.H;this.g=Y("button");this.g.classList.add("shaka-pip-button");this.i=Y("i");this.i.classList.add("material-icons-round");this.i.textContent="picture_in_picture_alt";this.g.appendChild(this.i);var d=Y("label");d.classList.add("shaka-overflow-button-label");this.j=Y("span");this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE");d.appendChild(this.j);this.h=Y("span");this.h.classList.add("shaka-current-selection-span");d.appendChild(this.h);
this.g.appendChild(d);Oq(this);this.parent.appendChild(this.g);document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||zp(this.g,!1);this.eventManager.v(this.localization,"locale-updated",function(){Oq(c)});this.eventManager.v(this.localization,"locale-changed",function(){Oq(c)});this.eventManager.v(this.g,"click",function(){Pq(c)});this.eventManager.v(this.l,"enterpictureinpicture",function(){c.i.textContent="branding_watermark";c.g.setAttribute("aria-label",c.localization.resolve("EXIT_PICTURE_IN_PICTURE"));
c.h.textContent=c.localization.resolve("ON")});this.eventManager.v(this.l,"leavepictureinpicture",function(){c.i.textContent="picture_in_picture_alt";c.g.setAttribute("aria-label",c.localization.resolve("ENTER_PICTURE_IN_PICTURE"));c.h.textContent=c.localization.resolve("OFF")});this.eventManager.v(this.controls,"caststatuschanged",function(a){a.newStatus?document.pictureInPictureEnabled&&!c.video.disablePictureInPicture&&zp(c.g,!1):document.pictureInPictureEnabled&&!c.video.disablePictureInPicture&&
zp(c.g,!0)});this.eventManager.v(this.player,"trackschanged",function(){Qq(c)})}ta(Nq,tp);A("shaka.ui.PipButton",Nq);function Pq(a){u(function c(){var d;return y(c,function(c){switch(c.A){case 1:return ya(c,2),document.pictureInPictureElement?v(c,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),v(c,a.video.requestPictureInPicture(),5));case 5:Aa(c,0);break;case 2:d=Da(c),a.controls.dispatchEvent(new B("error",{detail:d})),w(c)}})})}
function Oq(a){a.j.textContent=a.localization.resolve("PICTURE_IN_PICTURE");a.g.setAttribute("aria-label",a.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"));a.h.textContent=a.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}
function Qq(a){u(function c(){return y(c,function(c){switch(c.A){case 1:if(document.pictureInPictureEnabled&&!a.video.disablePictureInPicture)if(a.player&&a.player.Ye()){if(zp(a.g,!1),document.pictureInPictureElement)return v(c,document.exitPictureInPicture(),0)}else zp(a.g,!0);else zp(a.g,!1);c.I(0)}})})}function Rq(){}Rq.prototype.create=function(a,b){return new Nq(a,b)};jq("picture_in_picture",new Rq);function Sq(a,b){tp.call(this,a,b);var c=this;this.g=Y("button");this.g.classList.add("shaka-current-time");Tq(this,"0:00");this.parent.appendChild(this.g);this.eventManager.v(this.g,"click",function(){c.player.$()&&(c.video.currentTime=c.player.Nb().end)});this.eventManager.v(this.controls,"timeandseekrangeupdated",function(){var a=c.controls.ea,b=c.controls.Re(),f=c.video.duration,h=c.player.Nb(),k=h.end-h.start;c.player.$()?(b=Math.max(0,Math.floor(h.end-b)),f=3600<=k,1<=b||a?(Tq(c,"- "+Uq(b,f)),
c.g.disabled=!1):(Tq(c,c.localization.resolve("LIVE")),c.g.disabled=!0)):(a=3600<=f,b=Uq(b,a),f&&(b+=" / "+Uq(f,a)),Tq(c,b),c.g.disabled=!0)});this.eventManager.v(this.player,"trackschanged",function(){c.player.$()&&c.g.setAttribute("aria-label",c.localization.resolve("SKIP_TO_LIVE"))})}ta(Sq,tp);A("shaka.ui.PresentationTimeTracker",Sq);function Tq(a,b){b!=a.g.textContent&&(a.g.textContent=b)}
function Uq(a,b){var c=Math.floor(a/3600),d=Math.floor(a/60%60),e=Math.floor(a%60);10>e&&(e="0"+e);e=d+":"+e;b&&(10>d&&(e="0"+e),e=c+":"+e);return e}function Vq(){}Vq.prototype.create=function(a,b){return new Sq(a,b)};Kp("time_and_duration",new Vq);function Wq(a,b){mq.call(this,a,b,"settings");var c=this;this.button.classList.add("shaka-resolution-button");this.menu.classList.add("shaka-resolutions");this.eventManager.v(this.localization,"locale-updated",function(){Xq(c)});this.eventManager.v(this.localization,"locale-changed",function(){Xq(c)});this.eventManager.v(this.player,"variantchanged",function(){Yq(c)});this.eventManager.v(this.player,"trackschanged",function(){Yq(c)});this.eventManager.v(this.player,"abrstatuschanged",function(){Yq(c)});
Yq(this);Xq(this)}ta(Wq,mq);A("shaka.ui.ResolutionSelection",Wq);
function Yq(a){var b=a.player.Yb();if(b.length&&!b[0].height)zp(a.menu,!1),zp(a.button,!1);else{zp(a.button,!0);b.sort(function(a,b){return b.height-a.height});var c=b.find(function(a){return a.active});c&&(b=b.filter(function(a){return a.language==c.language&&a.channelsCount==c.channelsCount}));b=b.filter(function(a,c){return b.findIndex(function(b){return b.height==a.height})==c});var d=wp(a.menu,"shaka-back-to-overflow-button");Ap(a.menu);a.menu.appendChild(d);var e=a.player.getConfiguration().abr.enabled;
b.forEach(function(b){var d=Y("button");d.classList.add("explicit-resolution");a.eventManager.v(d,"click",a.h.bind(a,b));var f=Y("span");f.textContent=b.height+"p";d.appendChild(f);e||b!=c||(d.setAttribute("aria-selected","true"),d.appendChild(yp()),f.classList.add("shaka-chosen-item"),a.currentSelection.textContent=f.textContent);a.menu.appendChild(d)});d=Y("button");d.classList.add("shaka-enable-abr-button");a.eventManager.v(d,"click",function(){this.player.configure({abr:{enabled:!0}});Yq(this)}.bind(a));
a.g=Y("span");a.g.classList.add("shaka-auto-span");a.g.textContent=a.localization.resolve("AUTO_QUALITY");d.appendChild(a.g);e&&(d.setAttribute("aria-selected","true"),d.appendChild(yp()),a.g.classList.add("shaka-chosen-item"),a.currentSelection.textContent=a.localization.resolve("AUTO_QUALITY"));a.menu.appendChild(d);xp(a.menu);a.controls.dispatchEvent(new B("resolutionselectionupdated"))}}Wq.prototype.h=function(a){this.player.configure({abr:{enabled:!1}});this.player.je(a,this.controls.l.clearBufferOnQualityChange)};
function Xq(a){a.button.setAttribute("aria-label",a.localization.resolve("RESOLUTION"));a.backButton.setAttribute("aria-label",a.localization.resolve("RESOLUTION"));a.backSpan.textContent=a.localization.resolve("RESOLUTION");a.nameSpan.textContent=a.localization.resolve("RESOLUTION");a.g.textContent=a.localization.resolve("AUTO_QUALITY");a.player.getConfiguration().abr.enabled&&(a.currentSelection.textContent=a.localization.resolve("AUTO_QUALITY"))}function Zq(){}
Zq.prototype.create=function(a,b){return new Wq(a,b)};jq("quality",new Zq);function $q(a,b){tp.call(this,a,b);var c=this;this.g=Y("button");this.g.classList.add("material-icons-round");this.g.classList.add("shaka-rewind-button");this.g.textContent="fast_rewind";this.parent.appendChild(this.g);ar(this);this.eventManager.v(this.localization,"locale-updated",function(){ar(c)});this.eventManager.v(this.localization,"locale-changed",function(){ar(c)});this.eventManager.v(this.g,"click",function(){if(c.video.duration){var a=c.player.Bd();c.player.ye(0<a||-4>a?-1:2*a)}})}
ta($q,tp);A("shaka.ui.RewindButton",$q);function ar(a){a.g.setAttribute("aria-label",a.localization.resolve("REWIND"))}function br(){}br.prototype.create=function(a,b){return new $q(a,b)};Kp("rewind",new br);function cr(a,b){tq.call(this,a,b);var c=this;this.button.classList.add("shaka-small-play-button");this.button.classList.add("material-icons-round");dr(this);uq(this);this.eventManager.v(this.video,"play",function(){dr(c)});this.eventManager.v(this.video,"pause",function(){dr(c)})}ta(cr,tq);A("shaka.ui.SmallPlayButton",cr);function dr(a){a.button.textContent=a.video.ended?"replay":vq(a)?"play_arrow":"pause"}function er(){}er.prototype.create=function(a,b){return new cr(a,b)};Kp("play_pause",new er);function fr(a,b){tp.call(this,a,b);var c=Y("div");c.classList.add("shaka-spacer");c.setAttribute("aria-hidden",!0);this.parent.appendChild(c)}ta(fr,tp);A("shaka.ui.Spacer",fr);function gr(){}gr.prototype.create=function(a,b){return new fr(a,b)};Kp("spacer",new gr);function hr(a,b){mq.call(this,a,b,"closed_caption");var c=this;this.button.classList.add("shaka-caption-button");this.menu.classList.add("shaka-text-languages");this.player&&this.player.gb()?this.button.setAttribute("aria-pressed","true"):this.button.setAttribute("aria-pressed","false");ir(this);this.eventManager.v(this.localization,"locale-updated",function(){jr(c);kr(c)});this.eventManager.v(this.localization,"locale-changed",function(){jr(c);kr(c)});this.eventManager.v(this.player,"texttrackvisibility",
function(){lr(c);c.player.gb()&&mr(c)});this.eventManager.v(this.player,"textchanged",function(){kr(c)});this.eventManager.v(this.player,"trackschanged",function(){mr(c)});lr(this);jr(this);kr(this)}ta(hr,mq);A("shaka.ui.TextSelection",hr);function ir(a){var b=Y("button");b.setAttribute("aria-selected","true");a.menu.appendChild(b);b.appendChild(yp());a.g=Y("span");a.g.classList.add("shaka-auto-span");b.appendChild(a.g)}
function lr(a){a.player.gb()?(a.icon.classList.add("shaka-captions-on"),a.icon.classList.remove("shaka-captions-off"),a.button.setAttribute("aria-pressed","true")):(a.icon.classList.add("shaka-captions-off"),a.icon.classList.remove("shaka-captions-on"),a.button.setAttribute("aria-pressed","false"));a.controls.dispatchEvent(new B("captionselectionupdated"))}
function kr(a){var b=a.player.pb();dq(b,a.menu,function(b){return nr(a,b)},a.player.gb(),a.currentSelection,a.localization,a.controls.l.trackLabelFormat);b=Y("button");b.classList.add("shaka-turn-captions-off-button");a.eventManager.v(b,"click",function(){a.player.re(!1)["catch"](function(){});kr(a)});b.appendChild(a.g);a.menu.appendChild(b);a.player.gb()||(b.setAttribute("aria-selected","true"),b.appendChild(yp()),a.g.classList.add("shaka-chosen-item"),a.currentSelection.textContent=a.localization.resolve("OFF"));
xp(a.menu);a.controls.dispatchEvent(new B("captionselectionupdated"))}function nr(a,b){return u(function d(){return y(d,function(d){switch(d.A){case 1:return v(d,a.player.re(!0),2);case 2:a.player&&a.player.jd(b.language,b.roles[0]),w(d)}})})}
function jr(a){a.button.setAttribute("aria-label",a.localization.resolve("CAPTIONS"));a.backButton.setAttribute("aria-label",a.localization.resolve("BACK"));a.nameSpan.textContent=a.localization.resolve("CAPTIONS");a.backSpan.textContent=a.localization.resolve("CAPTIONS");a.g.textContent=a.localization.resolve("OFF")}function mr(a){var b=0<a.player.pb().length;zp(a.button,b);kr(a)}function or(){}or.prototype.create=function(a,b){return new hr(a,b)};jq("captions",new or);function pr(a,b){up.call(this,a,b,["shaka-volume-bar-container"],["shaka-volume-bar"]);var c=this;this.h=this.controls.l;this.eventManager.v(this.video,"volumechange",function(){return qr(c)});this.eventManager.v(this.localization,"locale-updated",function(){return rr(c)});this.eventManager.v(this.localization,"locale-changed",function(){return rr(c)});qr(this);rr(this)}ta(pr,up);A("shaka.ui.VolumeBar",pr);
pr.prototype.onChange=function(){this.video.volume=this.getValue();this.video.muted=0==this.video.volume?!0:!1};function qr(a){a.video.muted?a.setValue(0):a.setValue(a.video.volume);var b=a.h.volumeBarColors,c=["to right"];c.push(b.level+100*a.getValue()+"%");c.push(b.base+100*a.getValue()+"%");c.push(b.base+"100%");a.container.style.background="linear-gradient("+c.join(",")+")"}function rr(a){a.bar.setAttribute("aria-label",a.localization.resolve("VOLUME"))}function sr(){}
sr.prototype.create=function(a,b){return new pr(a,b)};Kp("volume",new sr);}).call(exportTo,innerGlobal,innerGlobal,undefined);if(typeof exports!="undefined")for(var k in exportTo.shaka)exports[k]=exportTo.shaka[k];else if(typeof define=="function"&&define.amd)define(function(){return exportTo.shaka});else innerGlobal.shaka=exportTo.shaka})();

//# sourceMappingURL=shaka-player.ui.map